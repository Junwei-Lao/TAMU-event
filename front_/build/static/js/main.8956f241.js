/*! For license information please see main.8956f241.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),a=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function u(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function c(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var f=Object.assign,p=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),k=Symbol.for("react.consumer"),S=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var T=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var A=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var M=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var R=Symbol.for("react.client.reference");function I(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===R?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case v:return"Fragment";case y:return"Profiler";case g:return"StrictMode";case E:return"Suspense";case w:return"SuspenseList";case T:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case S:return(e.displayName||"Context")+".Provider";case k:return(e._context.displayName||"Context")+".Consumer";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case x:return null!==(t=e.displayName||null)?t:I(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return I(e(t))}catch(ci){}}return null}var O=Array.isArray,P=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,N=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},B=[],F=-1;function U(e){return{current:e}}function j(e){0>F||(e.current=B[F],B[F]=null,F--)}function z(e,t){F++,B[F]=e.current,e.current=t}var H=U(null),q=U(null),V=U(null),G=U(null);function W(e,t){switch(z(V,t),z(q,e),z(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?od(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=sd(t=od(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}j(H),z(H,e)}function K(){j(H),j(q),j(V)}function J(e){null!==e.memoizedState&&z(G,e);var t=H.current,n=sd(t,e.type);t!==n&&(z(q,e),z(H,n))}function $(e){q.current===e&&(j(H),j(q)),G.current===e&&(j(G),Xd._currentValue=D)}var X=Object.prototype.hasOwnProperty,Y=r.unstable_scheduleCallback,Q=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,ae=r.unstable_NormalPriority,oe=r.unstable_LowPriority,se=r.unstable_IdlePriority,le=r.log,ue=r.unstable_setDisableYieldValue,ce=null,de=null;function fe(e){if("function"===typeof le&&ue(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ce,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(he(e)/me|0)|0},he=Math.log,me=Math.LN2;var ve=256,ge=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,a=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~a)?i=ye(r):0!==(o&=s)?i=ye(o):n||0!==(n=s&~e)&&(i=ye(n)):0!==(s=r&~a)?i=ye(s):0!==o?i=ye(o):n||0!==(n=r&~e)&&(i=ye(n)),0===i?0:0!==t&&t!==i&&0===(t&a)&&((a=i&-i)>=(n=t&-t)||32===a&&0!==(4194048&n))?t:i}function ke(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Se(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function _e(){var e=ve;return 0===(4194048&(ve<<=1))&&(ve=256),e}function Ee(){var e=ge;return 0===(62914560&(ge<<=1))&&(ge=4194304),e}function we(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xe(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-pe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Te(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ae(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Me(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Le(){var e=N.p;return 0!==e?e:void 0===(e=window.event)?32:ff(e.type)}var Re=Math.random().toString(36).slice(2),Ie="__reactFiber$"+Re,Oe="__reactProps$"+Re,Pe="__reactContainer$"+Re,Ne="__reactEvents$"+Re,De="__reactListeners$"+Re,Be="__reactHandles$"+Re,Fe="__reactResources$"+Re,Ue="__reactMarker$"+Re;function je(e){delete e[Ie],delete e[Oe],delete e[Ne],delete e[De],delete e[Be]}function ze(e){var t=e[Ie];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pe]||n[Ie]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Sd(e);null!==e;){if(n=e[Ie])return n;e=Sd(e)}return t}n=(e=n).parentNode}return null}function He(e){if(e=e[Ie]||e[Pe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Ve(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[Ue]=!0}var We=new Set,Ke={};function Je(e,t){$e(e,t),$e(e+"Capture",t)}function $e(e,t){for(Ke[e]=t,e=0;e<t.length;e++)We.add(t[e])}var Xe,Ye,Qe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,X.call(et,i)||!X.call(Ze,i)&&(Qe.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Xe)try{throw Error()}catch(ci){var t=ci.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Ye=-1<ci.stack.indexOf("\n    at")?" (<anonymous>)":-1<ci.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Ye}var at=!1;function ot(e,t){if(!e||at)return"";at=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(ci){var r=ci}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(o){if(o&&r&&"string"===typeof o.stack)return[o.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=r.DetermineComponentFrameRoot(),o=a[0],s=a[1];if(o&&s){var l=o.split("\n"),u=s.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<u.length&&!u[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===u.length)for(r=l.length-1,i=u.length-1;1<=r&&0<=i&&l[r]!==u[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==u[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==u[i]){var c="\n"+l[r].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=r&&0<=i);break}}}finally{at=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function st(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=st(e),e=e.return}while(e);return t}catch(ci){return"\nError generating stack: "+ci.message+"\n"+ci.stack}}function ut(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ct(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ct(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ft(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ct(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(mo){return e.body}}var ht=/[\n"\\]/g;function mt(e){return e.replace(ht,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,i,a,o,s){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ut(t)):e.value!==""+ut(t)&&(e.value=""+ut(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?yt(e,o,ut(t)):null!=n?yt(e,o,ut(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=a&&(e.defaultChecked=!!a),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+ut(s):e.removeAttribute("name")}function gt(e,t,n,r,i,a,o,s){if(null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.type=a),null!=t||null!=n){if(!("submit"!==a&&"reset"!==a||void 0!==t&&null!==t))return;n=null!=n?""+ut(n):"",t=null!=t?""+ut(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function yt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ut(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function kt(e,t,n){null==t||((t=""+ut(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ut(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(O(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ut(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function _t(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function xt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&wt(e,i,r)}else for(var a in t)t.hasOwnProperty(a)&&wt(e,a,t[a])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mt(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Lt=null;function Rt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var It=null,Ot=null;function Pt(e){var t=He(e);if(t&&(e=t.stateNode)){var n=e[Oe]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Oe]||null;if(!i)throw Error(o(90));vt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ft(r)}break e;case"textarea":kt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Nt=!1;function Dt(e,t,n){if(Nt)return e(t,n);Nt=!0;try{return e(t)}finally{if(Nt=!1,(null!==It||null!==Ot)&&(qu(),It&&(t=It,e=Ot,Ot=It=null,Pt(t),e)))for(t=0;t<e.length;t++)Pt(e[t])}}function Bt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Oe]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ut=!1;if(Ft)try{var jt={};Object.defineProperty(jt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",jt,jt),window.removeEventListener("test",jt,jt)}catch(mo){Ut=!1}var zt=null,Ht=null,qt=null;function Vt(){if(qt)return qt;var e,t,n=Ht,r=n.length,i="value"in zt?zt.value:zt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return qt=i.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Wt(){return!0}function Kt(){return!1}function Jt(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Wt:Kt,this.isPropagationStopped=Kt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wt)},persist:function(){},isPersistent:Wt}),t}var $t,Xt,Yt,Qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Jt(Qt),en=f({},Qt,{view:0,detail:0}),tn=Jt(en),nn=f({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yt&&(Yt&&"mousemove"===e.type?($t=e.screenX-Yt.screenX,Xt=e.screenY-Yt.screenY):Xt=$t=0,Yt=e),$t)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),rn=Jt(nn),an=Jt(f({},nn,{dataTransfer:0})),on=Jt(f({},en,{relatedTarget:0})),sn=Jt(f({},Qt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Jt(f({},Qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),un=Jt(f({},Qt,{data:0})),cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=fn[e])&&!!t[e]}function hn(){return pn}var mn=Jt(f({},en,{key:function(e){if(e.key){var t=cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),vn=Jt(f({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gn=Jt(f({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hn})),yn=Jt(f({},Qt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Jt(f({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),kn=Jt(f({},Qt,{newState:0,oldState:0})),Sn=[9,13,27,32],_n=Ft&&"CompositionEvent"in window,En=null;Ft&&"documentMode"in document&&(En=document.documentMode);var wn=Ft&&"TextEvent"in window&&!En,xn=Ft&&(!_n||En&&8<En&&11>=En),Cn=String.fromCharCode(32),Tn=!1;function An(e,t){switch(e){case"keyup":return-1!==Sn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ln=!1;var Rn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function In(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Rn[e.type]:"textarea"===t}function On(e,t,n,r){It?Ot?Ot.push(r):Ot=[r]:It=r,0<(t=Wc(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Pn=null,Nn=null;function Dn(e){Fc(e,0)}function Bn(e){if(ft(qe(e)))return e}function Fn(e,t){if("change"===e)return t}var Un=!1;if(Ft){var jn;if(Ft){var zn="oninput"in document;if(!zn){var Hn=document.createElement("div");Hn.setAttribute("oninput","return;"),zn="function"===typeof Hn.oninput}jn=zn}else jn=!1;Un=jn&&(!document.documentMode||9<document.documentMode)}function qn(){Pn&&(Pn.detachEvent("onpropertychange",Vn),Nn=Pn=null)}function Vn(e){if("value"===e.propertyName&&Bn(Nn)){var t=[];On(t,Nn,e,Rt(e)),Dt(Dn,t)}}function Gn(e,t,n){"focusin"===e?(qn(),Nn=n,(Pn=t).attachEvent("onpropertychange",Vn)):"focusout"===e&&qn()}function Wn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Bn(Nn)}function Kn(e,t){if("click"===e)return Bn(t)}function Jn(e,t){if("input"===e||"change"===e)return Bn(t)}var $n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if($n(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!X.call(t,i)||!$n(e[i],t[i]))return!1}return!0}function Yn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qn(e,t){var n,r=Yn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,ar=null,or=!1;function sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;or||null==rr||rr!==pt(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ar&&Xn(ar,r)||(ar=r,0<(r=Wc(ir,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ur={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},cr={},dr={};function fr(e){if(cr[e])return cr[e];if(!ur[e])return e;var t,n=ur[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return cr[e]=n[t];return e}Ft&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);var pr=fr("animationend"),hr=fr("animationiteration"),mr=fr("animationstart"),vr=fr("transitionrun"),gr=fr("transitionstart"),yr=fr("transitioncancel"),br=fr("transitionend"),kr=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){kr.set(e,t),Je(t,[e])}Sr.push("scrollEnd");var Er=new WeakMap;function wr(e,t){if("object"===typeof e&&null!==e){var n=Er.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Er.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var xr=[],Cr=0,Tr=0;function Ar(){for(var e=Cr,t=Tr=Cr=0;t<e;){var n=xr[t];xr[t++]=null;var r=xr[t];xr[t++]=null;var i=xr[t];xr[t++]=null;var a=xr[t];if(xr[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==a&&Ir(n,i,a)}}function Mr(e,t,n,r){xr[Cr++]=e,xr[Cr++]=t,xr[Cr++]=n,xr[Cr++]=r,Tr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Lr(e,t,n,r){return Mr(e,t,n,r),Or(e)}function Rr(e,t){return Mr(e,null,null,t),Or(e)}function Ir(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(i=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,i&&null!==t&&(i=31-pe(n),null===(r=(e=a.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),a):null}function Or(e){if(50<Pu)throw Pu=0,Nu=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Pr={};function Nr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dr(e,t,n,r){return new Nr(e,t,n,r)}function Br(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=Dr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function jr(e,t,n,r,i,a){var s=0;if(r=e,"function"===typeof e)Br(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Dr(31,n,t,i)).elementType=T,e.lanes=a,e;case v:return zr(n.children,i,a,t);case g:s=8,i|=24;break;case y:return(e=Dr(12,n,t,2|i)).elementType=y,e.lanes=a,e;case E:return(e=Dr(13,n,t,i)).elementType=E,e.lanes=a,e;case w:return(e=Dr(19,n,t,i)).elementType=w,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case S:s=10;break e;case k:s=9;break e;case _:s=11;break e;case x:s=14;break e;case C:s=16,r=null;break e}s=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Dr(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function zr(e,t,n,r){return(e=Dr(7,e,r,t)).lanes=n,e}function Hr(e,t,n){return(e=Dr(6,e,null,t)).lanes=n,e}function qr(e,t,n){return(t=Dr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vr=[],Gr=0,Wr=null,Kr=0,Jr=[],$r=0,Xr=null,Yr=1,Qr="";function Zr(e,t){Vr[Gr++]=Kr,Vr[Gr++]=Wr,Wr=e,Kr=t}function ei(e,t,n){Jr[$r++]=Yr,Jr[$r++]=Qr,Jr[$r++]=Xr,Xr=e;var r=Yr;e=Qr;var i=32-pe(r)-1;r&=~(1<<i),n+=1;var a=32-pe(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yr=1<<32-pe(t)+i|n<<i|r,Qr=a+e}else Yr=1<<a|n<<i|r,Qr=e}function ti(e){null!==e.return&&(Zr(e,1),ei(e,1,0))}function ni(e){for(;e===Wr;)Wr=Vr[--Gr],Vr[Gr]=null,Kr=Vr[--Gr],Vr[Gr]=null;for(;e===Xr;)Xr=Jr[--$r],Jr[$r]=null,Qr=Jr[--$r],Jr[$r]=null,Yr=Jr[--$r],Jr[$r]=null}var ri=null,ii=null,ai=!1,oi=null,si=!1,li=Error(o(519));function ui(e){throw vi(wr(Error(o(418,"")),e)),li}function di(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ie]=e,t[Oe]=r,n){case"dialog":Uc("cancel",t),Uc("close",t);break;case"iframe":case"object":case"embed":Uc("load",t);break;case"video":case"audio":for(n=0;n<Dc.length;n++)Uc(Dc[n],t);break;case"source":Uc("error",t);break;case"img":case"image":case"link":Uc("error",t),Uc("load",t);break;case"details":Uc("toggle",t);break;case"input":Uc("invalid",t),gt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Uc("invalid",t);break;case"textarea":Uc("invalid",t),St(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Qc(t.textContent,n)?(null!=r.popover&&(Uc("beforetoggle",t),Uc("toggle",t)),null!=r.onScroll&&Uc("scroll",t),null!=r.onScrollEnd&&Uc("scrollend",t),null!=r.onClick&&(t.onclick=Zc),t=!0):t=!1,t||ui(e)}function fi(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(si=!1);case 27:case 3:return void(si=!0);default:ri=ri.return}}function pi(e){if(e!==ri)return!1;if(!ai)return fi(e),ai=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ld(e.type,e.memoizedProps)),t=!t),t&&ii&&ui(e),fi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=bd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,md(e.type)?(e=kd,kd=null,ii=e):ii=n):ii=ri?bd(e.stateNode.nextSibling):null;return!0}function hi(){ii=ri=null,ai=!1}function mi(){var e=oi;return null!==e&&(null===Su?Su=e:Su.push.apply(Su,e),oi=null),e}function vi(e){null===oi?oi=[e]:oi.push(e)}var gi=U(null),yi=null,bi=null;function ki(e,t,n){z(gi,t._currentValue),t._currentValue=n}function Si(e){e._currentValue=gi.current,j(gi)}function _i(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ei(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var a=i.dependencies;if(null!==a){var s=i.child;a=a.firstContext;e:for(;null!==a;){var l=a;a=i;for(var u=0;u<t.length;u++)if(l.context===t[u]){a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),_i(a.return,n,e),r||(s=null);break e}a=l.next}}else if(18===i.tag){if(null===(s=i.return))throw Error(o(341));s.lanes|=n,null!==(a=s.alternate)&&(a.lanes|=n),_i(s,n,e),s=null}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===e){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}}function wi(e,t,n,r){e=null;for(var i=t,a=!1;null!==i;){if(!a)if(0!==(524288&i.flags))a=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var s=i.alternate;if(null===s)throw Error(o(387));if(null!==(s=s.memoizedProps)){var l=i.type;$n(i.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(i===G.current){if(null===(s=i.alternate))throw Error(o(387));s.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Xd):e=[Xd])}i=i.return}null!==e&&Ei(t,e,n,r),t.flags|=262144}function xi(e){for(e=e.firstContext;null!==e;){if(!$n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ci(e){yi=e,bi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ti(e){return Mi(yi,e)}function Ai(e,t){return null===yi&&Ci(e),Mi(e,t)}function Mi(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===bi){if(null===e)throw Error(o(308));bi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else bi=bi.next=t;return n}var Li="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ri=r.unstable_scheduleCallback,Ii=r.unstable_NormalPriority,Oi={$$typeof:S,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pi(){return{controller:new Li,data:new Map,refCount:0}}function Ni(e){e.refCount--,0===e.refCount&&Ri(Ii,function(){e.controller.abort()})}var Di=null,Bi=0,Fi=0,Ui=null;function ji(){if(0===--Bi&&null!==Di){null!==Ui&&(Ui.status="fulfilled");var e=Di;Di=null,Fi=0,Ui=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var zi=P.S;P.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Di){var n=Di=[];Bi=0,Fi=Rc(),Ui={status:"pending",value:void 0,then:function(e){n.push(e)}}}Bi++,t.then(ji,ji)}(0,t),null!==zi&&zi(e,t)};var Hi=U(null);function qi(){var e=Hi.current;return null!==e?e:au.pooledCache}function Vi(e,t){z(Hi,null===t?Hi.current:t.pool)}function Gi(){var e=qi();return null===e?null:{parent:Oi._currentValue,pool:e}}var Wi=Error(o(460)),Ki=Error(o(474)),Ji=Error(o(542)),$i={then:function(){}};function Xi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Yi(){}function Qi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Yi,Yi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ta(e=t.reason),e;default:if("string"===typeof t.status)t.then(Yi,Yi);else{if(null!==(e=au)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ta(e=t.reason),e}throw Zi=t,Wi}}var Zi=null;function ea(){if(null===Zi)throw Error(o(459));var e=Zi;return Zi=null,e}function ta(e){if(e===Wi||e===Ji)throw Error(o(483))}var na=!1;function ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ia(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function aa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&iu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Or(e),Ir(e,null,n),t}return Mr(e,r,t,n),Or(e)}function sa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}function la(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ua=!1;function ca(){if(ua){if(null!==Ui)throw Ui}}function da(e,t,n,r){ua=!1;var i=e.updateQueue;na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var d=i.baseState;for(o=0,c=u=l=null,s=a;;){var p=-536870913&s.lane,h=p!==s.lane;if(h?(su&p)===p:(r&p)===p){0!==p&&p===Fi&&(ua=!0),null!==c&&(c=c.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,v=s;p=t;var g=n;switch(v.tag){case 1:if("function"===typeof(m=v.payload)){d=m.call(g,d,p);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(p="function"===typeof(m=v.payload)?m.call(g,d,p):m)||void 0===p)break e;d=f({},d,p);break e;case 2:na=!0}}null!==(p=s.callback)&&(e.flags|=64,h&&(e.flags|=8192),null===(h=i.callbacks)?i.callbacks=[p]:h.push(p))}else h={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=h,l=d):c=c.next=h,o|=p;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null===a&&(i.shared.lanes=0),mu|=o,e.lanes=o,e.memoizedState=d}}function fa(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function pa(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)fa(n[e],t)}var ha=U(null),ma=U(0);function va(e,t){z(ma,e=pu),z(ha,t),pu=e|t.baseLanes}function ga(){z(ma,pu),z(ha,ha.current)}function ya(){pu=ma.current,j(ha),j(ma)}var ba=0,ka=null,Sa=null,_a=null,Ea=!1,wa=!1,xa=!1,Ca=0,Ta=0,Aa=null,Ma=0;function La(){throw Error(o(321))}function Ra(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$n(e[n],t[n]))return!1;return!0}function Ia(e,t,n,r,i,a){return ba=a,ka=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?Jo:$o,xa=!1,a=n(r,i),xa=!1,wa&&(a=Pa(t,n,r,i)),Oa(e),a}function Oa(e){P.H=Ko;var t=null!==Sa&&null!==Sa.next;if(ba=0,_a=Sa=ka=null,Ea=!1,Ta=0,Aa=null,t)throw Error(o(300));null===e||Ms||null!==(e=e.dependencies)&&xi(e)&&(Ms=!0)}function Pa(e,t,n,r){ka=e;var i=0;do{if(wa&&(Aa=null),Ta=0,wa=!1,25<=i)throw Error(o(301));if(i+=1,_a=Sa=null,null!=e.updateQueue){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,null!=a.memoCache&&(a.memoCache.index=0)}P.H=Xo,a=t(n,r)}while(wa);return a}function Na(){var e=P.H,t=e.useState()[0];return t="function"===typeof t.then?za(t):t,e=e.useState()[0],(null!==Sa?Sa.memoizedState:null)!==e&&(ka.flags|=1024),t}function Da(){var e=0!==Ca;return Ca=0,e}function Ba(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fa(e){if(Ea){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ea=!1}ba=0,_a=Sa=ka=null,wa=!1,Ta=Ca=0,Aa=null}function Ua(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===_a?ka.memoizedState=_a=e:_a=_a.next=e,_a}function ja(){if(null===Sa){var e=ka.alternate;e=null!==e?e.memoizedState:null}else e=Sa.next;var t=null===_a?ka.memoizedState:_a.next;if(null!==t)_a=t,Sa=e;else{if(null===e){if(null===ka.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(Sa=e).memoizedState,baseState:Sa.baseState,baseQueue:Sa.baseQueue,queue:Sa.queue,next:null},null===_a?ka.memoizedState=_a=e:_a=_a.next=e}return _a}function za(e){var t=Ta;return Ta+=1,null===Aa&&(Aa=[]),e=Qi(Aa,e,t),t=ka,null===(null===_a?t.memoizedState:_a.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?Jo:$o),e}function Ha(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return za(e);if(e.$$typeof===S)return Ti(e)}throw Error(o(438,String(e)))}function qa(e){var t=null,n=ka.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=ka.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ka.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=A;return t.index++,n}function Va(e,t){return"function"===typeof t?t(e):t}function Ga(e){return Wa(ja(),Sa,e)}function Wa(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,a=r.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}t.baseQueue=i=a,r.pending=null}if(a=e.baseState,null===i)e.memoizedState=a;else{var l=s=null,u=null,c=t=i.next,d=!1;do{var f=-536870913&c.lane;if(f!==c.lane?(su&f)===f:(ba&f)===f){var p=c.revertLane;if(0===p)null!==u&&(u=u.next={lane:0,revertLane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===Fi&&(d=!0);else{if((ba&p)===p){c=c.next,p===Fi&&(d=!0);continue}f={lane:0,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=f,s=a):u=u.next=f,ka.lanes|=p,mu|=p}f=c.action,xa&&n(a,f),a=c.hasEagerState?c.eagerState:n(a,f)}else p={lane:f,revertLane:c.revertLane,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},null===u?(l=u=p,s=a):u=u.next=p,ka.lanes|=f,mu|=f;c=c.next}while(null!==c&&c!==t);if(null===u?s=a:u.next=l,!$n(a,e.memoizedState)&&(Ms=!0,d&&null!==(n=Ui)))throw n;e.memoizedState=a,e.baseState=s,e.baseQueue=u,r.lastRenderedState=a}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ka(e){var t=ja(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);$n(a,t.memoizedState)||(Ms=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ja(e,t,n){var r=ka,i=ja(),a=ai;if(a){if(void 0===n)throw Error(o(407));n=n()}else n=t();var s=!$n((Sa||i).memoizedState,n);if(s&&(i.memoizedState=n,Ms=!0),i=i.queue,bo(2048,8,Ya.bind(null,r,i,e),[e]),i.getSnapshot!==t||s||null!==_a&&1&_a.memoizedState.tag){if(r.flags|=2048,vo(9,{destroy:void 0,resource:void 0},Xa.bind(null,r,i,n,t),null),null===au)throw Error(o(349));a||0!==(124&ba)||$a(r,t,n)}return n}function $a(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ka.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ka.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Xa(e,t,n,r){t.value=n,t.getSnapshot=r,Qa(t)&&Za(e)}function Ya(e,t,n){return n(function(){Qa(t)&&Za(e)})}function Qa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$n(e,n)}catch(r){return!0}}function Za(e){var t=Rr(e,2);null!==t&&Fu(t,e,2)}function eo(e){var t=Ua();if("function"===typeof e){var n=e;if(e=n(),xa){fe(!0);try{n()}finally{fe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:e},t}function to(e,t,n,r){return e.baseState=n,Wa(e,Sa,"function"===typeof r?r:Va)}function no(e,t,n,r,i){if(Vo(e))throw Error(o(485));if(null!==(e=t.action)){var a={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){a.listeners.push(e)}};null!==P.T?n(!0):a.isTransition=!1,r(a),null===(n=t.pending)?(a.next=t.pending=a,ro(t,a)):(a.next=n.next,t.pending=n.next=a)}}function ro(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var a=P.T,o={};P.T=o;try{var s=n(i,r),l=P.S;null!==l&&l(o,s),io(e,t,s)}catch(u){oo(e,t,u)}finally{P.T=a}}else try{io(e,t,a=n(i,r))}catch(c){oo(e,t,c)}}function io(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){ao(e,t,n)},function(n){return oo(e,t,n)}):ao(e,t,n)}function ao(e,t,n){t.status="fulfilled",t.value=n,so(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ro(e,n)))}function oo(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,so(t),t=t.next}while(t!==r)}e.action=null}function so(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function lo(e,t){return t}function uo(e,t){if(ai){var n=au.formState;if(null!==n){e:{var r=ka;if(ai){if(ii){t:{for(var i=ii,a=si;8!==i.nodeType;){if(!a){i=null;break t}if(null===(i=bd(i.nextSibling))){i=null;break t}}i="F!"===(a=i.data)||"F"===a?i:null}if(i){ii=bd(i.nextSibling),r="F!"===i.data;break e}}ui(r)}r=!1}r&&(t=n[0])}}return(n=Ua()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:t},n.queue=r,n=zo.bind(null,ka,r),r.dispatch=n,r=eo(!1),a=qo.bind(null,ka,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=Ua()).queue=i,n=no.bind(null,ka,i,a,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function co(e){return fo(ja(),Sa,e)}function fo(e,t,n){if(t=Wa(e,t,lo)[0],e=Ga(Va)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=za(t)}catch(ci){if(ci===Wi)throw Ji;throw ci}else r=t;var i=(t=ja()).queue,a=i.dispatch;return n!==t.memoizedState&&(ka.flags|=2048,vo(9,{destroy:void 0,resource:void 0},po.bind(null,i,n),null)),[r,a,e]}function po(e,t){e.action=t}function ho(e){var t=ja(),n=Sa;if(null!==n)return fo(t,n,e);ja(),t=t.memoizedState;var r=(n=ja()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function vo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=ka.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ka.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function go(){return ja().memoizedState}function yo(e,t,n,r){var i=Ua();r=void 0===r?null:r,ka.flags|=e,i.memoizedState=vo(1|t,{destroy:void 0,resource:void 0},n,r)}function bo(e,t,n,r){var i=ja();r=void 0===r?null:r;var a=i.memoizedState.inst;null!==Sa&&null!==r&&Ra(r,Sa.memoizedState.deps)?i.memoizedState=vo(t,a,n,r):(ka.flags|=e,i.memoizedState=vo(1|t,a,n,r))}function ko(e,t){yo(8390656,8,e,t)}function So(e,t){bo(2048,8,e,t)}function _o(e,t){return bo(4,2,e,t)}function Eo(e,t){return bo(4,4,e,t)}function wo(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function xo(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,bo(4,4,wo.bind(null,t,e),n)}function Co(){}function To(e,t){var n=ja();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ra(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ao(e,t){var n=ja();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ra(t,r[1]))return r[0];if(r=e(),xa){fe(!0);try{e()}finally{fe(!1)}}return n.memoizedState=[r,t],r}function Mo(e,t,n){return void 0===n||0!==(1073741824&ba)?e.memoizedState=t:(e.memoizedState=n,e=Bu(),ka.lanes|=e,mu|=e,n)}function Lo(e,t,n,r){return $n(n,t)?n:null!==ha.current?(e=Mo(e,n,r),$n(e,t)||(Ms=!0),e):0===(42&ba)?(Ms=!0,e.memoizedState=n):(e=Bu(),ka.lanes|=e,mu|=e,t)}function Ro(e,t,n,r,i){var a=N.p;N.p=0!==a&&8>a?a:8;var o=P.T,s={};P.T=s,qo(e,!1,t,n);try{var l=i(),u=P.S;if(null!==u&&u(s,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Ho(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Du());else Ho(e,t,r,Du())}catch(c){Ho(e,t,{then:function(){},status:"rejected",reason:c},Du())}finally{N.p=a,P.T=o}}function Io(){}function Oo(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=Po(e).queue;Ro(e,i,t,D,null===n?Io:function(){return No(e),n(r)})}function Po(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:D},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function No(e){Ho(e,Po(e).next.queue,{},Du())}function Do(){return Ti(Xd)}function Bo(){return ja().memoizedState}function Fo(){return ja().memoizedState}function Uo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Du(),r=oa(t,e=aa(n),n);return null!==r&&(Fu(r,t,n),sa(r,t,n)),t={cache:Pi()},void(e.payload=t)}t=t.return}}function jo(e,t,n){var r=Du();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Vo(e)?Go(t,n):null!==(n=Lr(e,t,n,r))&&(Fu(n,e,r),Wo(n,t,r))}function zo(e,t,n){Ho(e,t,n,Du())}function Ho(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vo(e))Go(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,$n(s,o))return Mr(e,t,i,0),null===au&&Ar(),!1}catch(l){}if(null!==(n=Lr(e,t,i,r)))return Fu(n,e,r),Wo(n,t,r),!0}return!1}function qo(e,t,n,r){if(r={lane:2,revertLane:Rc(),action:r,hasEagerState:!1,eagerState:null,next:null},Vo(e)){if(t)throw Error(o(479))}else null!==(t=Lr(e,n,r,2))&&Fu(t,e,2)}function Vo(e){var t=e.alternate;return e===ka||null!==t&&t===ka}function Go(e,t){wa=Ea=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Wo(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}var Ko={readContext:Ti,use:Ha,useCallback:La,useContext:La,useEffect:La,useImperativeHandle:La,useLayoutEffect:La,useInsertionEffect:La,useMemo:La,useReducer:La,useRef:La,useState:La,useDebugValue:La,useDeferredValue:La,useTransition:La,useSyncExternalStore:La,useId:La,useHostTransitionStatus:La,useFormState:La,useActionState:La,useOptimistic:La,useMemoCache:La,useCacheRefresh:La},Jo={readContext:Ti,use:Ha,useCallback:function(e,t){return Ua().memoizedState=[e,void 0===t?null:t],e},useContext:Ti,useEffect:ko,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,yo(4194308,4,wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yo(4194308,4,e,t)},useInsertionEffect:function(e,t){yo(4,2,e,t)},useMemo:function(e,t){var n=Ua();t=void 0===t?null:t;var r=e();if(xa){fe(!0);try{e()}finally{fe(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Ua();if(void 0!==n){var i=n(t);if(xa){fe(!0);try{n(t)}finally{fe(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=jo.bind(null,ka,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ua().memoizedState=e},useState:function(e){var t=(e=eo(e)).queue,n=zo.bind(null,ka,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Co,useDeferredValue:function(e,t){return Mo(Ua(),e,t)},useTransition:function(){var e=eo(!1);return e=Ro.bind(null,ka,e.queue,!0,!1),Ua().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=ka,i=Ua();if(ai){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===au)throw Error(o(349));0!==(124&su)||$a(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,ko(Ya.bind(null,r,a,e),[e]),r.flags|=2048,vo(9,{destroy:void 0,resource:void 0},Xa.bind(null,r,a,n,t),null),n},useId:function(){var e=Ua(),t=au.identifierPrefix;if(ai){var n=Qr;t="\xab"+t+"R"+(n=(Yr&~(1<<32-pe(Yr)-1)).toString(32)+n),0<(n=Ca++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ma++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Do,useFormState:uo,useActionState:uo,useOptimistic:function(e){var t=Ua();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=qo.bind(null,ka,!0,n),n.dispatch=t,[e,t]},useMemoCache:qa,useCacheRefresh:function(){return Ua().memoizedState=Uo.bind(null,ka)}},$o={readContext:Ti,use:Ha,useCallback:To,useContext:Ti,useEffect:So,useImperativeHandle:xo,useInsertionEffect:_o,useLayoutEffect:Eo,useMemo:Ao,useReducer:Ga,useRef:go,useState:function(){return Ga(Va)},useDebugValue:Co,useDeferredValue:function(e,t){return Lo(ja(),Sa.memoizedState,e,t)},useTransition:function(){var e=Ga(Va)[0],t=ja().memoizedState;return["boolean"===typeof e?e:za(e),t]},useSyncExternalStore:Ja,useId:Bo,useHostTransitionStatus:Do,useFormState:co,useActionState:co,useOptimistic:function(e,t){return to(ja(),0,e,t)},useMemoCache:qa,useCacheRefresh:Fo},Xo={readContext:Ti,use:Ha,useCallback:To,useContext:Ti,useEffect:So,useImperativeHandle:xo,useInsertionEffect:_o,useLayoutEffect:Eo,useMemo:Ao,useReducer:Ka,useRef:go,useState:function(){return Ka(Va)},useDebugValue:Co,useDeferredValue:function(e,t){var n=ja();return null===Sa?Mo(n,e,t):Lo(n,Sa.memoizedState,e,t)},useTransition:function(){var e=Ka(Va)[0],t=ja().memoizedState;return["boolean"===typeof e?e:za(e),t]},useSyncExternalStore:Ja,useId:Bo,useHostTransitionStatus:Do,useFormState:ho,useActionState:ho,useOptimistic:function(e,t){var n=ja();return null!==Sa?to(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qa,useCacheRefresh:Fo},Yo=null,Qo=0;function Zo(e){var t=Qo;return Qo+=1,null===Yo&&(Yo=[]),Qi(Yo,e,t)}function es(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function ts(e,t){if(t.$$typeof===p)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ns(e){return(0,e._init)(e._payload)}function rs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Hr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===v?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===C&&ns(a)===t.type)?(es(t=i(t,n.props),n),t.return=e,t):(es(t=jr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,a){return null===t||7!==t.tag?((t=zr(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Hr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case h:return es(n=jr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=qr(t,e.mode,n)).return=e,t;case C:return f(e,t=(0,t._init)(t._payload),n)}if(O(t)||L(t))return(t=zr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return f(e,Zo(t),n);if(t.$$typeof===S)return f(e,Ai(e,t),n);ts(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case h:return n.key===i?u(e,t,n,r):null;case m:return n.key===i?c(e,t,n,r):null;case C:return p(e,t,n=(i=n._init)(n._payload),r)}if(O(n)||L(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,Zo(n),r);if(n.$$typeof===S)return p(e,t,Ai(e,n),r);ts(e,n)}return null}function g(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case h:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return g(e,t,n,r=(0,r._init)(r._payload),i)}if(O(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return g(e,t,n,Zo(r),i);if(r.$$typeof===S)return g(e,t,n,Ai(t,r),i);ts(t,r)}return null}function y(l,u,c,d){if("object"===typeof c&&null!==c&&c.type===v&&null===c.key&&(c=c.props.children),"object"===typeof c&&null!==c){switch(c.$$typeof){case h:e:{for(var b=c.key;null!==u;){if(u.key===b){if((b=c.type)===v){if(7===u.tag){n(l,u.sibling),(d=i(u,c.props.children)).return=l,l=d;break e}}else if(u.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===C&&ns(b)===u.type){n(l,u.sibling),es(d=i(u,c.props),c),d.return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}c.type===v?((d=zr(c.props.children,l.mode,d,c.key)).return=l,l=d):(es(d=jr(c.type,c.key,c.props,null,l.mode,d),c),d.return=l,l=d)}return s(l);case m:e:{for(b=c.key;null!==u;){if(u.key===b){if(4===u.tag&&u.stateNode.containerInfo===c.containerInfo&&u.stateNode.implementation===c.implementation){n(l,u.sibling),(d=i(u,c.children||[])).return=l,l=d;break e}n(l,u);break}t(l,u),u=u.sibling}(d=qr(c,l.mode,d)).return=l,l=d}return s(l);case C:return y(l,u,c=(b=c._init)(c._payload),d)}if(O(c))return function(i,o,s,l){for(var u=null,c=null,d=o,h=o=0,m=null;null!==d&&h<s.length;h++){d.index>h?(m=d,d=null):m=d.sibling;var v=p(i,d,s[h],l);if(null===v){null===d&&(d=m);break}e&&d&&null===v.alternate&&t(i,d),o=a(v,o,h),null===c?u=v:c.sibling=v,c=v,d=m}if(h===s.length)return n(i,d),ai&&Zr(i,h),u;if(null===d){for(;h<s.length;h++)null!==(d=f(i,s[h],l))&&(o=a(d,o,h),null===c?u=d:c.sibling=d,c=d);return ai&&Zr(i,h),u}for(d=r(d);h<s.length;h++)null!==(m=g(d,i,h,s[h],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?h:m.key),o=a(m,o,h),null===c?u=m:c.sibling=m,c=m);return e&&d.forEach(function(e){return t(i,e)}),ai&&Zr(i,h),u}(l,u,c,d);if(L(c)){if("function"!==typeof(b=L(c)))throw Error(o(150));return function(i,s,l,u){if(null==l)throw Error(o(151));for(var c=null,d=null,h=s,m=s=0,v=null,y=l.next();null!==h&&!y.done;m++,y=l.next()){h.index>m?(v=h,h=null):v=h.sibling;var b=p(i,h,y.value,u);if(null===b){null===h&&(h=v);break}e&&h&&null===b.alternate&&t(i,h),s=a(b,s,m),null===d?c=b:d.sibling=b,d=b,h=v}if(y.done)return n(i,h),ai&&Zr(i,m),c;if(null===h){for(;!y.done;m++,y=l.next())null!==(y=f(i,y.value,u))&&(s=a(y,s,m),null===d?c=y:d.sibling=y,d=y);return ai&&Zr(i,m),c}for(h=r(h);!y.done;m++,y=l.next())null!==(y=g(h,i,m,y.value,u))&&(e&&null!==y.alternate&&h.delete(null===y.key?m:y.key),s=a(y,s,m),null===d?c=y:d.sibling=y,d=y);return e&&h.forEach(function(e){return t(i,e)}),ai&&Zr(i,m),c}(l,u,c=b.call(c),d)}if("function"===typeof c.then)return y(l,u,Zo(c),d);if(c.$$typeof===S)return y(l,u,Ai(l,c),d);ts(l,c)}return"string"===typeof c&&""!==c||"number"===typeof c||"bigint"===typeof c?(c=""+c,null!==u&&6===u.tag?(n(l,u.sibling),(d=i(u,c)).return=l,l=d):(n(l,u),(d=Hr(c,l.mode,d)).return=l,l=d),s(l)):n(l,u)}return function(e,t,n,r){try{Qo=0;var i=y(e,t,n,r);return Yo=null,i}catch(ci){if(ci===Wi||ci===Ji)throw ci;var a=Dr(29,ci,null,e.mode);return a.lanes=r,a.return=e,a}}}var is=rs(!0),as=rs(!1),os=U(null),ss=null;function ls(e){var t=e.alternate;z(fs,1&fs.current),z(os,e),null===ss&&(null===t||null!==ha.current||null!==t.memoizedState)&&(ss=e)}function us(e){if(22===e.tag){if(z(fs,fs.current),z(os,e),null===ss){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ss=e)}}else cs()}function cs(){z(fs,fs.current),z(os,os.current)}function ds(e){j(os),ss===e&&(ss=null),j(fs)}var fs=U(0);function ps(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||yd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function hs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ms={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Du(),i=aa(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oa(e,i,r))&&(Fu(t,e,r),sa(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Du(),i=aa(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=oa(e,i,r))&&(Fu(t,e,r),sa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Du(),r=aa(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=oa(e,r,n))&&(Fu(t,e,n),sa(t,e,n))}};function vs(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(i,a))}function gs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ms.enqueueReplaceState(t,t.state,null)}function ys(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=f({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var bs="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function ks(e){bs(e)}function Ss(e){console.error(e)}function _s(e){bs(e)}function Es(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function ws(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function xs(e,t,n){return(n=aa(n)).tag=3,n.payload={element:null},n.callback=function(){Es(e,t)},n}function Cs(e){return(e=aa(e)).tag=3,e}function Ts(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var a=r.value;e.payload=function(){return i(a)},e.callback=function(){ws(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){ws(t,n,r),"function"!==typeof i&&(null===Cu?Cu=new Set([this]):Cu.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var As=Error(o(461)),Ms=!1;function Ls(e,t,n,r){t.child=null===e?as(t,null,n,r):is(t,e.child,n,r)}function Rs(e,t,n,r,i){n=n.render;var a=t.ref;if("ref"in r){var o={};for(var s in r)"ref"!==s&&(o[s]=r[s])}else o=r;return Ci(t),r=Ia(e,t,n,o,a,i),s=Da(),null===e||Ms?(ai&&s&&ti(t),t.flags|=1,Ls(e,t,r,i),t.child):(Ba(e,t,i),Ys(e,t,i))}function Is(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Br(a)||void 0!==a.defaultProps||null!==n.compare?((e=jr(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Os(e,t,a,r,i))}if(a=e.child,!Qs(e,i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(o,r)&&e.ref===t.ref)return Ys(e,t,i)}return t.flags|=1,(e=Fr(a,r)).ref=t.ref,e.return=t,t.child=e}function Os(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(Xn(a,r)&&e.ref===t.ref){if(Ms=!1,t.pendingProps=r=a,!Qs(e,i))return t.lanes=e.lanes,Ys(e,t,i);0!==(131072&e.flags)&&(Ms=!0)}}return Bs(e,t,n,r,i)}function Ps(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==a?a.baseLanes|n:n,null!==e){for(i=t.child=e.child,a=0;null!==i;)a=a|i.lanes|i.childLanes,i=i.sibling;t.childLanes=a&~r}else t.childLanes=0,t.child=null;return Ns(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ns(e,t,null!==a?a.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Vi(0,null!==a?a.cachePool:null),null!==a?va(t,a):ga(),us(t)}else null!==a?(Vi(0,a.cachePool),va(t,a),cs(),t.memoizedState=null):(null!==e&&Vi(0,null),ga(),cs());return Ls(e,t,i,n),t.child}function Ns(e,t,n,r){var i=qi();return i=null===i?null:{parent:Oi._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Vi(0,null),ga(),us(t),null!==e&&wi(e,t,r,!0),null}function Ds(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Bs(e,t,n,r,i){return Ci(t),n=Ia(e,t,n,r,void 0,i),r=Da(),null===e||Ms?(ai&&r&&ti(t),t.flags|=1,Ls(e,t,n,i),t.child):(Ba(e,t,i),Ys(e,t,i))}function Fs(e,t,n,r,i,a){return Ci(t),t.updateQueue=null,n=Pa(t,r,n,i),Oa(e),r=Da(),null===e||Ms?(ai&&r&&ti(t),t.flags|=1,Ls(e,t,n,a),t.child):(Ba(e,t,a),Ys(e,t,a))}function Us(e,t,n,r,i){if(Ci(t),null===t.stateNode){var a=Pr,o=n.contextType;"object"===typeof o&&null!==o&&(a=Ti(o)),a=new n(r,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=ms,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=r,a.state=t.memoizedState,a.refs={},ra(t),o=n.contextType,a.context="object"===typeof o&&null!==o?Ti(o):Pr,a.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(hs(t,n,o,r),a.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(o=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),o!==a.state&&ms.enqueueReplaceState(a,a.state,null),da(t,r,a,i),ca(),a.state=t.memoizedState),"function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){a=t.stateNode;var s=t.memoizedProps,l=ys(n,s);a.props=l;var u=a.context,c=n.contextType;o=Pr,"object"===typeof c&&null!==c&&(o=Ti(c));var d=n.getDerivedStateFromProps;c="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate,s=t.pendingProps!==s,c||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s||u!==o)&&gs(t,a,r,o),na=!1;var f=t.memoizedState;a.state=f,da(t,r,a,i),ca(),u=t.memoizedState,s||f!==u||na?("function"===typeof d&&(hs(t,n,d,r),u=t.memoizedState),(l=na||vs(t,n,l,r,f,u,o))?(c||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=o,r=l):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,ia(e,t),c=ys(n,o=t.memoizedProps),a.props=c,d=t.pendingProps,f=a.context,u=n.contextType,l=Pr,"object"===typeof u&&null!==u&&(l=Ti(u)),(u="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==d||f!==l)&&gs(t,a,r,l),na=!1,f=t.memoizedState,a.state=f,da(t,r,a,i),ca();var p=t.memoizedState;o!==d||f!==p||na||null!==e&&null!==e.dependencies&&xi(e.dependencies)?("function"===typeof s&&(hs(t,n,s,r),p=t.memoizedState),(c=na||vs(t,n,c,r,f,p,l)||null!==e&&null!==e.dependencies&&xi(e.dependencies))?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return a=r,Ds(e,t),r=0!==(128&t.flags),a||r?(a=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&r?(t.child=is(t,e.child,null,i),t.child=is(t,null,n,i)):Ls(e,t,n,i),t.memoizedState=a.state,e=t.child):e=Ys(e,t,i),e}function js(e,t,n,r){return hi(),t.flags|=256,Ls(e,t,n,r),t.child}var zs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hs(e){return{baseLanes:e,cachePool:Gi()}}function qs(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=yu),e}function Vs(e,t,n){var r,i=t.pendingProps,a=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&fs.current)),r&&(a=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(ai){if(a?ls(t):cs(),ai){var l,u=ii;if(l=u){e:{for(l=u,u=si;8!==l.nodeType;){if(!u){u=null;break e}if(null===(l=bd(l.nextSibling))){u=null;break e}}u=l}null!==u?(t.memoizedState={dehydrated:u,treeContext:null!==Xr?{id:Yr,overflow:Qr}:null,retryLane:536870912,hydrationErrors:null},(l=Dr(18,null,null,0)).stateNode=u,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ui(t)}if(null!==(u=t.memoizedState)&&null!==(u=u.dehydrated))return yd(u)?t.lanes=32:t.lanes=536870912,null;ds(t)}return u=i.children,i=i.fallback,a?(cs(),u=Ws({mode:"hidden",children:u},a=t.mode),i=zr(i,a,n,null),u.return=t,i.return=t,u.sibling=i,t.child=u,(a=t.child).memoizedState=Hs(n),a.childLanes=qs(e,r,n),t.memoizedState=zs,i):(ls(t),Gs(t,u))}if(null!==(l=e.memoizedState)&&null!==(u=l.dehydrated)){if(s)256&t.flags?(ls(t),t.flags&=-257,t=Ks(e,t,n)):null!==t.memoizedState?(cs(),t.child=e.child,t.flags|=128,t=null):(cs(),a=i.fallback,u=t.mode,i=Ws({mode:"visible",children:i.children},u),(a=zr(a,u,n,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,is(t,e.child,null,n),(i=t.child).memoizedState=Hs(n),i.childLanes=qs(e,r,n),t.memoizedState=zs,t=a);else if(ls(t),yd(u)){if(r=u.nextSibling&&u.nextSibling.dataset)var c=r.dgst;r=c,(i=Error(o(419))).stack="",i.digest=r,vi({value:i,source:null,stack:null}),t=Ks(e,t,n)}else if(Ms||wi(e,t,n,!1),r=0!==(n&e.childLanes),Ms||r){if(null!==(r=au)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Ae(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Rr(e,i),Fu(r,e,i),As;"$?"===u.data||$u(),t=Ks(e,t,n)}else"$?"===u.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=bd(u.nextSibling),ri=t,ai=!0,oi=null,si=!1,null!==e&&(Jr[$r++]=Yr,Jr[$r++]=Qr,Jr[$r++]=Xr,Yr=e.id,Qr=e.overflow,Xr=t),(t=Gs(t,i.children)).flags|=4096);return t}return a?(cs(),a=i.fallback,u=t.mode,c=(l=e.child).sibling,(i=Fr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==c?a=Fr(c,a):(a=zr(a,u,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,null===(u=e.child.memoizedState)?u=Hs(n):(null!==(l=u.cachePool)?(c=Oi._currentValue,l=l.parent!==c?{parent:c,pool:c}:l):l=Gi(),u={baseLanes:u.baseLanes|n,cachePool:l}),a.memoizedState=u,a.childLanes=qs(e,r,n),t.memoizedState=zs,i):(ls(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Gs(e,t){return(t=Ws({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ws(e,t){return(e=Dr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ks(e,t,n){return is(t,e.child,null,n),(e=Gs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Js(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_i(e.return,t,n)}function $s(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Xs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Ls(e,t,r.children,n),0!==(2&(r=fs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Js(e,n,t);else if(19===e.tag)Js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(fs,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ps(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),$s(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ps(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}$s(t,!0,n,null,a);break;case"together":$s(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ys(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),mu|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(wi(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Qs(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!xi(e))}function Zs(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ms=!0;else{if(!Qs(e,n)&&0===(128&t.flags))return Ms=!1,function(e,t,n){switch(t.tag){case 3:W(t,t.stateNode.containerInfo),ki(0,Oi,e.memoizedState.cache),hi();break;case 27:case 5:J(t);break;case 4:W(t,t.stateNode.containerInfo);break;case 10:ki(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(ls(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Vs(e,t,n):(ls(t),null!==(e=Ys(e,t,n))?e.sibling:null);ls(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(wi(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Xs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(fs,fs.current),r)break;return null;case 22:case 23:return t.lanes=0,Ps(e,t,n);case 24:ki(0,Oi,e.memoizedState.cache)}return Ys(e,t,n)}(e,t,n);Ms=0!==(131072&e.flags)}else Ms=!1,ai&&0!==(1048576&t.flags)&&ei(t,Kr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===_){t.tag=11,t=Rs(null,t,r,e,n);break e}if(i===x){t.tag=14,t=Is(null,t,r,e,n);break e}}throw t=I(r)||r,Error(o(306,t,""))}Br(r)?(e=ys(r,e),t.tag=1,t=Us(null,t,r,e,n)):(t.tag=0,t=Bs(null,t,r,e,n))}return t;case 0:return Bs(e,t,t.type,t.pendingProps,n);case 1:return Us(e,t,r=t.type,i=ys(r,t.pendingProps),n);case 3:e:{if(W(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var a=t.memoizedState;i=a.element,ia(e,t),da(t,r,null,n);var s=t.memoizedState;if(r=s.cache,ki(0,Oi,r),r!==a.cache&&Ei(t,[Oi],n,!0),ca(),r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=js(e,t,r,n);break e}if(r!==i){vi(i=wr(Error(o(424)),t)),t=js(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=bd(e.firstChild),ri=t,ai=!0,oi=null,si=!0,n=as(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(hi(),r===i){t=Ys(e,t,n);break e}Ls(e,t,r,n)}t=t.child}return t;case 26:return Ds(e,t),null===e?(n=Ld(t.type,null,t.pendingProps,null))?t.memoizedState=n:ai||(n=t.type,e=t.pendingProps,(r=ad(V.current).createElement(n))[Ie]=t,r[Oe]=e,nd(r,n,e),Ge(r),t.stateNode=r):t.memoizedState=Ld(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return J(t),null===e&&ai&&(r=t.stateNode=_d(t.type,t.pendingProps,V.current),ri=t,si=!0,i=ii,md(t.type)?(kd=i,ii=bd(r.firstChild)):ii=i),Ls(e,t,t.pendingProps.children,n),Ds(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ai&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ue])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===a)return e}if(null===(e=bd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,si))?(t.stateNode=r,ri=t,ii=bd(r.firstChild),si=!1,i=!0):i=!1),i||ui(t)),J(t),i=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,r=a.children,ld(i,a)?r=null:null!==s&&ld(i,s)&&(t.flags|=32),null!==t.memoizedState&&(i=Ia(e,t,Na,null,null,n),Xd._currentValue=i),Ds(e,t),Ls(e,t,r,n),t.child;case 6:return null===e&&ai&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=bd(e.nextSibling)))return null}return e}(n,t.pendingProps,si))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ui(t)),null;case 13:return Vs(e,t,n);case 4:return W(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=is(t,null,r,n):Ls(e,t,r,n),t.child;case 11:return Rs(e,t,t.type,t.pendingProps,n);case 7:return Ls(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ls(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,ki(0,t.type,r.value),Ls(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ci(t),r=r(i=Ti(i)),t.flags|=1,Ls(e,t,r,n),t.child;case 14:return Is(e,t,t.type,t.pendingProps,n);case 15:return Os(e,t,t.type,t.pendingProps,n);case 19:return Xs(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Ws(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ps(e,t,n);case 24:return Ci(t),r=Ti(Oi),null===e?(null===(i=qi())&&(i=au,a=Pi(),i.pooledCache=a,a.refCount++,null!==a&&(i.pooledCacheLanes|=n),i=a),t.memoizedState={parent:r,cache:i},ra(t),ki(0,Oi,i)):(0!==(e.lanes&n)&&(ia(e,t),da(t,null,null,n),ca()),i=e.memoizedState,a=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),ki(0,Oi,r)):(r=a.cache,ki(0,Oi,r),r!==i.cache&&Ei(t,[Oi],n,!0))),Ls(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function el(e){e.flags|=4}function tl(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!qd(t)){if(null!==(t=os.current)&&((4194048&su)===su?null!==ss:(62914560&su)!==su&&0===(536870912&su)||t!==ss))throw Zi=$i,Ki;e.flags|=8192}}function nl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Ee():536870912,e.lanes|=t,bu|=t)}function rl(e,t){if(!ai)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function il(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function al(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return il(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Si(Oi),K(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(pi(t)?el(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,mi())),il(t),null;case 26:return n=t.memoizedState,null===e?(el(t),null!==n?(il(t),tl(t,n)):(il(t),t.flags&=-16777217)):n?n!==e.memoizedState?(el(t),il(t),tl(t,n)):(il(t),t.flags&=-16777217):(e.memoizedProps!==r&&el(t),il(t),t.flags&=-16777217),null;case 27:$(t),n=V.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&el(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return il(t),null}e=H.current,pi(t)?di(t):(e=_d(i,r,n),t.stateNode=e,el(t))}return il(t),null;case 5:if($(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&el(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return il(t),null}if(e=H.current,pi(t))di(t);else{switch(i=ad(V.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Ie]=t,e[Oe]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(nd(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&el(t)}}return il(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&el(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=V.current,pi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Ie]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Qc(e.nodeValue,n)))||ui(t)}else(e=ad(e).createTextNode(r))[Ie]=t,t.stateNode=e}return il(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=pi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[Ie]=t}else hi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;il(t),i=!1}else i=mi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ds(t),t):(ds(t),null)}if(ds(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var a=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(a=r.memoizedState.cachePool.pool),a!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),nl(t,t.updateQueue),il(t),null;case 4:return K(),null===e&&Hc(t.stateNode.containerInfo),il(t),null;case 10:return Si(t.type),il(t),null;case 19:if(j(fs),null===(i=t.memoizedState))return il(t),null;if(r=0!==(128&t.flags),null===(a=i.rendering))if(r)rl(i,!1);else{if(0!==hu||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(a=ps(e))){for(t.flags|=128,rl(i,!1),e=a.updateQueue,t.updateQueue=e,nl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return z(fs,1&fs.current|2),t.child}e=e.sibling}null!==i.tail&&te()>wu&&(t.flags|=128,r=!0,rl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ps(a))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,nl(t,e),rl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!ai)return il(t),null}else 2*te()-i.renderingStartTime>wu&&536870912!==n&&(t.flags|=128,r=!0,rl(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=fs.current,z(fs,r?1&e|2:1&e),t):(il(t),null);case 22:case 23:return ds(t),ya(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(il(t),6&t.subtreeFlags&&(t.flags|=8192)):il(t),null!==(n=t.updateQueue)&&nl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&j(Hi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Si(Oi),il(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function ol(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Si(Oi),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 13:if(ds(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));hi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return j(fs),null;case 4:return K(),null;case 10:return Si(t.type),null;case 22:case 23:return ds(t),ya(),null!==e&&j(Hi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Si(Oi),null;default:return null}}function sl(e,t){switch(ni(t),t.tag){case 3:Si(Oi),K();break;case 26:case 27:case 5:$(t);break;case 4:K();break;case 13:ds(t);break;case 19:j(fs);break;case 10:Si(t.type);break;case 22:case 23:ds(t),ya(),null!==e&&j(Hi);break;case 24:Si(Oi)}}function ll(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var a=n.create,o=n.inst;r=a(),o.destroy=r}n=n.next}while(n!==i)}}catch(s){fc(t,t.return,s)}}function ul(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var a=i.next;r=a;do{if((r.tag&e)===e){var o=r.inst,s=o.destroy;if(void 0!==s){o.destroy=void 0,i=t;var l=n,u=s;try{u()}catch(c){fc(i,l,c)}}}r=r.next}while(r!==a)}}catch(c){fc(t,t.return,c)}}function cl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{pa(t,n)}catch(r){fc(e,e.return,r)}}}function dl(e,t,n){n.props=ys(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){fc(e,t,r)}}function fl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){fc(e,t,i)}}function pl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){fc(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(a){fc(e,t,a)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){fc(e,e.return,i)}}function ml(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,a=null,s=null,l=null,u=null,c=null,d=null;for(h in n){var f=n[h];if(n.hasOwnProperty(h)&&null!=f)switch(h){case"checked":case"value":break;case"defaultValue":u=f;default:r.hasOwnProperty(h)||ed(e,t,h,null,r,f)}}for(var p in r){var h=r[p];if(f=n[p],r.hasOwnProperty(p)&&(null!=h||null!=f))switch(p){case"type":a=h;break;case"name":i=h;break;case"checked":c=h;break;case"defaultChecked":d=h;break;case"value":s=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:h!==f&&ed(e,t,p,h,r,f)}}return void vt(e,s,l,u,c,d,a,i);case"select":for(a in h=s=l=p=null,n)if(u=n[a],n.hasOwnProperty(a)&&null!=u)switch(a){case"value":break;case"multiple":h=u;default:r.hasOwnProperty(a)||ed(e,t,a,null,r,u)}for(i in r)if(a=r[i],u=n[i],r.hasOwnProperty(i)&&(null!=a||null!=u))switch(i){case"value":p=a;break;case"defaultValue":l=a;break;case"multiple":s=a;default:a!==u&&ed(e,t,i,a,r,u)}return t=l,n=s,r=h,void(null!=p?bt(e,!!n,p,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in h=p=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:ed(e,t,l,null,r,i)}for(s in r)if(i=r[s],a=n[s],r.hasOwnProperty(s)&&(null!=i||null!=a))switch(s){case"value":p=i;break;case"defaultValue":h=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==a&&ed(e,t,s,i,r,a)}return void kt(e,p,h);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else ed(e,t,m,null,r,p);for(u in r)if(p=r[u],h=n[u],r.hasOwnProperty(u)&&p!==h&&(null!=p||null!=h))if("selected"===u)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else ed(e,t,u,p,r,h);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!r.hasOwnProperty(v)&&ed(e,t,v,null,r,p);for(c in r)if(p=r[c],h=n[c],r.hasOwnProperty(c)&&p!==h&&(null!=p||null!=h))switch(c){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:ed(e,t,c,p,r,h)}return;default:if(Ct(t)){for(var g in n)p=n[g],n.hasOwnProperty(g)&&void 0!==p&&!r.hasOwnProperty(g)&&td(e,t,g,void 0,r,p);for(d in r)p=r[d],h=n[d],!r.hasOwnProperty(d)||p===h||void 0===p&&void 0===h||td(e,t,d,p,r,h);return}}for(var y in n)p=n[y],n.hasOwnProperty(y)&&null!=p&&!r.hasOwnProperty(y)&&ed(e,t,y,null,r,p);for(f in r)p=r[f],h=n[f],!r.hasOwnProperty(f)||p===h||null==p&&null==h||ed(e,t,f,p,r,h)}(r,e.type,n,t),r[Oe]=t}catch(i){fc(e,e.return,i)}}function vl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&md(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||vl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&md(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zc));else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function bl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(bl(e,t,n),e=e.sibling;null!==e;)bl(e,t,n),e=e.sibling}function kl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);nd(t,r,n),t[Ie]=e,t[Oe]=n}catch(a){fc(e,e.return,a)}}var Sl=!1,_l=!1,El=!1,wl="function"===typeof WeakSet?WeakSet:Set,xl=null;function Cl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ul(e,n),4&r&&ll(5,n);break;case 1:if(Ul(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){fc(n,n.return,o)}else{var i=ys(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){fc(n,n.return,s)}}64&r&&cl(n),512&r&&fl(n,n.return);break;case 3:if(Ul(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{pa(e,t)}catch(o){fc(n,n.return,o)}}break;case 27:null===t&&4&r&&kl(n);case 26:case 5:Ul(e,n),null===t&&4&r&&hl(n),512&r&&fl(n,n.return);break;case 12:Ul(e,n);break;case 13:Ul(e,n),4&r&&Il(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=vc.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Sl)){t=null!==t&&null!==t.memoizedState||_l,i=Sl;var a=_l;Sl=r,(_l=t)&&!a?zl(e,n,0!==(8772&n.subtreeFlags)):Ul(e,n),Sl=i,_l=a}break;case 30:break;default:Ul(e,n)}}function Tl(e){var t=e.alternate;null!==t&&(e.alternate=null,Tl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&je(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Al=null,Ml=!1;function Ll(e,t,n){for(n=n.child;null!==n;)Rl(e,t,n),n=n.sibling}function Rl(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ce,n)}catch(a){}switch(n.tag){case 26:_l||pl(n,t),Ll(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:_l||pl(n,t);var r=Al,i=Ml;md(n.type)&&(Al=n.stateNode,Ml=!1),Ll(e,t,n),Ed(n.stateNode),Al=r,Ml=i;break;case 5:_l||pl(n,t);case 6:if(r=Al,i=Ml,Al=null,Ll(e,t,n),Ml=i,null!==(Al=r))if(Ml)try{(9===Al.nodeType?Al.body:"HTML"===Al.nodeName?Al.ownerDocument.body:Al).removeChild(n.stateNode)}catch(o){fc(n,t,o)}else try{Al.removeChild(n.stateNode)}catch(o){fc(n,t,o)}break;case 18:null!==Al&&(Ml?(vd(9===(e=Al).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Lf(e)):vd(Al,n.stateNode));break;case 4:r=Al,i=Ml,Al=n.stateNode.containerInfo,Ml=!0,Ll(e,t,n),Al=r,Ml=i;break;case 0:case 11:case 14:case 15:_l||ul(2,n,t),_l||ul(4,n,t),Ll(e,t,n);break;case 1:_l||(pl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&dl(n,t,r)),Ll(e,t,n);break;case 21:Ll(e,t,n);break;case 22:_l=(r=_l)||null!==n.memoizedState,Ll(e,t,n),_l=r;break;default:Ll(e,t,n)}}function Il(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Lf(e)}catch(n){fc(t,t.return,n)}}function Ol(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new wl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new wl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var r=gc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(md(l.type)){Al=l.stateNode,Ml=!1;break e}break;case 5:Al=l.stateNode,Ml=!1;break e;case 3:case 4:Al=l.stateNode.containerInfo,Ml=!0;break e}l=l.return}if(null===Al)throw Error(o(160));Rl(a,s,i),Al=null,Ml=!1,null!==(a=i.alternate)&&(a.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Dl(t,e),t=t.sibling}var Nl=null;function Dl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pl(t,e),Bl(e),4&r&&(ul(3,e,e.return),ll(3,e),ul(5,e,e.return));break;case 1:Pl(t,e),Bl(e),512&r&&(_l||null===n||pl(n,n.return)),64&r&&Sl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Nl;if(Pl(t,e),Bl(e),512&r&&(_l||null===n||pl(n,n.return)),4&r){var a=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(a=i.getElementsByTagName("title")[0])||a[Ue]||a[Ie]||"http://www.w3.org/2000/svg"===a.namespaceURI||a.hasAttribute("itemprop"))&&(a=i.createElement(r),i.head.insertBefore(a,i.querySelector("head > title"))),nd(a,r,n),a[Ie]=e,Ge(a),r=a;break e;case"link":var s=zd("link","href",i).get(r+(n.href||""));if(s)for(var l=0;l<s.length;l++)if((a=s[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&a.getAttribute("rel")===(null==n.rel?null:n.rel)&&a.getAttribute("title")===(null==n.title?null:n.title)&&a.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(l,1);break t}nd(a=i.createElement(r),r,n),i.head.appendChild(a);break;case"meta":if(s=zd("meta","content",i).get(r+(n.content||"")))for(l=0;l<s.length;l++)if((a=s[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&a.getAttribute("name")===(null==n.name?null:n.name)&&a.getAttribute("property")===(null==n.property?null:n.property)&&a.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&a.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(l,1);break t}nd(a=i.createElement(r),r,n),i.head.appendChild(a);break;default:throw Error(o(468,r))}a[Ie]=e,Ge(a),r=a}e.stateNode=r}else Hd(i,e.type,e.stateNode);else e.stateNode=Dd(i,r,e.memoizedProps);else a!==r?(null===a?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):a.count--,null===r?Hd(i,e.type,e.stateNode):Dd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&ml(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pl(t,e),Bl(e),512&r&&(_l||null===n||pl(n,n.return)),null!==n&&4&r&&ml(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pl(t,e),Bl(e),512&r&&(_l||null===n||pl(n,n.return)),32&e.flags){i=e.stateNode;try{_t(i,"")}catch(h){fc(e,e.return,h)}}4&r&&null!=e.stateNode&&ml(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(El=!0);break;case 6:if(Pl(t,e),Bl(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(h){fc(e,e.return,h)}}break;case 3:if(jd=null,i=Nl,Nl=Cd(t.containerInfo),Pl(t,e),Nl=i,Bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Lf(t.containerInfo)}catch(h){fc(e,e.return,h)}El&&(El=!1,Fl(e));break;case 4:r=Nl,Nl=Cd(e.stateNode.containerInfo),Pl(t,e),Bl(e),Nl=r;break;case 12:default:Pl(t,e),Bl(e);break;case 13:Pl(t,e),Bl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Eu=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Ol(e,r)));break;case 22:i=null!==e.memoizedState;var u=null!==n&&null!==n.memoizedState,c=Sl,d=_l;if(Sl=c||i,_l=d||u,Pl(t,e),_l=d,Sl=c,Bl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||u||Sl||_l||jl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){u=n=t;try{if(a=u.stateNode,i)"function"===typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=u.stateNode;var f=u.memoizedProps.style,p=void 0!==f&&null!==f&&f.hasOwnProperty("display")?f.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(h){fc(u,u.return,h)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=i?"":u.memoizedProps}catch(h){fc(u,u.return,h)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Ol(e,n))));break;case 19:Pl(t,e),Bl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Ol(e,r)));case 30:case 21:}}function Bl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(vl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;bl(e,gl(e),i);break;case 5:var a=n.stateNode;32&n.flags&&(_t(a,""),n.flags&=-33),bl(e,gl(e),a);break;case 3:case 4:var s=n.stateNode.containerInfo;yl(e,gl(e),s);break;default:throw Error(o(161))}}catch(l){fc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Fl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Fl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ul(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Cl(e,t.alternate,t),t=t.sibling}function jl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ul(4,t,t.return),jl(t);break;case 1:pl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&dl(t,t.return,n),jl(t);break;case 27:Ed(t.stateNode);case 26:case 5:pl(t,t.return),jl(t);break;case 22:null===t.memoizedState&&jl(t);break;default:jl(t)}e=e.sibling}}function zl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:zl(i,a,n),ll(4,a);break;case 1:if(zl(i,a,n),"function"===typeof(i=(r=a).stateNode).componentDidMount)try{i.componentDidMount()}catch(u){fc(r,r.return,u)}if(null!==(i=(r=a).updateQueue)){var s=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)fa(l[i],s)}catch(u){fc(r,r.return,u)}}n&&64&o&&cl(a),fl(a,a.return);break;case 27:kl(a);case 26:case 5:zl(i,a,n),n&&null===r&&4&o&&hl(a),fl(a,a.return);break;case 12:zl(i,a,n);break;case 13:zl(i,a,n),n&&4&o&&Il(i,a);break;case 22:null===a.memoizedState&&zl(i,a,n),fl(a,a.return);break;case 30:break;default:zl(i,a,n)}t=t.sibling}}function Hl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ni(n))}function ql(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ni(e))}function Vl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Gl(e,t,n,r),t=t.sibling}function Gl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Vl(e,t,n,r),2048&i&&ll(9,t);break;case 1:case 13:default:Vl(e,t,n,r);break;case 3:Vl(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ni(e)));break;case 12:if(2048&i){Vl(e,t,n,r),e=t.stateNode;try{var a=t.memoizedProps,o=a.id,s=a.onPostCommit;"function"===typeof s&&s(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){fc(t,t.return,l)}}else Vl(e,t,n,r);break;case 23:break;case 22:a=t.stateNode,o=t.alternate,null!==t.memoizedState?2&a._visibility?Vl(e,t,n,r):Kl(e,t):2&a._visibility?Vl(e,t,n,r):(a._visibility|=2,Wl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Hl(o,t);break;case 24:Vl(e,t,n,r),2048&i&&ql(t.alternate,t)}}function Wl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var a=e,o=t,s=n,l=r,u=o.flags;switch(o.tag){case 0:case 11:case 15:Wl(a,o,s,l,i),ll(8,o);break;case 23:break;case 22:var c=o.stateNode;null!==o.memoizedState?2&c._visibility?Wl(a,o,s,l,i):Kl(a,o):(c._visibility|=2,Wl(a,o,s,l,i)),i&&2048&u&&Hl(o.alternate,o);break;case 24:Wl(a,o,s,l,i),i&&2048&u&&ql(o.alternate,o);break;default:Wl(a,o,s,l,i)}t=t.sibling}}function Kl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Kl(n,r),2048&i&&Hl(r.alternate,r);break;case 24:Kl(n,r),2048&i&&ql(r.alternate,r);break;default:Kl(n,r)}t=t.sibling}}var Jl=8192;function $l(e){if(e.subtreeFlags&Jl)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 26:$l(e),e.flags&Jl&&null!==e.memoizedState&&function(e,t,n){if(null===Vd)throw Error(o(475));var r=Vd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Rd(n.href),a=e.querySelector(Id(i));if(a)return null!==(e=a._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Wd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=a,void Ge(a);a=e.ownerDocument||e,n=Od(n),(i=wd.get(i))&&Fd(n,i),Ge(a=a.createElement("link"));var s=a;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),nd(a,"link",n),t.instance=a}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Wd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Nl,e.memoizedState,e.memoizedProps);break;case 5:default:$l(e);break;case 3:case 4:var t=Nl;Nl=Cd(e.stateNode.containerInfo),$l(e),Nl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Jl,Jl=16777216,$l(e),Jl=t):$l(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Ql(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];xl=r,tu(r,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Zl(e),e=e.sibling}function Zl(e){switch(e.tag){case 0:case 11:case 15:Ql(e),2048&e.flags&&ul(9,e,e.return);break;case 3:case 12:default:Ql(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,eu(e)):Ql(e)}}function eu(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];xl=r,tu(r,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ul(8,t,t.return),eu(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,eu(t));break;default:eu(t)}e=e.sibling}}function tu(e,t){for(;null!==xl;){var n=xl;switch(n.tag){case 0:case 11:case 15:ul(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ni(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,xl=r;else e:for(n=e;null!==xl;){var i=(r=xl).sibling,a=r.return;if(Tl(r),r===n){xl=null;break e}if(null!==i){i.return=a,xl=i;break e}xl=a}}}var nu={getCacheForType:function(e){var t=Ti(Oi),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},ru="function"===typeof WeakMap?WeakMap:Map,iu=0,au=null,ou=null,su=0,lu=0,uu=null,cu=!1,du=!1,fu=!1,pu=0,hu=0,mu=0,vu=0,gu=0,yu=0,bu=0,ku=null,Su=null,_u=!1,Eu=0,wu=1/0,xu=null,Cu=null,Tu=0,Au=null,Mu=null,Lu=0,Ru=0,Iu=null,Ou=null,Pu=0,Nu=null;function Du(){if(0!==(2&iu)&&0!==su)return su&-su;if(null!==P.T){return 0!==Fi?Fi:Rc()}return Le()}function Bu(){0===yu&&(yu=0===(536870912&su)||ai?_e():536870912);var e=os.current;return null!==e&&(e.flags|=32),yu}function Fu(e,t,n){(e!==au||2!==lu&&9!==lu)&&null===e.cancelPendingCommit||(Gu(e,0),Hu(e,su,yu,!1)),xe(e,n),0!==(2&iu)&&e===au||(e===au&&(0===(2&iu)&&(vu|=n),4===hu&&Hu(e,su,yu,!1)),wc(e))}function Uu(e,t,n){if(0!==(6&iu))throw Error(o(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||ke(e,t),i=r?function(e,t){var n=iu;iu|=2;var r=Ku(),i=Ju();au!==e||su!==t?(xu=null,wu=te()+500,Gu(e,t)):du=ke(e,t);e:for(;;)try{if(0!==lu&&null!==ou){t=ou;var a=uu;t:switch(lu){case 1:lu=0,uu=null,tc(e,t,a,1);break;case 2:case 9:if(Xi(a)){lu=0,uu=null,ec(t);break}t=function(){2!==lu&&9!==lu||au!==e||(lu=7),wc(e)},a.then(t,t);break e;case 3:lu=7;break e;case 4:lu=5;break e;case 7:Xi(a)?(lu=0,uu=null,ec(t)):(lu=0,uu=null,tc(e,t,a,7));break;case 5:var s=null;switch(ou.tag){case 26:s=ou.memoizedState;case 5:case 27:var l=ou;if(!s||qd(s)){lu=0,uu=null;var u=l.sibling;if(null!==u)ou=u;else{var c=l.return;null!==c?(ou=c,nc(c)):ou=null}break t}}lu=0,uu=null,tc(e,t,a,5);break;case 6:lu=0,uu=null,tc(e,t,a,6);break;case 8:Vu(),hu=6;break e;default:throw Error(o(462))}}Qu();break}catch(d){Wu(e,d)}return bi=yi=null,P.H=r,P.A=i,iu=n,null!==ou?0:(au=null,su=0,Ar(),hu)}(e,t):Xu(e,t,!0),a=r;;){if(0===i){du&&!r&&Hu(e,t,0,!1);break}if(n=e.current.alternate,!a||zu(n)){if(2===i){if(a=t,e.errorRecoveryDisabledLanes&a)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;i=ku;var u=l.current.memoizedState.isDehydrated;if(u&&(Gu(l,s).flags|=256),2!==(s=Xu(l,s,!1))){if(fu&&!u){l.errorRecoveryDisabledLanes|=a,vu|=a,i=4;break e}a=Su,Su=i,null!==a&&(null===Su?Su=a:Su.push.apply(Su,a))}i=s}if(a=!1,2!==i)continue}}if(1===i){Gu(e,0),Hu(e,t,0,!0);break}e:{switch(r=e,a=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Hu(r,t,yu,!cu);break e;case 2:Su=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=Eu+300-te())){if(Hu(r,t,yu,!cu),0!==be(r,0,!0))break e;r.timeoutHandle=cd(ju.bind(null,r,n,Su,xu,_u,t,yu,vu,bu,cu,a,2,-0,0),i)}else ju(r,n,Su,xu,_u,t,yu,vu,bu,cu,a,0,-0,0)}break}i=Xu(e,t,!1),a=!1}wc(e)}function ju(e,t,n,r,i,a,s,l,u,c,d,f,p,h){if(e.timeoutHandle=-1,(8192&(f=t.subtreeFlags)||16785408===(16785408&f))&&(Vd={stylesheets:null,count:0,unsuspend:Gd},Xl(t),null!==(f=function(){if(null===Vd)throw Error(o(475));var e=Vd;return e.stylesheets&&0===e.count&&Jd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Jd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=f(ic.bind(null,e,t,a,n,r,i,s,l,u,d,1,p,h)),void Hu(e,a,s,!c);ic(e,t,a,n,r,i,s,l,u)}function zu(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!$n(a(),i))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hu(e,t,n,r){t&=~gu,t&=~vu,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var a=31-pe(i),o=1<<a;r[a]=-1,i&=~o}0!==n&&Ce(e,n,t)}function qu(){return 0!==(6&iu)||(xc(0,!1),!1)}function Vu(){if(null!==ou){if(0===lu)var e=ou.return;else bi=yi=null,Fa(e=ou),Yo=null,Qo=0,e=ou;for(;null!==e;)sl(e.alternate,e),e=e.return;ou=null}}function Gu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,dd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vu(),au=e,ou=n=Fr(e.current,null),su=t,lu=0,uu=null,cu=!1,du=ke(e,t),fu=!1,bu=yu=gu=vu=mu=hu=0,Su=ku=null,_u=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-pe(r),a=1<<i;t|=e[i],r&=~a}return pu=t,Ar(),n}function Wu(e,t){ka=null,P.H=Ko,t===Wi||t===Ji?(t=ea(),lu=3):t===Ki?(t=ea(),lu=4):lu=t===As?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,uu=t,null===ou&&(hu=1,Es(e,wr(t,e.current)))}function Ku(){var e=P.H;return P.H=Ko,null===e?Ko:e}function Ju(){var e=P.A;return P.A=nu,e}function $u(){hu=4,cu||(4194048&su)!==su&&null!==os.current||(du=!0),0===(134217727&mu)&&0===(134217727&vu)||null===au||Hu(au,su,yu,!1)}function Xu(e,t,n){var r=iu;iu|=2;var i=Ku(),a=Ju();au===e&&su===t||(xu=null,Gu(e,t)),t=!1;var o=hu;e:for(;;)try{if(0!==lu&&null!==ou){var s=ou,l=uu;switch(lu){case 8:Vu(),o=6;break e;case 3:case 2:case 9:case 6:null===os.current&&(t=!0);var u=lu;if(lu=0,uu=null,tc(e,s,l,u),n&&du){o=0;break e}break;default:u=lu,lu=0,uu=null,tc(e,s,l,u)}}Yu(),o=hu;break}catch(c){Wu(e,c)}return t&&e.shellSuspendCounter++,bi=yi=null,iu=r,P.H=i,P.A=a,null===ou&&(au=null,su=0,Ar()),o}function Yu(){for(;null!==ou;)Zu(ou)}function Qu(){for(;null!==ou&&!Z();)Zu(ou)}function Zu(e){var t=Zs(e.alternate,e,pu);e.memoizedProps=e.pendingProps,null===t?nc(e):ou=t}function ec(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Fs(n,t,t.pendingProps,t.type,void 0,su);break;case 11:t=Fs(n,t,t.pendingProps,t.type.render,t.ref,su);break;case 5:Fa(t);default:sl(n,t),t=Zs(n,t=ou=Ur(t,pu),pu)}e.memoizedProps=e.pendingProps,null===t?nc(e):ou=t}function tc(e,t,n,r){bi=yi=null,Fa(t),Yo=null,Qo=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&wi(t,n,i,!0),null!==(n=os.current)){switch(n.tag){case 13:return null===ss?$u():null===n.alternate&&0===hu&&(hu=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===$i?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),pc(e,r,i)),!1;case 22:return n.flags|=65536,r===$i?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),pc(e,r,i)),!1}throw Error(o(435,n.tag))}return pc(e,r,i),$u(),!1}if(ai)return null!==(t=os.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&vi(wr(e=Error(o(422),{cause:r}),n))):(r!==li&&vi(wr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=wr(r,n),la(e,i=xs(e.stateNode,r,i)),4!==hu&&(hu=2)),!1;var a=Error(o(520),{cause:r});if(a=wr(a,n),null===ku?ku=[a]:ku.push(a),4!==hu&&(hu=2),null===t)return!0;r=wr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,la(n,e=xs(n.stateNode,r,e)),!1;case 1:if(t=n.type,a=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==a&&"function"===typeof a.componentDidCatch&&(null===Cu||!Cu.has(a))))return n.flags|=65536,i&=-i,n.lanes|=i,Ts(i=Cs(i),e,n,r),la(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,su))return hu=1,Es(e,wr(n,e.current)),void(ou=null)}catch(a){if(null!==i)throw ou=i,a;return hu=1,Es(e,wr(n,e.current)),void(ou=null)}32768&t.flags?(ai||1===r?e=!0:du||0!==(536870912&su)?e=!1:(cu=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=os.current)&&13===r.tag&&(r.flags|=16384))),rc(t,e)):nc(t)}function nc(e){var t=e;do{if(0!==(32768&t.flags))return void rc(t,cu);e=t.return;var n=al(t.alternate,t,pu);if(null!==n)return void(ou=n);if(null!==(t=t.sibling))return void(ou=t);ou=t=e}while(null!==t);0===hu&&(hu=5)}function rc(e,t){do{var n=ol(e.alternate,e);if(null!==n)return n.flags&=32767,void(ou=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ou=e);ou=e=n}while(null!==e);hu=6,ou=null}function ic(e,t,n,r,i,a,s,l,u){e.cancelPendingCommit=null;do{uc()}while(0!==Tu);if(0!==(6&iu))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(a=t.lanes|t.childLanes,function(e,t,n,r,i,a){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,u=e.hiddenUpdates;for(n=o&~n;0<n;){var c=31-pe(n),d=1<<c;s[c]=0,l[c]=-1;var f=u[c];if(null!==f)for(u[c]=null,c=0;c<f.length;c++){var p=f[c];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Ce(e,r,0),0!==a&&0===i&&0!==e.tag&&(e.suspendedLanes|=a&~(o&~t))}(e,n,a|=Tr,s,l,u),e===au&&(ou=au=null,su=0),Mu=t,Au=e,Lu=n,Ru=a,Iu=i,Ou=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Y(ae,function(){return cc(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=P.T,P.T=null,i=N.p,N.p=2,s=iu,iu|=4;try{!function(e,t){if(e=e.containerInfo,rd=af,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(v){n=null;break e}var s=0,l=-1,u=-1,c=0,d=0,f=e,p=null;t:for(;;){for(var h;f!==n||0!==i&&3!==f.nodeType||(l=s+i),f!==a||0!==r&&3!==f.nodeType||(u=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break t;if(p===n&&++c===i&&(l=s),p===a&&++d===r&&(u=s),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(id={focusedElem:e,selectionRange:n},af=!1,xl=t;null!==xl;)if(e=(t=xl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,xl=e;else for(;null!==xl;){switch(a=(t=xl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==a){e=void 0,n=t,i=a.memoizedProps,a=a.memoizedState,r=n.stateNode;try{var m=ys(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,a),r.__reactInternalSnapshotBeforeUpdate=e}catch(g){fc(n,n.return,g)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,xl=e;break}xl=t.return}}(e,t)}finally{iu=s,N.p=i,P.T=r}}Tu=1,ac(),oc(),sc()}}function ac(){if(1===Tu){Tu=0;var e=Au,t=Mu,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=P.T,P.T=null;var r=N.p;N.p=2;var i=iu;iu|=4;try{Dl(t,e);var a=id,o=er(e.containerInfo),s=a.focusedElem,l=a.selectionRange;if(o!==s&&s&&s.ownerDocument&&Zn(s.ownerDocument.documentElement,s)){if(null!==l&&tr(s)){var u=l.start,c=l.end;if(void 0===c&&(c=u),"selectionStart"in s)s.selectionStart=u,s.selectionEnd=Math.min(c,s.value.length);else{var d=s.ownerDocument||document,f=d&&d.defaultView||window;if(f.getSelection){var p=f.getSelection(),h=s.textContent.length,m=Math.min(l.start,h),v=void 0===l.end?m:Math.min(l.end,h);!p.extend&&m>v&&(o=v,v=m,m=o);var g=Qn(s,m),y=Qn(s,v);if(g&&y&&(1!==p.rangeCount||p.anchorNode!==g.node||p.anchorOffset!==g.offset||p.focusNode!==y.node||p.focusOffset!==y.offset)){var b=d.createRange();b.setStart(g.node,g.offset),p.removeAllRanges(),m>v?(p.addRange(b),p.extend(y.node,y.offset)):(b.setEnd(y.node,y.offset),p.addRange(b))}}}}for(d=[],p=s;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<d.length;s++){var k=d[s];k.element.scrollLeft=k.left,k.element.scrollTop=k.top}}af=!!rd,id=rd=null}finally{iu=i,N.p=r,P.T=n}}e.current=t,Tu=2}}function oc(){if(2===Tu){Tu=0;var e=Au,t=Mu,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=P.T,P.T=null;var r=N.p;N.p=2;var i=iu;iu|=4;try{Cl(e,t.alternate,t)}finally{iu=i,N.p=r,P.T=n}}Tu=3}}function sc(){if(4===Tu||3===Tu){Tu=0,ee();var e=Au,t=Mu,n=Lu,r=Ou;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Tu=5:(Tu=0,Mu=Au=null,lc(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(Cu=null),Me(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ce,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=P.T,i=N.p,N.p=2,P.T=null;try{for(var a=e.onRecoverableError,o=0;o<r.length;o++){var s=r[o];a(s.value,{componentStack:s.stack})}}finally{P.T=t,N.p=i}}0!==(3&Lu)&&uc(),wc(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Nu?Pu++:(Pu=0,Nu=e):Pu=0,xc(0,!1)}}function lc(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ni(t)))}function uc(e){return ac(),oc(),sc(),cc()}function cc(){if(5!==Tu)return!1;var e=Au,t=Ru;Ru=0;var n=Me(Lu),r=P.T,i=N.p;try{N.p=32>n?32:n,P.T=null,n=Iu,Iu=null;var a=Au,s=Lu;if(Tu=0,Mu=Au=null,Lu=0,0!==(6&iu))throw Error(o(331));var l=iu;if(iu|=4,Zl(a.current),Gl(a,a.current,s,n),iu=l,xc(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ce,a)}catch(u){}return!0}finally{N.p=i,P.T=r,lc(e,t)}}function dc(e,t,n){t=wr(n,t),null!==(e=oa(e,t=xs(e.stateNode,t,2),2))&&(xe(e,2),wc(e))}function fc(e,t,n){if(3===e.tag)dc(e,e,n);else for(;null!==t;){if(3===t.tag){dc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Cu||!Cu.has(r))){e=wr(n,e),null!==(r=oa(t,n=Cs(2),2))&&(Ts(n,r,t,e),xe(r,2),wc(r));break}}t=t.return}}function pc(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ru;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(fu=!0,i.add(n),e=hc.bind(null,e,t,n),t.then(e,e))}function hc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,au===e&&(su&n)===n&&(4===hu||3===hu&&(62914560&su)===su&&300>te()-Eu?0===(2&iu)&&Gu(e,0):gu|=n,bu===su&&(bu=0)),wc(e)}function mc(e,t){0===t&&(t=Ee()),null!==(e=Rr(e,t))&&(xe(e,t),wc(e))}function vc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),mc(e,n)}function gc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),mc(e,n)}var yc=null,bc=null,kc=!1,Sc=!1,_c=!1,Ec=0;function wc(e){e!==bc&&null===e.next&&(null===bc?yc=bc=e:bc=bc.next=e),Sc=!0,kc||(kc=!0,pd(function(){0!==(6&iu)?Y(re,Cc):Tc()}))}function xc(e,t){if(!_c&&Sc){_c=!0;do{for(var n=!1,r=yc;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var a=0;else{var o=r.suspendedLanes,s=r.pingedLanes;a=(1<<31-pe(42|e)+1)-1,a=201326741&(a&=i&~(o&~s))?201326741&a|1:a?2|a:0}0!==a&&(n=!0,Lc(r,a))}else a=su,0===(3&(a=be(r,r===au?a:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||ke(r,a)||(n=!0,Lc(r,a));r=r.next}}while(n);_c=!1}}function Cc(){Tc()}function Tc(){Sc=kc=!1;var e=0;0!==Ec&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ud&&(ud=e,!0);return ud=null,!1}()&&(e=Ec),Ec=0);for(var t=te(),n=null,r=yc;null!==r;){var i=r.next,a=Ac(r,t);0===a?(r.next=null,null===n?yc=i:n.next=i,null===i&&(bc=n)):(n=r,(0!==e||0!==(3&a))&&(Sc=!0)),r=i}xc(e,!1)}function Ac(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var o=31-pe(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=Se(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}if(n=su,n=be(e,e===(t=au)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===lu||9===lu)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Q(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||ke(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&Q(r),Me(n)){case 2:case 8:n=ie;break;case 32:default:n=ae;break;case 268435456:n=se}return r=Mc.bind(null,e),n=Y(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&Q(r),e.callbackPriority=2,e.callbackNode=null,2}function Mc(e,t){if(0!==Tu&&5!==Tu)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(uc()&&e.callbackNode!==n)return null;var r=su;return 0===(r=be(e,e===au?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Uu(e,r,t),Ac(e,te()),null!=e.callbackNode&&e.callbackNode===n?Mc.bind(null,e):null)}function Lc(e,t){if(uc())return null;Uu(e,t,!0)}function Rc(){return 0===Ec&&(Ec=_e()),Ec}function Ic(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Mt(""+e)}function Oc(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Pc=0;Pc<Sr.length;Pc++){var Nc=Sr[Pc];_r(Nc.toLowerCase(),"on"+(Nc[0].toUpperCase()+Nc.slice(1)))}_r(pr,"onAnimationEnd"),_r(hr,"onAnimationIteration"),_r(mr,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(vr,"onTransitionRun"),_r(gr,"onTransitionStart"),_r(yr,"onTransitionCancel"),_r(br,"onTransitionEnd"),$e("onMouseEnter",["mouseout","mouseover"]),$e("onMouseLeave",["mouseout","mouseover"]),$e("onPointerEnter",["pointerout","pointerover"]),$e("onPointerLeave",["pointerout","pointerover"]),Je("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Je("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Je("onBeforeInput",["compositionend","keypress","textInput","paste"]),Je("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Je("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Je("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bc=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dc));function Fc(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;a=s,i.currentTarget=u;try{a(i)}catch(c){bs(c)}i.currentTarget=null,a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;a=s,i.currentTarget=u;try{a(i)}catch(c){bs(c)}i.currentTarget=null,a=l}}}}function Uc(e,t){var n=t[Ne];void 0===n&&(n=t[Ne]=new Set);var r=e+"__bubble";n.has(r)||(qc(t,e,2,!1),n.add(r))}function jc(e,t,n){var r=0;t&&(r|=4),qc(n,e,r,t)}var zc="_reactListening"+Math.random().toString(36).slice(2);function Hc(e){if(!e[zc]){e[zc]=!0,We.forEach(function(t){"selectionchange"!==t&&(Bc.has(t)||jc(t,!1,e),jc(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zc]||(t[zc]=!0,jc("selectionchange",!1,t))}}function qc(e,t,n,r){switch(ff(t)){case 2:var i=of;break;case 8:i=sf;break;default:i=lf}n=i.bind(null,t,n,e),i=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vc(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i)break;if(4===o)for(o=r.return;null!==o;){var u=o.tag;if((3===u||4===u)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==s;){if(null===(o=ze(s)))return;if(5===(u=o.tag)||6===u||26===u||27===u){r=a=o;continue e}s=s.parentNode}}r=r.return}Dt(function(){var r=a,i=Rt(n),o=[];e:{var s=kr.get(e);if(void 0!==s){var u=Zt,c=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":u=mn;break;case"focusin":c="focus",u=on;break;case"focusout":c="blur",u=on;break;case"beforeblur":case"afterblur":u=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=an;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=gn;break;case pr:case hr:case mr:u=sn;break;case br:u=yn;break;case"scroll":case"scrollend":u=tn;break;case"wheel":u=bn;break;case"copy":case"cut":case"paste":u=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=vn;break;case"toggle":case"beforetoggle":u=kn}var d=0!==(4&t),f=!d&&("scroll"===e||"scrollend"===e),p=d?null!==s?s+"Capture":null:s;d=[];for(var h,m=r;null!==m;){var v=m;if(h=v.stateNode,5!==(v=v.tag)&&26!==v&&27!==v||null===h||null===p||null!=(v=Bt(m,p))&&d.push(Gc(m,v,h)),f)break;m=m.return}0<d.length&&(s=new u(s,c,null,n,i),o.push({event:s,listeners:d}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Lt||!(c=n.relatedTarget||n.fromElement)||!ze(c)&&!c[Pe])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ze(c):null)&&(f=l(c),d=c.tag,c!==f||5!==d&&27!==d&&6!==d)&&(c=null)):(u=null,c=r),u!==c)){if(d=rn,v="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=vn,v="onPointerLeave",p="onPointerEnter",m="pointer"),f=null==u?s:qe(u),h=null==c?s:qe(c),(s=new d(v,m+"leave",u,n,i)).target=f,s.relatedTarget=h,v=null,ze(i)===r&&((d=new d(p,m+"enter",c,n,i)).target=h,d.relatedTarget=f,v=d),f=v,u&&c)e:{for(p=c,m=0,h=d=u;h;h=Kc(h))m++;for(h=0,v=p;v;v=Kc(v))h++;for(;0<m-h;)d=Kc(d),m--;for(;0<h-m;)p=Kc(p),h--;for(;m--;){if(d===p||null!==p&&d===p.alternate)break e;d=Kc(d),p=Kc(p)}d=null}else d=null;null!==u&&Jc(o,s,u,d,!1),null!==c&&null!==f&&Jc(o,f,c,d,!0)}if("select"===(u=(s=r?qe(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Fn;else if(In(s))if(Un)g=Jn;else{g=Wn;var y=Gn}else!(u=s.nodeName)||"input"!==u.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Ct(r.elementType)&&(g=Fn):g=Kn;switch(g&&(g=g(e,r))?On(o,g,n,i):(y&&y(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&yt(s,"number",s.value)),y=r?qe(r):window,e){case"focusin":(In(y)||"true"===y.contentEditable)&&(rr=y,ir=r,ar=null);break;case"focusout":ar=ir=rr=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,sr(o,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":sr(o,n,i)}var b;if(_n)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Ln?An(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(xn&&"ko"!==n.locale&&(Ln||"onCompositionStart"!==k?"onCompositionEnd"===k&&Ln&&(b=Vt()):(Ht="value"in(zt=i)?zt.value:zt.textContent,Ln=!0)),0<(y=Wc(r,k)).length&&(k=new un(k,e,null,n,i),o.push({event:k,listeners:y}),b?k.data=b:null!==(b=Mn(n))&&(k.data=b))),(b=wn?function(e,t){switch(e){case"compositionend":return Mn(t);case"keypress":return 32!==t.which?null:(Tn=!0,Cn);case"textInput":return(e=t.data)===Cn&&Tn?null:e;default:return null}}(e,n):function(e,t){if(Ln)return"compositionend"===e||!_n&&An(e,t)?(e=Vt(),qt=Ht=zt=null,Ln=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return xn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(k=Wc(r,"onBeforeInput")).length&&(y=new un("onBeforeInput","beforeinput",null,n,i),o.push({event:y,listeners:k}),y.data=b)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var a=Ic((i[Oe]||null).action),o=r.submitter;o&&null!==(t=(t=o[Oe]||null)?Ic(t.formAction):o.getAttribute("formAction"))&&(a=t,o=null);var s=new Zt("action","action",null,r,i);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Ec){var e=o?Oc(i,o):new FormData(i);Oo(n,{pending:!0,data:e,method:i.method,action:a},null,e)}}else"function"===typeof a&&(s.preventDefault(),e=o?Oc(i,o):new FormData(i),Oo(n,{pending:!0,data:e,method:i.method,action:a},a,e))},currentTarget:i}]})}}(o,e,r,n,i)}Fc(o,t)})}function Gc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wc(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===a||(null!=(i=Bt(e,n))&&r.unshift(Gc(e,i,a)),null!=(i=Bt(e,t))&&r.push(Gc(e,i,a))),3===e.tag)return r;e=e.return}return[]}function Kc(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Jc(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===u||(l=u,i?null!=(u=Bt(n,a))&&o.unshift(Gc(n,u,l)):i||null!=(u=Bt(n,a))&&o.push(Gc(n,u,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $c=/\r\n?/g,Xc=/\u0000|\uFFFD/g;function Yc(e){return("string"===typeof e?e:""+e).replace($c,"\n").replace(Xc,"")}function Qc(e,t){return t=Yc(t),Yc(e)===t}function Zc(){}function ed(e,t,n,r,i,a){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||_t(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&_t(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":xt(e,r,a);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Mt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof a&&("formAction"===n?("input"!==t&&ed(e,t,"name",i.name,i,null),ed(e,t,"formEncType",i.formEncType,i,null),ed(e,t,"formMethod",i.formMethod,i,null),ed(e,t,"formTarget",i.formTarget,i,null)):(ed(e,t,"encType",i.encType,i,null),ed(e,t,"method",i.method,i,null),ed(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Mt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Zc);break;case"onScroll":null!=r&&Uc("scroll",e);break;case"onScrollEnd":null!=r&&Uc("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Mt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Uc("beforetoggle",e),Uc("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Tt.get(n)||n,r)}}function td(e,t,n,r,i,a){switch(n){case"style":xt(e,r,a);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?_t(e,r):("number"===typeof r||"bigint"===typeof r)&&_t(e,""+r);break;case"onScroll":null!=r&&Uc("scroll",e);break;case"onScrollEnd":null!=r&&Uc("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Zc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ke.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(a=null!=(a=e[Oe]||null)?a[n]:null)&&e.removeEventListener(t,a,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof a&&null!==a&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function nd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Uc("error",e),Uc("load",e);var r,i=!1,a=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":i=!0;break;case"srcSet":a=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ed(e,t,r,s,n,null)}}return a&&ed(e,t,"srcSet",n.srcSet,n,null),void(i&&ed(e,t,"src",n.src,n,null));case"input":Uc("invalid",e);var l=r=s=a=null,u=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":a=d;break;case"type":s=d;break;case"checked":u=d;break;case"defaultChecked":c=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:ed(e,t,i,d,n,null)}}return gt(e,r,l,u,c,s,a,!1),void dt(e);case"select":for(a in Uc("invalid",e),i=s=r=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":i=l;default:ed(e,t,a,l,n,null)}return t=r,n=s,e.multiple=!!i,void(null!=t?bt(e,!!i,t,!1):null!=n&&bt(e,!!i,n,!0));case"textarea":for(s in Uc("invalid",e),r=a=i=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":i=l;break;case"defaultValue":a=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:ed(e,t,s,l,n,null)}return St(e,i,a,r),void dt(e);case"option":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))if("selected"===u)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else ed(e,t,u,i,n,null);return;case"dialog":Uc("beforetoggle",e),Uc("toggle",e),Uc("cancel",e),Uc("close",e);break;case"iframe":case"object":Uc("load",e);break;case"video":case"audio":for(i=0;i<Dc.length;i++)Uc(Dc[i],e);break;case"image":Uc("error",e),Uc("load",e);break;case"details":Uc("toggle",e);break;case"embed":case"source":case"link":Uc("error",e),Uc("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ed(e,t,c,i,n,null)}return;default:if(Ct(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&td(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&ed(e,t,l,i,n,null))}var rd=null,id=null;function ad(e){return 9===e.nodeType?e:e.ownerDocument}function od(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ld(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ud=null;var cd="function"===typeof setTimeout?setTimeout:void 0,dd="function"===typeof clearTimeout?clearTimeout:void 0,fd="function"===typeof Promise?Promise:void 0,pd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof fd?function(e){return fd.resolve(null).then(e).catch(hd)}:cd;function hd(e){setTimeout(function(){throw e})}function md(e){return"head"===e}function vd(e,t){var n=t,r=0,i=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(1&n&&Ed(o.documentElement),2&n&&Ed(o.body),4&n)for(Ed(n=o.head),o=n.firstChild;o;){var s=o.nextSibling,l=o.nodeName;o[Ue]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=s}}if(0===i)return e.removeChild(a),void Lf(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=a}while(n);Lf(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),je(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function yd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function bd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var kd=null;function Sd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function _d(e,t,n){switch(t=ad(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function Ed(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);je(e)}var wd=new Map,xd=new Set;function Cd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Td=N.d;N.d={f:function(){var e=Td.f(),t=qu();return e||t},r:function(e){var t=He(e);null!==t&&5===t.tag&&"form"===t.type?No(t):Td.r(e)},D:function(e){Td.D(e),Md("dns-prefetch",e,null)},C:function(e,t){Td.C(e,t),Md("preconnect",e,t)},L:function(e,t,n){Td.L(e,t,n);var r=Ad;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var a=i;switch(t){case"style":a=Rd(e);break;case"script":a=Pd(e)}wd.has(a)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),wd.set(a,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Id(a))||"script"===t&&r.querySelector(Nd(a))||(nd(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}},m:function(e,t){Td.m(e,t);var n=Ad;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',a=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Pd(e)}if(!wd.has(a)&&(e=f({rel:"modulepreload",href:e},t),wd.set(a,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Nd(a)))return}nd(r=n.createElement("link"),"link",e),Ge(r),n.head.appendChild(r)}}},X:function(e,t){Td.X(e,t);var n=Ad;if(n&&e){var r=Ve(n).hoistableScripts,i=Pd(e),a=r.get(i);a||((a=n.querySelector(Nd(i)))||(e=f({src:e,async:!0},t),(t=wd.get(i))&&Ud(e,t),Ge(a=n.createElement("script")),nd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}},S:function(e,t,n){Td.S(e,t,n);var r=Ad;if(r&&e){var i=Ve(r).hoistableStyles,a=Rd(e);t=t||"default";var o=i.get(a);if(!o){var s={loading:0,preload:null};if(o=r.querySelector(Id(a)))s.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=wd.get(a))&&Fd(e,n);var l=o=r.createElement("link");Ge(l),nd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Bd(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:s},i.set(a,o)}}},M:function(e,t){Td.M(e,t);var n=Ad;if(n&&e){var r=Ve(n).hoistableScripts,i=Pd(e),a=r.get(i);a||((a=n.querySelector(Nd(i)))||(e=f({src:e,async:!0,type:"module"},t),(t=wd.get(i))&&Ud(e,t),Ge(a=n.createElement("script")),nd(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},r.set(i,a))}}};var Ad="undefined"===typeof document?null:document;function Md(e,t,n){var r=Ad;if(r&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),xd.has(i)||(xd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(nd(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}}function Ld(e,t,n,r){var i,a,s,l,u=(u=V.current)?Cd(u):null;if(!u)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Rd(n.href),(r=(n=Ve(u).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Rd(n.href);var c=Ve(u).hoistableStyles,d=c.get(e);if(d||(u=u.ownerDocument||u,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},c.set(e,d),(c=u.querySelector(Id(e)))&&!c._p&&(d.instance=c,d.state.loading=5),wd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},wd.set(e,n),c||(i=u,a=e,s=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+a+"]")?l.loading=1:(a=i.createElement("link"),l.preload=a,a.addEventListener("load",function(){return l.loading|=1}),a.addEventListener("error",function(){return l.loading|=2}),nd(a,"link",s),Ge(a),i.head.appendChild(a))))),t&&null===r)throw Error(o(528,""));return d}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Pd(n),(r=(n=Ve(u).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Rd(e){return'href="'+mt(e)+'"'}function Id(e){return'link[rel="stylesheet"]['+e+"]"}function Od(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Pd(e){return'[src="'+mt(e)+'"]'}function Nd(e){return"script[async]"+e}function Dd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,Ge(r),r;var i=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ge(r=(e.ownerDocument||e).createElement("style")),nd(r,"style",i),Bd(r,n.precedence,e),t.instance=r;case"stylesheet":i=Rd(n.href);var a=e.querySelector(Id(i));if(a)return t.state.loading|=4,t.instance=a,Ge(a),a;r=Od(n),(i=wd.get(i))&&Fd(r,i),Ge(a=(e.ownerDocument||e).createElement("link"));var s=a;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),nd(a,"link",r),t.state.loading|=4,Bd(a,n.precedence,e),t.instance=a;case"script":return a=Pd(n.src),(i=e.querySelector(Nd(a)))?(t.instance=i,Ge(i),i):(r=n,(i=wd.get(a))&&Ud(r=f({},n),i),Ge(i=(e=e.ownerDocument||e).createElement("script")),nd(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Bd(r,n.precedence,e));return t.instance}function Bd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,a=i,o=0;o<r.length;o++){var s=r[o];if(s.dataset.precedence===t)a=s;else if(a!==i)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Ud(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var jd=null;function zd(e,t,n){if(null===jd){var r=new Map,i=jd=new Map;i.set(n,r)}else(r=(i=jd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var a=n[i];if(!(a[Ue]||a[Ie]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var o=a.getAttribute(t)||"";o=e+o;var s=r.get(o);s?s.push(a):r.set(o,[a])}}return r}function Hd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function qd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Vd=null;function Gd(){}function Wd(){if(this.count--,0===this.count)if(this.stylesheets)Jd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Kd=null;function Jd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Kd=new Map,t.forEach($d,e),Kd=null,Wd.call(e))}function $d(e,t){if(!(4&t.state.loading)){var n=Kd.get(e);if(n)var r=n.get(null);else{n=new Map,Kd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<i.length;a++){var o=i[a];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(a=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=Wd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),a?a.parentNode.insertBefore(i,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Xd={$$typeof:S,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function Yd(e,t,n,r,i,a,o,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=we(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=we(0),this.hiddenUpdates=we(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=a,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Qd(e,t,n,r,i,a,o,s,l,u,c,d){return e=new Yd(e,t,n,o,s,l,u,d),t=1,!0===a&&(t|=24),a=Dr(3,null,null,t),e.current=a,a.stateNode=e,(t=Pi()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},ra(a),e}function Zd(e){return e?e=Pr:Pr}function ef(e,t,n,r,i,a){i=Zd(i),null===r.context?r.context=i:r.pendingContext=i,(r=aa(t)).payload={element:n},null!==(a=void 0===a?null:a)&&(r.callback=a),null!==(n=oa(e,r,t))&&(Fu(n,0,t),sa(n,e,t))}function tf(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function nf(e,t){tf(e,t),(e=e.alternate)&&tf(e,t)}function rf(e){if(13===e.tag){var t=Rr(e,67108864);null!==t&&Fu(t,0,67108864),nf(e,67108864)}}var af=!0;function of(e,t,n,r){var i=P.T;P.T=null;var a=N.p;try{N.p=2,lf(e,t,n,r)}finally{N.p=a,P.T=i}}function sf(e,t,n,r){var i=P.T;P.T=null;var a=N.p;try{N.p=8,lf(e,t,n,r)}finally{N.p=a,P.T=i}}function lf(e,t,n,r){if(af){var i=uf(r);if(null===i)Vc(e,t,r,cf,n),Sf(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return hf=_f(hf,e,t,n,r,i),!0;case"dragenter":return mf=_f(mf,e,t,n,r,i),!0;case"mouseover":return vf=_f(vf,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return gf.set(a,_f(gf.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,yf.set(a,_f(yf.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Sf(e,r),4&t&&-1<kf.indexOf(e)){for(;null!==i;){var a=He(i);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var o=ye(a.pendingLanes);if(0!==o){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;o;){var l=1<<31-pe(o);s.entanglements[1]|=l,o&=~l}wc(a),0===(6&iu)&&(wu=te()+500,xc(0,!1))}}break;case 13:null!==(s=Rr(a,2))&&Fu(s,0,2),qu(),nf(a,2)}if(null===(a=uf(r))&&Vc(e,t,r,cf,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Vc(e,t,r,null,n)}}function uf(e){return df(e=Rt(e))}var cf=null;function df(e){if(cf=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return cf=e,null}function ff(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case ae:case oe:return 32;case se:return 268435456;default:return 32}default:return 32}}var pf=!1,hf=null,mf=null,vf=null,gf=new Map,yf=new Map,bf=[],kf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Sf(e,t){switch(e){case"focusin":case"focusout":hf=null;break;case"dragenter":case"dragleave":mf=null;break;case"mouseover":case"mouseout":vf=null;break;case"pointerover":case"pointerout":gf.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yf.delete(t.pointerId)}}function _f(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=He(t))&&rf(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ef(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=u(n)))return e.blockedOn=t,void function(e,t){var n=N.p;try{return N.p=e,t()}finally{N.p=n}}(e.priority,function(){if(13===n.tag){var e=Du();e=Ae(e);var t=Rr(n,e);null!==t&&Fu(t,0,e),nf(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wf(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=uf(e.nativeEvent);if(null!==n)return null!==(t=He(n))&&rf(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Lt=r,n.target.dispatchEvent(r),Lt=null,t.shift()}return!0}function xf(e,t,n){wf(e)&&n.delete(t)}function Cf(){pf=!1,null!==hf&&wf(hf)&&(hf=null),null!==mf&&wf(mf)&&(mf=null),null!==vf&&wf(vf)&&(vf=null),gf.forEach(xf),yf.forEach(xf)}function Tf(e,t){e.blockedOn===t&&(e.blockedOn=null,pf||(pf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Cf)))}var Af=null;function Mf(e){Af!==e&&(Af=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Af===e&&(Af=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===df(r||n))continue;break}var a=He(n);null!==a&&(e.splice(t,3),t-=3,Oo(a,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Lf(e){function t(t){return Tf(t,e)}null!==hf&&Tf(hf,e),null!==mf&&Tf(mf,e),null!==vf&&Tf(vf,e),gf.forEach(t),yf.forEach(t);for(var n=0;n<bf.length;n++){var r=bf[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<bf.length&&null===(n=bf[0]).blockedOn;)Ef(n),null===n.blockedOn&&bf.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],a=n[r+1],o=i[Oe]||null;if("function"===typeof a)o||Mf(n);else if(o){var s=null;if(a&&a.hasAttribute("formAction")){if(i=a,o=a[Oe]||null)s=o.formAction;else if(null!==df(i))continue}else s=o.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),Mf(n)}}}function Rf(e){this._internalRoot=e}function If(e){this._internalRoot=e}If.prototype.render=Rf.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));ef(t.current,Du(),e,t,null,null)},If.prototype.unmount=Rf.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ef(e.current,2,null,e,null,null),qu(),t[Pe]=null}},If.prototype.unstable_scheduleHydration=function(e){if(e){var t=Le();e={blockedOn:null,target:e,priority:t};for(var n=0;n<bf.length&&0!==t&&t<bf[n].priority;n++);bf.splice(n,0,e),0===n&&Ef(e)}};var Of=i.version;if("19.1.1"!==Of)throw Error(o(527,Of,"19.1.1"));N.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return c(i),e;if(a===r)return c(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Pf={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Nf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nf.isDisabled&&Nf.supportsFiber)try{ce=Nf.inject(Pf),de=Nf}catch(Df){}}t.createRoot=function(e,t){if(!s(e))throw Error(o(299));var n=!1,r="",i=ks,a=Ss,l=_s;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(a=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Qd(e,1,!1,null,0,n,r,i,a,l,0,null),e[Pe]=t.current,Hc(e),new Rf(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(o(299));var r=!1,i="",a=ks,l=Ss,u=_s,c=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(a=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(u=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(c=n.formState)),(t=Qd(e,1,!0,t,0,r,i,a,l,u,0,c)).context=Zd(null),n=t.current,(i=aa(r=Ae(r=Du()))).callback=null,oa(n,i,r),n=r,t.current.lanes=n,xe(t,n),wc(t),e[Pe]=t.current,Hc(e),new If(t)},t.version="19.1.1"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var k=b.prototype=new y;k.constructor=b,m(k,g.prototype),k.isPureReactComponent=!0;var S=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},E=Object.prototype.hasOwnProperty;function w(e,t,r,i,a,o){return r=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:o}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(){}function M(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,u,c=!1;if(null===e)c=!0;else switch(s){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0;break;case f:return M((c=e._init)(e._payload),t,i,a,o)}}if(c)return o=o(e),c=""===a?"."+T(e,0):a,S(o)?(i="",null!=c&&(i=c.replace(C,"$&/")+"/"),M(o,t,i,"",function(e){return e})):null!=o&&(x(o)&&(l=o,u=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+c,o=w(l.type,u,void 0,0,0,l.props)),t.push(o)),1;c=0;var d,h=""===a?".":a+":";if(S(e))for(var m=0;m<e.length;m++)c+=M(a=e[m],t,i,s=h+T(a,m),o);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(a=e.next()).done;)c+=M(a=a.value,t,i,s=h+T(a,m++),o);else if("object"===s){if("function"===typeof e.then)return M(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(A,A):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,a,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function L(e,t,n){if(null==e)return e;var r=[],i=0;return M(e,r,"","",function(e){return t.call(n,e,i++)}),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function O(){}t.Children={map:L,forEach:function(e,t,n){L(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return L(e,function(){t++}),t},toArray:function(e){return L(e,function(e){return e})||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return _.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(a in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!E.call(t,a)||"key"===a||"__self"===a||"__source"===a||"ref"===a&&void 0===t.ref||(r[a]=t[a]);var a=arguments.length-2;if(1===a)r.children=n;else if(1<a){for(var o=Array(a),s=0;s<a;s++)o[s]=arguments[s+2];r.children=o}return w(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,i={},a=null;if(null!=t)for(r in void 0!==t.key&&(a=""+t.key),t)E.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var s=Array(o),l=0;l<o;l++)s[l]=arguments[l+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return w(e,a,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=x,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=_.T,n={};_.T=n;try{var r=e(),i=_.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(O,I)}catch(a){I(a)}finally{_.T=t}},t.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},t.use=function(e){return _.H.use(e)},t.useActionState=function(e,t,n){return _.H.useActionState(e,t,n)},t.useCallback=function(e,t){return _.H.useCallback(e,t)},t.useContext=function(e){return _.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return _.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=_.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return _.H.useId()},t.useImperativeHandle=function(e,t,n){return _.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return _.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.H.useMemo(e,t)},t.useOptimistic=function(e,t){return _.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return _.H.useReducer(e,t,n)},t.useRef=function(e){return _.H.useRef(e)},t.useState=function(e){return _.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return _.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return _.H.useTransition()},t.version="19.1.1"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var o={d:{f:a,r:function(){throw Error(i(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,a="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:a}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:a,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=u(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=u(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=u(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},799:(e,t)=>{var n=Symbol.for("react.transitional.element");function r(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var a in r={},t)"key"!==a&&(r[a]=t[a]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}Symbol.for("react.fragment"),t.jsx=r},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,f=null,p=3,h=!1,m=!1,v=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function S(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function _(e){if(v=!1,S(e),!m)if(null!==r(u))m=!0,w||(w=!0,E());else{var t=r(c);null!==t&&I(_,t.startTime-e)}}var E,w=!1,x=-1,C=5,T=-1;function A(){return!!g||!(t.unstable_now()-T<C)}function M(){if(g=!1,w){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,v&&(v=!1,b(x),x=-1),h=!0;var a=p;try{t:{for(S(e),f=r(u);null!==f&&!(f.expirationTime>e&&A());){var o=f.callback;if("function"===typeof o){f.callback=null,p=f.priorityLevel;var s=o(f.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){f.callback=s,S(e),n=!0;break t}f===r(u)&&i(u),S(e)}else i(u);f=r(u)}if(null!==f)n=!0;else{var l=r(c);null!==l&&I(_,l.startTime-e),n=!1}}break e}finally{f=null,p=a,h=!1}n=void 0}}finally{n?E():w=!1}}}if("function"===typeof k)E=function(){k(M)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,R=L.port2;L.port1.onmessage=M,E=function(){R.postMessage(null)}}else E=function(){y(M,0)};function I(e,n){x=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){g=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(v?(b(x),x=-1):v=!0,I(_,a-o))):(e.sortIndex=s,n(u,e),m||h||(m=!0,w||(w=!0,E()))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;("object"==typeof s||"function"==typeof s)&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(a,o),a}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r=n(391),i=n(43),a=n.t(i,2);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(vo){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return function(e,t,n){if(h())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var i=new(e.bind.apply(e,r));return n&&g(i,n.prototype),i}(e,arguments,m(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},s(e)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t,n){return t=m(t),function(e,t){if(t&&("object"==w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return p(e)}(e,h()?Reflect.construct(t,n||[],m(e).constructor):t.apply(e,n))}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(h=function(){return!!e})()}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function y(){y=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n,r){return Object.defineProperty(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r})}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(t,n,r,i){var a=n&&n.prototype instanceof f?n:f,o=Object.create(a.prototype);return l(o,"_invoke",function(t,n,r){var i=1;return function(a,o){if(3===i)throw Error("Generator is already running");if(4===i){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var s=r.delegate;if(s){var l=_(s,r);if(l){if(l===d)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(1===i)throw i=4,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=3;var u=c(t,n,r);if("normal"===u.type){if(i=r.done?4:2,u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(i=4,r.method="throw",r.arg=u.arg)}}}(t,r,new C(i||[])),!0),o}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var d={};function f(){}function p(){}function h(){}var m={};l(m,a,function(){return this});var v=Object.getPrototypeOf,g=v&&v(v(T([])));g&&g!==n&&r.call(g,a)&&(m=g);var b=h.prototype=f.prototype=Object.create(m);function k(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function S(e,t){function n(i,a,o,s){var l=c(e[i],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==w(d)&&r.call(d,"__await")?t.resolve(d.__await).then(function(e){n("next",e,o,s)},function(e){n("throw",e,o,s)}):t.resolve(d).then(function(e){u.value=e,o(u)},function(e){return n("throw",e,o,s)})}s(l.arg)}var i;l(this,"_invoke",function(e,r){function a(){return new t(function(t,i){n(e,r,t,i)})}return i=i?i.then(a,a):a()},!0)}function _(t,n){var r=n.method,i=t.i[r];if(i===e)return n.delegate=null,"throw"===r&&t.i.return&&(n.method="return",n.arg=e,_(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=c(i,t.i,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,d;var o=a.arg;return o?o.done?(n[t.r]=o.value,n.next=t.n,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function E(e){this.tryEntries.push(e)}function x(t){var n=t[4]||{};n.type="normal",n.arg=e,t[4]=n}function C(e){this.tryEntries=[[-1]],e.forEach(E,this),this.reset(!0)}function T(t){if(null!=t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(w(t)+" is not iterable")}return p.prototype=h,l(b,"constructor",h),l(h,"constructor",p),p.displayName=l(h,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,l(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},k(S.prototype),l(S.prototype,o,function(){return this}),t.AsyncIterator=S,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new S(u(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},k(b),l(b,s,"Generator"),l(b,a,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.unshift(r);return function e(){for(;n.length;)if((r=n.pop())in t)return e.value=r,e.done=!1,e;return e.done=!0,e}},t.values=T,C.prototype={constructor:C,reset:function(t){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0][4];if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(e){o.type="throw",o.arg=t,n.next=e}for(var i=n.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a[4],s=this.prev,l=a[1],u=a[2];if(-1===a[0])return r("end"),!1;if(!l&&!u)throw Error("try statement without catch or finally");if(null!=a[0]&&a[0]<=s){if(s<l)return this.method="next",this.arg=e,r(l),!0;if(s<u)return r(u),!1}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r[0]>-1&&r[0]<=this.prev&&this.prev<r[2]){var i=r;break}}i&&("break"===e||"continue"===e)&&i[0]<=t&&t<=i[2]&&(i=null);var a=i?i[4]:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i[2],d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n[2]===e)return this.complete(n[4],n[3]),x(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n[0]===e){var r=n[4];if("throw"===r.type){var i=r.arg;x(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={i:T(t),r:n,n:r},"next"===this.method&&(this.arg=e),d}},t}function b(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}function k(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){b(a,r,i,o,s,"next",e)}function s(e){b(a,r,i,o,s,"throw",e)}o(void 0)})}}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach(function(t){E(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(e,t,n){return(t=A(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function T(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function A(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}var M=function(){return T(function e(){x(this,e)},null,[{key:"render",value:function(e,t){var n=document.createElement("div");n.id="error-view",n.innerText=t,e.replaceChildren(n)}}])}(),L=function(){function e(){x(this,e)}return T(e,null,[{key:"onLoad",value:function(e){e.innerHTML='<div id="loading-validate-key-property"></div>'}},{key:"createElements",value:function(){var e=document.createElement("div");return e.id="validate-property-key-view",e}},{key:"render",value:function(t,n,r){var i=e.createElements(),a={onSuccess:n,onFail:M.render.bind(this,t,"Your 'key' has failed authentication"),onLoad:e.onLoad.bind(this,i)};r.key&&r.verifyKey(r.key,a),t.replaceChildren(i)}}])}(),R=function(){function e(){x(this,e)}return T(e,null,[{key:"unsetStyle",value:function(e,t){var n=Object.keys(t).reduce(function(e,t){return e[t]="",e},{});Object.assign(e.style,n)}},{key:"unsetActivityCSSMouseStates",value:function(t,n){n.click&&e.unsetStyle(t,n.click),n.hover&&e.unsetStyle(t,n.hover)}},{key:"unsetAllCSSMouseStates",value:function(t,n){e.unsetActivityCSSMouseStates(t,n),n.default&&e.unsetStyle(t,n.default)}},{key:"processStateful",value:function(e){var t=e.default||{},n=Object.assign(JSON.parse(JSON.stringify(t)),null==e?void 0:e.hover);return{default:t,hover:n,click:Object.assign(JSON.parse(JSON.stringify(n)),null==e?void 0:e.click)}}},{key:"mergeStatefulStyles",value:function(e){var t={default:{},hover:{},click:{}};return e.forEach(function(e){t.default=Object.assign(t.default,e.default),t.hover=Object.assign(t.hover,e.hover),t.click=Object.assign(t.click,e.click)}),t}},{key:"overwriteDefaultWithAlreadyApplied",value:function(e,t){Object.keys(e.default||[]).forEach(function(n){var r,i=n;t.style[i]&&null!=(r=e.default)&&r[i]&&(e.default[n]=t.style[i])})}},{key:"applyToStyleIfNotDefined",value:function(e,t){for(var n in t){var r=t[n];""===e[n]&&r&&(e[n]=r)}}}])}(),I=function(){function e(){x(this,e)}return T(e,null,[{key:"attemptAppendStyleSheetToHead",value:function(t){if(!t.fontFamily||t.fontFamily===e.DEFAULT_FONT_FAMILY){var n=document.getElementsByTagName("head")[0];if(!Array.from(n.getElementsByTagName("link")).some(function(t){return t.getAttribute("href")===e.FONT_URL})){var r=document.createElement("link");r.rel="stylesheet",r.href=e.FONT_URL,n.appendChild(r)}}}}])}();I.FONT_URL="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap",I.DEFAULT_FONT_FAMILY="'Inter', sans-serif, Avenir, Helvetica, Arial";var O=I,P=function(){function e(){x(this,e)}return T(e,null,[{key:"apply",value:function(t,n){if(n)try{e.applyStyleSheet(t,n)}catch(r){e.addStyleElement(t,n)}}},{key:"applyStyleSheet",value:function(e,t){var n=new CSSStyleSheet;n.replaceSync(e),t.adoptedStyleSheets.push(n)}},{key:"addStyleElement",value:function(e,t){var n=document.createElement("style");n.innerHTML=e,t.appendChild(n)}},{key:"applyDefaultStyleToComponent",value:function(t,n){n&&R.applyToStyleIfNotDefined(t,n),R.applyToStyleIfNotDefined(t,e.DEFAULT_COMPONENT_STYLE)}}])}();P.DEFAULT_COMPONENT_STYLE={height:"350px",width:"320px",borderTop:"1px solid #cacaca",borderRight:"1px solid #cacaca",borderLeft:"1px solid #cacaca",borderBottom:"1px solid #cacaca",fontFamily:O.DEFAULT_FONT_FAMILY,fontSize:"0.9rem",backgroundColor:"white",position:"relative",overflow:"hidden"};var N=P,D=function(){function e(){x(this,e)}return T(e,null,[{key:"buildElement",value:function(){var e=document.createElement("div");e.classList.add("tooltip");var t=document.createElement("span");return t.classList.add("tooltip-text"),e.appendChild(t),e}},{key:"tryCreateConfig",value:function(e,t){if(t)return"boolean"==typeof t?{text:e}:{text:t.text||e,timeout:t.timeout||0,style:t.style}}},{key:"traverseParentUntilContainer",value:function(e){for(var t=e;t.parentElement;)t=t.parentElement;return t}},{key:"setPosition",value:function(t,n){var r=n.getRootNode().host.getBoundingClientRect(),i=t.getBoundingClientRect(),a=n.getBoundingClientRect().width/2,o=i.left+i.width/2;n.style.left="".concat(o-a-r.left,"px"),n.style.top="".concat(i.top-36-r.top,"px");var s=n.getBoundingClientRect();s.left<r.left?n.style.left="".concat(e.OVERFLOW_NEW_POSITION_PX,"px"):s.right>r.right&&(n.style.left="".concat(r.width-s.width-e.OVERFLOW_NEW_POSITION_PX,"px"))}},{key:"display",value:function(t,n,r){return r||(r=e.traverseParentUntilContainer(t).nextSibling),n.text&&(r.children[0].textContent=n.text),{timeout:setTimeout(function(){r.style.visibility="visible",e.setPosition(t,r),n.style&&Object.assign(r.style,n.style)},n.timeout||0),element:r}}},{key:"hide",value:function(e,t){clearTimeout(e.timeout),e.element.style.visibility="hidden",t.style&&R.unsetStyle(e.element,t.style),e.element.style.left="",e.element.style.top=""}}])}();D.OVERFLOW_NEW_POSITION_PX=4;var B=D,F=T(function e(){x(this,e)});F.IS_SAFARI=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),F.IS_CHROMIUM=window.chrome,F.IS_MOBILE=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);var U=F,j=function(e){return e.ESCAPE="Escape",e.ENTER="Enter",e.TAB="Tab",e.ARROW_UP="ArrowUp",e.ARROW_DOWN="ArrowDown",e.ARROW_RIGHT="ArrowRight",e.ARROW_LEFT="ArrowLeft",e.BACKSPACE="Backspace",e.DELETE="Delete",e.META="Meta",e.CONTROL="Control",e}(j||{}),z=function(){function e(){x(this,e)}return T(e,null,[{key:"add",value:function(t,n,r,i){void 0!==r&&t.addEventListener("keydown",e.onKeyDown.bind(this,r)),t.oninput=e.onInput.bind(this,r,i),t.addEventListener("paste",function(e){var t;e.preventDefault(),null!=(t=e.clipboardData)&&t.files.length&&n.addFilesToAnyType(Array.from(e.clipboardData.files))})}},{key:"onKeyDown",value:function(t,n){var r=n.target.textContent;r&&r.length>=t&&!e.PERMITTED_KEYS.has(n.key)&&!e.isKeyCombinationPermitted(n)&&n.preventDefault()}},{key:"isKeyCombinationPermitted",value:function(e){return"a"===e.key&&(e.ctrlKey||e.metaKey)}},{key:"onInput",value:function(e,t,n){var r=n.target,i=r.textContent||"";void 0!==e&&i.length>e&&(r.textContent=i.substring(0,e),W.focusEndOfInput(r)),null==t||t()}}])}();z.PERMITTED_KEYS=new Set([j.BACKSPACE,j.DELETE,j.ARROW_RIGHT,j.ARROW_LEFT,j.ARROW_DOWN,j.ARROW_UP,j.META,j.CONTROL,j.ENTER]);var H=z,q=function(){return T(function e(){x(this,e)},null,[{key:"sanitizePastedTextContent",value:function(e){var t,n;e.preventDefault();var r=null==(t=e.clipboardData)?void 0:t.getData("text/plain");r&&(null==(n=document.execCommand)||n.call(document,"insertText",!1,r))}}])}(),V=function(){function e(t,n,r){var i,a,o=this;x(this,e),this._isComposing=!1;var s=e.processConfig(n,t.textInput);this.elementRef=e.createContainerElement(null==(i=null==s?void 0:s.styles)?void 0:i.container),this._config=s,this.inputElementRef=this.createInputElement(),this.elementRef.appendChild(this.inputElementRef),t.setPlaceholderText=this.setPlaceholderText.bind(this),t.setPlaceholderText((null==(a=this._config.placeholder)?void 0:a.text)||"Ask me anything!"),setTimeout(function(){H.add(o.inputElementRef,r,o._config.characterLimit,t._validationHandler),o._onInput=n.onInput})}return T(e,[{key:"clear",value:function(){var e,t,n=window.scrollY;this.inputElementRef.classList.contains("text-input-disabled")||(Object.assign(this.inputElementRef.style,null==(e=this._config.placeholder)?void 0:e.style),this.inputElementRef.textContent="",W.focusEndOfInput(this.inputElementRef),null==(t=this._onInput)||t.call(this,!1)),U.IS_CHROMIUM&&window.scrollTo({top:n})}},{key:"createInputElement",value:function(){var t,n,r,i,a=document.createElement("div");return a.id=e.TEXT_INPUT_ID,a.classList.add("text-input-styling"),a.role="textbox",U.IS_CHROMIUM&&e.preventAutomaticScrollUpOnNewLine(a),"boolean"==typeof this._config.disabled&&!0===this._config.disabled?(a.contentEditable="false",a.classList.add("text-input-disabled"),a.setAttribute("aria-disabled","true")):(a.contentEditable="true",a.removeAttribute("aria-disabled"),this.addEventListeners(a)),Object.assign(a.style,null==(t=this._config.styles)?void 0:t.text),Object.assign(a.style,null==(n=this._config.placeholder)?void 0:n.style),null!=(i=null==(r=this._config.placeholder)?void 0:r.style)&&i.color||a.setAttribute("textcolor",""),a}},{key:"removePlaceholderStyle",value:function(){var e,t,n,r;!this.inputElementRef.classList.contains("text-input-disabled")&&null!=(e=this._config.placeholder)&&e.style&&(R.unsetStyle(this.inputElementRef,null==(t=this._config.placeholder)?void 0:t.style),Object.assign(this.inputElementRef.style,null==(r=null==(n=this._config)?void 0:n.styles)?void 0:r.text))}},{key:"addEventListeners",value:function(e){var t,n,r=this;null!=(t=this._config.styles)&&t.focus&&(e.onfocus=function(){var e;return Object.assign(r.elementRef.style,null==(e=r._config.styles)?void 0:e.focus)},e.onblur=this.onBlur.bind(this,this._config.styles.focus,null==(n=this._config.styles)?void 0:n.container)),e.addEventListener("keydown",this.onKeydown.bind(this)),e.addEventListener("input",this.onInput.bind(this)),e.addEventListener("paste",q.sanitizePastedTextContent),e.addEventListener("compositionstart",function(){return r._isComposing=!0}),e.addEventListener("compositionend",function(){return r._isComposing=!1})}},{key:"onBlur",value:function(e,t){R.unsetStyle(this.elementRef,e),t&&Object.assign(this.elementRef.style,t)}},{key:"onKeydown",value:function(e){var t;e.key===j.ENTER&&!U.IS_MOBILE&&!this._isComposing&&!e.ctrlKey&&!e.shiftKey&&(e.preventDefault(),null==(t=this.submit)||t.call(this))}},{key:"onInput",value:function(){var e,t;this.isTextInputEmpty()?Object.assign(this.inputElementRef.style,null==(e=this._config.placeholder)?void 0:e.style):this.removePlaceholderStyle(),null==(t=this._onInput)||t.call(this,!0)}},{key:"setPlaceholderText",value:function(e){this.inputElementRef.setAttribute("deep-chat-placeholder-text",e),this.inputElementRef.setAttribute("aria-label",e)}},{key:"isTextInputEmpty",value:function(){return""===this.inputElementRef.textContent}}],[{key:"processConfig",value:function(e,t){var n,r,i,a;return null!==t&&void 0!==t||(t={}),null!==(n=t.disabled)&&void 0!==n||(t.disabled=e.isTextInputDisabled),null!==(r=t.placeholder)&&void 0!==r||(t.placeholder={}),null!==(i=(a=t.placeholder).text)&&void 0!==i||(a.text=e.textInputPlaceholderText),t}},{key:"createContainerElement",value:function(e){var t=document.createElement("div");return t.id="text-input-container",Object.assign(t.style,e),t}},{key:"preventAutomaticScrollUpOnNewLine",value:function(e){var t;e.addEventListener("keydown",function(){t=window.scrollY}),e.addEventListener("input",function(){t!==window.scrollY&&window.scrollTo({top:t})})}}])}();V.TEXT_INPUT_ID="text-input";var G=V,W=function(){function e(){x(this,e)}return T(e,null,[{key:"focusEndOfInput",value:function(e){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();null==n||n.removeAllRanges(),null==n||n.addRange(t)}},{key:"focusFromParentElement",value:function(t){var n=t.querySelector("#".concat(G.TEXT_INPUT_ID));n&&(U.IS_SAFARI&&n.focus(),e.focusEndOfInput(n))}}])}();function K(e){return e.charAt(0).toUpperCase()+e.slice(1)}function J(e,t,n,r){var i="\n".concat(K(t)," message: ").concat(JSON.stringify(e)," \n"),a=n?"".concat(K(t)," message after interceptor: ").concat(function(e){return e&&JSON.stringify(e)}(r)," \n"):"";return i+a}var $="Make sure the events are using {text: string} or {html: string} format.\nYou can also augment them using the responseInterceptor property: https://deepchat.dev/docs/interceptors#responseInterceptor",X={INVALID_KEY:"Invalid API Key",CONNECTION_FAILED:"Failed to connect",INVALID_RESPONSE:function(e,t,n,r){return"".concat(J(e,t,n,r),"Make sure the ").concat(t," message is using the Response format: https://deepchat.dev/docs/connect/#Response \nYou can also augment it using the responseInterceptor property: https://deepchat.dev/docs/interceptors#responseInterceptor")},INVALID_MODEL_REQUEST:function(e,t){var n="request";return"".concat(J(e,n,t),"Make sure the ").concat(n,' message is using the {body: {text: string}} format, e.g: {body: {text: "Model Response"}}')},INVALID_MODEL_RESPONSE:function(e,t,n){var r="response";return"".concat(J(e,r,t,n),"Make sure the ").concat(r,' message is using the {text: string} format, e.g: {text: "Model Response"}')},INVALID_STREAM_ARRAY_RESPONSE:"Multi-response arrays are not supported for streaming",INVALID_STREAM_EVENT:$,INVALID_STREAM_EVENT_MIX:"Cannot mix {text: string} and {html: string} responses.",NO_VALID_STREAM_EVENTS_SENT:"No valid stream events were sent.\n".concat($),READABLE_STREAM_CONNECTION_ERROR:"Readable Stream connection error."},Y=function(){function e(){x(this,e)}return T(e,null,[{key:"addElements",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.forEach(function(t){return e.appendChild(t)})}},{key:"isScrollbarAtBottomOfElement",value:function(t){var n=t.scrollHeight,r=t.clientHeight;return t.scrollTop>=n-r-e.CODE_SNIPPET_GENERATION_JUMP}},{key:"cloneElement",value:function(e){var t=e.cloneNode(!0);return e.parentNode.replaceChild(t,e),t}},{key:"scrollToBottom",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e.scrollTo({left:0,top:e.scrollHeight,behavior:"smooth"}):e.scrollTop=e.scrollHeight}},{key:"scrollToTop",value:function(e){e.scrollTop=0}}])}();Y.CODE_SNIPPET_GENERATION_JUMP=.5;var Q=Y,Z=function(){function e(){x(this,e)}return T(e,null,[{key:"speak",value:function(e,t){if(window.SpeechSynthesisUtterance){var n=new SpeechSynthesisUtterance(e);Object.assign(n,t),speechSynthesis.speak(n)}}},{key:"processConfig",value:function(t,n){var r={};setTimeout(function(){if("object"==w(t)&&(t.lang&&(r.lang=t.lang),t.pitch&&(r.pitch=t.pitch),t.rate&&(r.rate=t.rate),t.volume&&(r.volume=t.volume),t.voiceName)){var e=window.speechSynthesis.getVoices().find(function(e){var n;return e.name.toLocaleLowerCase()===(null==(n=t.voiceName)?void 0:n.toLocaleLowerCase())});e&&(r.voice=e)}n(r)},e.LOAD_VOICES_MS)}}])}();Z.LOAD_VOICES_MS=200;var ee=Z,te=function(){function e(){x(this,e)}return T(e,null,[{key:"colorToHex",value:function(e){var t=document.createElement("div");return t.style.color=e,document.body.appendChild(t),"#".concat(window.getComputedStyle(t).color.match(/\d+/g).map(function(e){return parseInt(e).toString(16).padStart(2,"0")}).join(""))}},{key:"setDots",value:function(t,n){var r,i,a,o;if(null!=(o=null==(a=null==(i=null==(r=null==n?void 0:n.loading)?void 0:r.message)?void 0:i.styles)?void 0:a.bubble)&&o.color){var s=e.colorToHex(n.loading.message.styles.bubble.color);t.style.setProperty("--loading-message-color",s),t.style.setProperty("--loading-message-color-fade","".concat(s,"33"))}else t.style.setProperty("--loading-message-color","#848484"),t.style.setProperty("--loading-message-color-fade","#55555533")}},{key:"setRing",value:function(t,n){var r=n||{},i=r.color,a=r.width,o=r.height,s=r.margin,l=r.border;if(i){var u=e.colorToHex(i);t.style.setProperty("--loading-history-color",u)}else t.style.setProperty("--loading-history-color","#dbdbdb");t.style.setProperty("--loading-history-height",o||"57px"),t.style.setProperty("--loading-history-width",a||"57px"),t.style.setProperty("--loading-history-margin",s||"7px"),t.style.setProperty("--loading-history-border",l||"6px solid")}}])}();te.BUBBLE_CLASS="deep-chat-loading-message-bubble",te.DOTS_CONTAINER_CLASS="deep-chat-loading-message-dots-container";var ne=te,re=function(){function e(){x(this,e)}return T(e,null,[{key:"setElementProps",value:function(t,n,r,i){var a;"loading"!==r&&(t.applyCustomStyles(n,i,!0,null==(a=t.messageStyles)?void 0:a[r]),n.bubbleElement.classList.add(e.FILE_BUBBLE_CLASS))}},{key:"addMessage",value:function(t,n,r,i,a){e.setElementProps(t,n,r,i),a||(t.appendOuterContainerElemet(n.outerContainer),t.focusMode||(t.elementRef.scrollTop=t.elementRef.scrollHeight))}},{key:"wrapInLink",value:function(t,n,r){var i=document.createElement("a");return i.href=n,i.download=r||e.DEFAULT_FILE_NAME,i.target="_blank",i.appendChild(t),i}},{key:"isNonLinkableDataUrl",value:function(e,t){return!(!t.startsWith("data")||"image"===e)&&("any"===e&&t.startsWith("data:text/javascript")||!t.startsWith("data:image")&&!t.startsWith("data:application"))}},{key:"processContent",value:function(t,n,r,i){return!r||e.isNonLinkableDataUrl(t,r)?n:e.wrapInLink(n,r,i)}},{key:"waitToLoadThenScroll",value:function(e){setTimeout(function(){e.scrollTop=e.scrollHeight},60)}},{key:"scrollDownOnImageLoad",value:function(t,n){if(t.startsWith("data"))e.waitToLoadThenScroll(n);else try{fetch(t,{mode:"no-cors"}).catch(function(){}).finally(function(){e.waitToLoadThenScroll(n)})}catch(r){n.scrollTop=n.scrollHeight}}},{key:"reAddFileRefToObject",value:function(e,t){var n;null==(n=e.files)||n.forEach(function(e,n){var r;e.ref&&null!=(r=t.files)&&r[n]&&(t.files[n].ref=e.ref)})}},{key:"removeFileRef",value:function(e){var t=_({},e);return delete t.ref,t}},{key:"isAudioFile",value:function(e){var t=e.type,n=e.src;return"audio"===t||(null==n?void 0:n.startsWith("data:audio"))||n&&/\.(mp3|ogg|wav|aac|webm|4a)$/i.test(n)}},{key:"isImageFile",value:function(t){var n=t.type,r=t.src;return"image"===n||(null==r?void 0:r.startsWith("data:image"))||r&&e.isImageFileExtension(r)}},{key:"isImageFileExtension",value:function(e){return/\.(jpg|jpeg|png|gif|bmp)$/i.test(e)}}])}();re.DEFAULT_FILE_NAME="file",re.FILE_BUBBLE_CLASS="file-message";var ie=re,ae=function(){return T(function e(){x(this,e)},null,[{key:"checkForContainerStyles",value:function(e,t){var n=e.containerStyle;n&&(Object.assign(t.style,n),console.error("The containerStyle property is deprecated since version 1.3.14."),console.error("Please change to using the style property instead: https://deepchat.dev/docs/styles#style"))}},{key:"handleResponseProperty",value:function(e){return console.error("The {result: ....} response object type is deprecated since version 1.3.0."),console.error("Please change to using the new response object: https://deepchat.dev/docs/connect#Response"),e.result}},{key:"processHistory",value:function(e){var t=e.initialMessages;if(t)return console.error("The initialMessages property is deprecated since version 2.0.0."),console.error("Please change to using the history property instead: https://deepchat.dev/docs/messages/#history"),t}},{key:"processHistoryFile",value:function(e){var t=e.file;t&&(console.error("The file property in MessageContent is deprecated since version 1.3.17."),console.error("Please change to using the files array property: https://deepchat.dev/docs/messages/#MessageContent"),e.files=[t])}},{key:"processValidateInput",value:function(e){var t=e.validateMessageBeforeSending;if(t)return console.error("The validateMessageBeforeSending property is deprecated since version 1.3.24."),console.error("Please change to using validateInput: https://deepchat.dev/docs/interceptors#validateInput"),t}},{key:"processSubmitUserMessage",value:function(e){return console.error("The submitUserMessage(text: string) argument string type is deprecated since version 1.4.4."),console.error("Please change to using the new argument type: https://deepchat.dev/docs/methods#submitUserMessage"),{text:e}}},{key:"flagHTMLUpdateClass",value:function(e){var t;null!=(t=e.children[0])&&t.classList.contains("deep-chat-update-message")&&(console.error('The "deep-chat-update-message" html class is deprecated since version 1.4.4.'),console.error("Please change to using {..., overwrite: true} object: https://deepchat.dev/docs/connect#Response"))}},{key:"processConnect",value:function(e){var t=e;t.request&&(t.connect?Object.assign(t.connect,t.request):t.connect=t.request,console.error("The request property is deprecated since version 2.0.0."),console.error("Please see the connect object: https://deepchat.dev/docs/connect#connect-1"))}},{key:"checkForStream",value:function(e){var t=e.stream;if(t)return console.error("The stream property has been moved to the connect object in version 2.0.0."),console.error("Please see the connect object: https://deepchat.dev/docs/connect#connect-1"),t}},{key:"fireOnNewMessage",value:function(e,t){var n,r=e;r.onNewMessage&&(console.error("The onNewMessage event has been deprecated since version 2.0.0."),console.error("Please see the onMessage event: https://deepchat.dev/docs/events#onMessage"),null==(n=r.onNewMessage)||n.call(r,t)),e.dispatchEvent(new CustomEvent("new-message",{detail:t}))}},{key:"processFileConfigConnect",value:function(e){var t=e;t.request&&(console.error("The request property in file configuration is deprecated since version 2.0.0."),console.error("Please use the connect property instead: https://deepchat.dev/docs/files"),t.connect||(t.connect=t.request))}},{key:"processMessageStyles",value:function(e){if(e){var t=JSON.parse(JSON.stringify(e)),n=t.loading;return n&&(n.outerContainer||n.innerContainer||n.bubble||n.media)&&(console.error("The loading message styles are defined using LoadingMessageStyles interface since version 2.1.0."),console.error("Check it out here: https://deepchat.dev/docs/messages/styles#LoadingMessageStyles"),t.loading={message:{styles:n}}),t}}},{key:"processDemo",value:function(e){return"boolean"==typeof e||e.displayLoadingBubble&&(console.error("The demo displayLoadingBubble property is deprecated since version 2.1.0."),console.error("Please use displayLoading instead: https://deepchat.dev/docs/modes#demo"),e.displayLoading={message:!0}),e}}])}(),oe=function(){function e(){x(this,e)}return T(e,null,[{key:"mouseUp",value:function(e,t){R.unsetAllCSSMouseStates(e,t),Object.assign(e.style,t.default),Object.assign(e.style,t.hover)}},{key:"mouseDown",value:function(e,t){Object.assign(e.style,t.click)}},{key:"mouseLeave",value:function(e,t){R.unsetAllCSSMouseStates(e,t),Object.assign(e.style,t.default)}},{key:"mouseEnter",value:function(e,t){Object.assign(e.style,t.hover)}},{key:"add",value:function(t,n){t.addEventListener("mouseenter",e.mouseEnter.bind(this,t,n)),t.addEventListener("mouseleave",e.mouseLeave.bind(this,t,n)),t.addEventListener("mousedown",e.mouseDown.bind(this,t,n)),t.addEventListener("mouseup",e.mouseUp.bind(this,t,n))}}])}(),se={"deep-chat-button":{styles:{default:{backgroundColor:"white",padding:"5px",paddingLeft:"7px",paddingRight:"7px",border:"1px solid #c2c2c2",borderRadius:"6px",cursor:"pointer"},hover:{backgroundColor:"#fafafa"},click:{backgroundColor:"#f1f1f1"}}}},le=Object.keys(se),ue=function(){function e(){x(this,e)}return T(e,null,[{key:"applySuggestionEvent",value:function(e,t){setTimeout(function(){t.addEventListener("click",function(){var n,r;null==(r=e.submitUserMessage)||r.call(e,{text:(null==(n=t.textContent)?void 0:n.trim())||""})})})}},{key:"isElementTemporary",value:function(e){var t;return!!e&&(null==(t=e.bubbleElement.children[0])?void 0:t.classList.contains("deep-chat-temporary-message"))}},{key:"doesElementContainDeepChatClass",value:function(e){return le.find(function(t){return e.classList.contains(t)})}},{key:"applyEvents",value:function(e,t){var n=se[t].events;Object.keys(n||[]).forEach(function(t){e.addEventListener(t,null==n?void 0:n[t])})}},{key:"getProcessedStyles",value:function(e,t,n){var r=Array.from(t.classList).reduce(function(t,n){var r,i=null==(r=e[n])?void 0:r.styles;return i&&e[n].styles&&t.push(i),t},[]),i=se[n].styles;if(i){var a=JSON.parse(JSON.stringify(i));a.default&&R.overwriteDefaultWithAlreadyApplied(a,t),r.unshift(a)}var o=R.mergeStatefulStyles(r);return R.processStateful(o)}},{key:"applyDeepChatUtilities",value:function(t,n,r){le.forEach(function(t){var i=r.getElementsByClassName(t);Array.from(i||[]).forEach(function(r){var i=e.getProcessedStyles(n,r,t);ce.applyStylesToElement(r,i),e.applyEvents(r,t)})});var i=r.getElementsByClassName("deep-chat-suggestion-button");Array.from(i).forEach(function(n){return e.applySuggestionEvent(t,n)})}}])}(),ce=function(){function e(){x(this,e)}return T(e,null,[{key:"applyStylesToElement",value:function(e,t){var n=R.processStateful(t);oe.add(e,n),Object.assign(e.style,n.default)}},{key:"applyEventsToElement",value:function(e,t){Object.keys(t).forEach(function(n){var r=t[n];r&&e.addEventListener(n,r)})}},{key:"applyClassUtilitiesToElement",value:function(t,n){var r=n.events,i=n.styles;r&&e.applyEventsToElement(t,r),i&&!ue.doesElementContainDeepChatClass(t)&&e.applyStylesToElement(t,i)}},{key:"applyCustomClassUtilities",value:function(t,n){Object.keys(t).forEach(function(r){var i=n.getElementsByClassName(r);Array.from(i).forEach(function(n){t[r]&&e.applyClassUtilitiesToElement(n,t[r])})})}},{key:"apply",value:function(t,n){ue.applyDeepChatUtilities(t,t.htmlClassUtilities,n),e.applyCustomClassUtilities(t.htmlClassUtilities,n)}},{key:"traverseNodes",value:function(t,n){t.nodeType===Node.ELEMENT_NODE&&n.push(t.outerHTML),t.childNodes.forEach(function(t){e.traverseNodes(t,n)})}},{key:"splitHTML",value:function(t){var n=(new DOMParser).parseFromString(t,"text/html"),r=[];return n.body.childNodes.forEach(function(t){e.traverseNodes(t,r)}),r}},{key:"isTemporaryBasedOnHTML",value:function(e){var t=document.createElement("div");return t.innerHTML=e,ue.isElementTemporary({outerContainer:t,bubbleElement:t,innerContainer:t})}},{key:"replaceElementWithNewClone",value:function(e,t){var n,r=(t||e).cloneNode(!0);return null==(n=e.parentNode)||n.replaceChild(r,e),r}}])}(),de=function(){function e(){x(this,e)}return T(e,null,[{key:"addElement",value:function(e,t){e.appendOuterContainerElemet(t),e.focusMode||(e.elementRef.scrollTop=e.elementRef.scrollHeight)}},{key:"createElements",value:function(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=t.createMessageElementsOnOrientation("",r,i,a);return o.bubbleElement.classList.add(e.HTML_BUBBLE_CLASS),o.bubbleElement.innerHTML=n,o}},{key:"overwriteElements",value:function(e,t,n){n.bubbleElement.innerHTML=t,ce.apply(e,n.outerContainer),ae.flagHTMLUpdateClass(n.bubbleElement)}},{key:"overwrite",value:function(t,n,r,i){var a=t.messageToElements,o=tn.overwriteMessage(a,i,n,r,"html",e.HTML_BUBBLE_CLASS);return o&&e.overwriteElements(t,n,o),o}},{key:"create",value:function(t,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.createElements(t,n,r,a);return tn.fillEmptyMessageElement(o.bubbleElement,n),ce.apply(t,o.outerContainer),ae.flagHTMLUpdateClass(o.bubbleElement),t.applyCustomStyles(o,r,!1,null==(i=t.messageStyles)?void 0:i.html),o}},{key:"add",value:function(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!=i&&i.status){var o=this.overwrite(t,n,r,t.messageElementRefs);if(o)return o;i.status=!1}if(!(a&&t.messageElementRefs.length>0&&ce.isTemporaryBasedOnHTML(n))){var s=e.create(t,n,r,a);return a||e.addElement(t,s.outerContainer),s}}}])}();de.HTML_BUBBLE_CLASS="html-message";var fe,pe=de;function he(e){return(fe=fe||document.createElement("textarea")).innerHTML="&"+e+";",fe.value}var me=Object.prototype.hasOwnProperty;function ve(e){return[].slice.call(arguments,1).forEach(function(t){if(t){if("object"!=w(t))throw new TypeError(t+"must be object");Object.keys(t).forEach(function(n){e[n]=t[n]})}}),e}var ge=/\\([\\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function ye(e){return e.indexOf("\\")<0?e:e.replace(ge,"$1")}function be(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||65535===(65535&e)||65534===(65535&e)||e>=0&&e<=8||11===e||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function ke(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}var Se=/&([a-z#][a-z0-9]{1,31});/gi,_e=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;function Ee(e,t){var n=0,r=he(t);return t!==r?r:35===t.charCodeAt(0)&&_e.test(t)&&be(n="x"===t[1].toLowerCase()?parseInt(t.slice(2),16):parseInt(t.slice(1),10))?ke(n):e}function we(e){return e.indexOf("&")<0?e:e.replace(Se,Ee)}var xe=/[&<>"]/,Ce=/[&<>"]/g,Te={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Ae(e){return Te[e]}function Me(e){return xe.test(e)?e.replace(Ce,Ae):e}var Le={};function Re(e,t){return++t>=e.length-2?t:"paragraph_open"===e[t].type&&e[t].tight&&"inline"===e[t+1].type&&0===e[t+1].content.length&&"paragraph_close"===e[t+2].type&&e[t+2].tight?Re(e,t+2):t}Le.blockquote_open=function(){return"<blockquote>\n"},Le.blockquote_close=function(e,t){return"</blockquote>"+Ie(e,t)},Le.code=function(e,t){return e[t].block?"<pre><code>"+Me(e[t].content)+"</code></pre>"+Ie(e,t):"<code>"+Me(e[t].content)+"</code>"},Le.fence=function(e,t,n,r,i){var a,o,s=e[t],l="",u=n.langPrefix;if(s.params){if(o=(a=s.params.split(/\s+/g)).join(" "),function(e,t){return!!e&&me.call(e,t)}(i.rules.fence_custom,a[0]))return i.rules.fence_custom[a[0]](e,t,n,r,i);l=' class="'+u+Me(we(ye(o)))+'"'}return"<pre><code"+l+">"+(n.highlight&&n.highlight.apply(n.highlight,[s.content].concat(a))||Me(s.content))+"</code></pre>"+Ie(e,t)},Le.fence_custom={},Le.heading_open=function(e,t){return"<h"+e[t].hLevel+">"},Le.heading_close=function(e,t){return"</h"+e[t].hLevel+">\n"},Le.hr=function(e,t,n){return(n.xhtmlOut?"<hr />":"<hr>")+Ie(e,t)},Le.bullet_list_open=function(){return"<ul>\n"},Le.bullet_list_close=function(e,t){return"</ul>"+Ie(e,t)},Le.list_item_open=function(){return"<li>"},Le.list_item_close=function(){return"</li>\n"},Le.ordered_list_open=function(e,t){var n=e[t];return"<ol"+(n.order>1?' start="'+n.order+'"':"")+">\n"},Le.ordered_list_close=function(e,t){return"</ol>"+Ie(e,t)},Le.paragraph_open=function(e,t){return e[t].tight?"":"<p>"},Le.paragraph_close=function(e,t){var n=!(e[t].tight&&t&&"inline"===e[t-1].type&&!e[t-1].content);return(e[t].tight?"":"</p>")+(n?Ie(e,t):"")},Le.link_open=function(e,t,n){var r=e[t].title?' title="'+Me(we(e[t].title))+'"':"",i=n.linkTarget?' target="'+n.linkTarget+'"':"";return'<a href="'+Me(e[t].href)+'"'+r+i+">"},Le.link_close=function(){return"</a>"},Le.image=function(e,t,n){var r=' src="'+Me(e[t].src)+'"',i=e[t].title?' title="'+Me(we(e[t].title))+'"':"";return"<img"+r+(' alt="'+(e[t].alt?Me(we(ye(e[t].alt))):"")+'"')+i+(n.xhtmlOut?" /":"")+">"},Le.table_open=function(){return"<table>\n"},Le.table_close=function(){return"</table>\n"},Le.thead_open=function(){return"<thead>\n"},Le.thead_close=function(){return"</thead>\n"},Le.tbody_open=function(){return"<tbody>\n"},Le.tbody_close=function(){return"</tbody>\n"},Le.tr_open=function(){return"<tr>"},Le.tr_close=function(){return"</tr>\n"},Le.th_open=function(e,t){var n=e[t];return"<th"+(n.align?' style="text-align:'+n.align+'"':"")+">"},Le.th_close=function(){return"</th>"},Le.td_open=function(e,t){var n=e[t];return"<td"+(n.align?' style="text-align:'+n.align+'"':"")+">"},Le.td_close=function(){return"</td>"},Le.strong_open=function(){return"<strong>"},Le.strong_close=function(){return"</strong>"},Le.em_open=function(){return"<em>"},Le.em_close=function(){return"</em>"},Le.del_open=function(){return"<del>"},Le.del_close=function(){return"</del>"},Le.ins_open=function(){return"<ins>"},Le.ins_close=function(){return"</ins>"},Le.mark_open=function(){return"<mark>"},Le.mark_close=function(){return"</mark>"},Le.sub=function(e,t){return"<sub>"+Me(e[t].content)+"</sub>"},Le.sup=function(e,t){return"<sup>"+Me(e[t].content)+"</sup>"},Le.hardbreak=function(e,t,n){return n.xhtmlOut?"<br />\n":"<br>\n"},Le.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?"<br />\n":"<br>\n":"\n"},Le.text=function(e,t){return Me(e[t].content)},Le.htmlblock=function(e,t){return e[t].content},Le.htmltag=function(e,t){return e[t].content},Le.abbr_open=function(e,t){return'<abbr title="'+Me(we(e[t].title))+'">'},Le.abbr_close=function(){return"</abbr>"},Le.footnote_ref=function(e,t){var n=Number(e[t].id+1).toString(),r="fnref"+n;return e[t].subId>0&&(r+=":"+e[t].subId),'<sup class="footnote-ref"><a href="#fn'+n+'" id="'+r+'">['+n+"]</a></sup>"},Le.footnote_block_open=function(e,t,n){return(n.xhtmlOut?'<hr class="footnotes-sep" />\n':'<hr class="footnotes-sep">\n')+'<section class="footnotes">\n<ol class="footnotes-list">\n'},Le.footnote_block_close=function(){return"</ol>\n</section>\n"},Le.footnote_open=function(e,t){return'<li id="fn'+Number(e[t].id+1).toString()+'"  class="footnote-item">'},Le.footnote_close=function(){return"</li>\n"},Le.footnote_anchor=function(e,t){var n="fnref"+Number(e[t].id+1).toString();return e[t].subId>0&&(n+=":"+e[t].subId),' <a href="#'+n+'" class="footnote-backref">\u21a9</a>'},Le.dl_open=function(){return"<dl>\n"},Le.dt_open=function(){return"<dt>"},Le.dd_open=function(){return"<dd>"},Le.dl_close=function(){return"</dl>\n"},Le.dt_close=function(){return"</dt>\n"},Le.dd_close=function(){return"</dd>\n"};var Ie=Le.getBreak=function(e,t){return(t=Re(e,t))<e.length&&"list_item_close"===e[t].type?"":"\n"};function Oe(){this.rules=ve({},Le),this.getBreak=Le.getBreak}function Pe(){this.__rules__=[],this.__cache__=null}function Ne(e,t,n,r,i){this.src=e,this.env=r,this.options=n,this.parser=t,this.tokens=i,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache=[],this.isInLabel=!1,this.linkLevel=0,this.linkContent="",this.labelUnmatchedScopes=0}function De(e,t){var n,r,i,a=-1,o=e.posMax,s=e.pos,l=e.isInLabel;if(e.isInLabel)return-1;if(e.labelUnmatchedScopes)return e.labelUnmatchedScopes--,-1;for(e.pos=t+1,e.isInLabel=!0,n=1;e.pos<o;){if(91===(i=e.src.charCodeAt(e.pos)))n++;else if(93===i&&0===--n){r=!0;break}e.parser.skipToken(e)}return r?(a=e.pos,e.labelUnmatchedScopes=0):e.labelUnmatchedScopes=n-1,e.pos=s,e.isInLabel=l,a}function Be(e,t,n,r){var i,a,o,s,l,u;if(42!==e.charCodeAt(0)||91!==e.charCodeAt(1)||-1===e.indexOf("]:")||((a=De(i=new Ne(e,t,n,r,[]),1))<0||58!==e.charCodeAt(a+1)))return-1;for(s=i.posMax,o=a+2;o<s&&10!==i.src.charCodeAt(o);o++);return l=e.slice(2,a),0===(u=e.slice(a+2,o).trim()).length?-1:(r.abbreviations||(r.abbreviations={}),w(r.abbreviations[":"+l])>"u"&&(r.abbreviations[":"+l]=u),o)}function Fe(e){var t=we(e);try{t=decodeURI(t)}catch(n){}return encodeURI(t)}function Ue(e,t){var n,r,i,a=t,o=e.posMax;if(60===e.src.charCodeAt(t)){for(t++;t<o;){if(10===(n=e.src.charCodeAt(t)))return!1;if(62===n)return i=Fe(ye(e.src.slice(a+1,t))),!!e.parser.validateLink(i)&&(e.pos=t+1,e.linkContent=i,!0);92===n&&t+1<o?t+=2:t++}return!1}for(r=0;t<o&&!(32===(n=e.src.charCodeAt(t))||n<32||127===n);)if(92===n&&t+1<o)t+=2;else{if(40===n&&++r>1||41===n&&--r<0)break;t++}return!(a===t||(i=ye(e.src.slice(a,t)),!e.parser.validateLink(i)))&&(e.linkContent=i,e.pos=t,!0)}function je(e,t){var n,r=t,i=e.posMax,a=e.src.charCodeAt(t);if(34!==a&&39!==a&&40!==a)return!1;for(t++,40===a&&(a=41);t<i;){if((n=e.src.charCodeAt(t))===a)return e.pos=t+1,e.linkContent=ye(e.src.slice(r+1,t)),!0;92===n&&t+1<i?t+=2:t++}return!1}function ze(e){return e.trim().replace(/\s+/g," ").toUpperCase()}function He(e,t,n,r){var i,a,o,s,l,u,c,d,f;if(91!==e.charCodeAt(0)||-1===e.indexOf("]:")||((a=De(i=new Ne(e,t,n,r,[]),0))<0||58!==e.charCodeAt(a+1)))return-1;for(s=i.posMax,o=a+2;o<s&&(32===(l=i.src.charCodeAt(o))||10===l);o++);if(!Ue(i,o))return-1;for(c=i.linkContent,u=o=i.pos,o+=1;o<s&&(32===(l=i.src.charCodeAt(o))||10===l);o++);for(o<s&&u!==o&&je(i,o)?(d=i.linkContent,o=i.pos):(d="",o=u);o<s&&32===i.src.charCodeAt(o);)o++;return o<s&&10!==i.src.charCodeAt(o)?-1:(f=ze(e.slice(1,a)),w(r.references[f])>"u"&&(r.references[f]={title:d,href:c}),o)}Oe.prototype.renderInline=function(e,t,n){for(var r=this.rules,i=e.length,a=0,o="";i--;)o+=r[e[a].type](e,a++,t,n,this);return o},Oe.prototype.render=function(e,t,n){for(var r=this.rules,i=e.length,a=-1,o="";++a<i;)"inline"===e[a].type?o+=this.renderInline(e[a].children,t,n):o+=r[e[a].type](e,a,t,n,this);return o},Pe.prototype.__find__=function(e){for(var t=this.__rules__.length,n=-1;t--;)if(this.__rules__[++n].name===e)return n;return-1},Pe.prototype.__compile__=function(){var e=this,t=[""];e.__rules__.forEach(function(e){e.enabled&&e.alt.forEach(function(e){t.indexOf(e)<0&&t.push(e)})}),e.__cache__={},t.forEach(function(t){e.__cache__[t]=[],e.__rules__.forEach(function(n){n.enabled&&(t&&n.alt.indexOf(t)<0||e.__cache__[t].push(n.fn))})})},Pe.prototype.at=function(e,t,n){var r=this.__find__(e),i=n||{};if(-1===r)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=i.alt||[],this.__cache__=null},Pe.prototype.before=function(e,t,n,r){var i=this.__find__(e),a=r||{};if(-1===i)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i,0,{name:t,enabled:!0,fn:n,alt:a.alt||[]}),this.__cache__=null},Pe.prototype.after=function(e,t,n,r){var i=this.__find__(e),a=r||{};if(-1===i)throw new Error("Parser rule not found: "+e);this.__rules__.splice(i+1,0,{name:t,enabled:!0,fn:n,alt:a.alt||[]}),this.__cache__=null},Pe.prototype.push=function(e,t,n){var r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null},Pe.prototype.enable=function(e,t){e=Array.isArray(e)?e:[e],t&&this.__rules__.forEach(function(e){e.enabled=!1}),e.forEach(function(e){var t=this.__find__(e);if(t<0)throw new Error("Rules manager: invalid rule name "+e);this.__rules__[t].enabled=!0},this),this.__cache__=null},Pe.prototype.disable=function(e){(e=Array.isArray(e)?e:[e]).forEach(function(e){var t=this.__find__(e);if(t<0)throw new Error("Rules manager: invalid rule name "+e);this.__rules__[t].enabled=!1},this),this.__cache__=null},Pe.prototype.getRules=function(e){return null===this.__cache__&&this.__compile__(),this.__cache__[e]||[]},Ne.prototype.pushPending=function(){this.tokens.push({type:"text",content:this.pending,level:this.pendingLevel}),this.pending=""},Ne.prototype.push=function(e){this.pending&&this.pushPending(),this.tokens.push(e),this.pendingLevel=this.level},Ne.prototype.cacheSet=function(e,t){for(var n=this.cache.length;n<=e;n++)this.cache.push(0);this.cache[e]=t},Ne.prototype.cacheGet=function(e){return e<this.cache.length?this.cache[e]:0};var qe=" \n()[]'\".,!?-";function Ve(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}var Ge=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,We=/\((c|tm|r|p)\)/gi,Ke={c:"\xa9",r:"\xae",p:"\xa7",tm:"\u2122"};function Je(e){return e.indexOf("(")<0?e:e.replace(We,function(e,t){return Ke[t.toLowerCase()]})}var $e=/['"]/,Xe=/['"]/g,Ye=/[-\s()\[\]]/;function Qe(e,t){return!(t<0||t>=e.length)&&!Ye.test(e[t])}function Ze(e,t,n){return e.substr(0,t)+n+e.substr(t+1)}var et=[["block",function(e){e.inlineMode?e.tokens.push({type:"inline",content:e.src.replace(/\n/g," ").trim(),level:0,lines:[0,1],children:[]}):e.block.parse(e.src,e.options,e.env,e.tokens)}],["abbr",function(e){var t,n,r,i,a=e.tokens;if(!e.inlineMode)for(t=1,n=a.length-1;t<n;t++)if("paragraph_open"===a[t-1].type&&"inline"===a[t].type&&"paragraph_close"===a[t+1].type){for(r=a[t].content;r.length&&!((i=Be(r,e.inline,e.options,e.env))<0);)r=r.slice(i).trim();a[t].content=r,r.length||(a[t-1].tight=!0,a[t+1].tight=!0)}}],["references",function(e){var t,n,r,i,a=e.tokens;if(e.env.references=e.env.references||{},!e.inlineMode)for(t=1,n=a.length-1;t<n;t++)if("inline"===a[t].type&&"paragraph_open"===a[t-1].type&&"paragraph_close"===a[t+1].type){for(r=a[t].content;r.length&&!((i=He(r,e.inline,e.options,e.env))<0);)r=r.slice(i).trim();a[t].content=r,r.length||(a[t-1].tight=!0,a[t+1].tight=!0)}}],["inline",function(e){var t,n,r,i=e.tokens;for(n=0,r=i.length;n<r;n++)"inline"===(t=i[n]).type&&e.inline.parse(t.content,e.options,e.env,t.children)}],["footnote_tail",function(e){var t,n,r,i,a,o,s,l,u,c=0,d=!1,f={};if(e.env.footnotes&&(e.tokens=e.tokens.filter(function(e){return"footnote_reference_open"===e.type?(d=!0,l=[],u=e.label,!1):"footnote_reference_close"===e.type?(d=!1,f[":"+u]=l,!1):(d&&l.push(e),!d)}),e.env.footnotes.list)){for(o=e.env.footnotes.list,e.tokens.push({type:"footnote_block_open",level:c++}),t=0,n=o.length;t<n;t++){for(e.tokens.push({type:"footnote_open",id:t,level:c++}),o[t].tokens?((s=[]).push({type:"paragraph_open",tight:!1,level:c++}),s.push({type:"inline",content:"",level:c,children:o[t].tokens}),s.push({type:"paragraph_close",tight:!1,level:--c})):o[t].label&&(s=f[":"+o[t].label]),e.tokens=e.tokens.concat(s),a="paragraph_close"===e.tokens[e.tokens.length-1].type?e.tokens.pop():null,i=o[t].count>0?o[t].count:1,r=0;r<i;r++)e.tokens.push({type:"footnote_anchor",id:t,subId:r,level:c});a&&e.tokens.push(a),e.tokens.push({type:"footnote_close",level:--c})}e.tokens.push({type:"footnote_block_close",level:--c})}}],["abbr2",function(e){var t,n,r,i,a,o,s,l,u,c,d,f,p=e.tokens;if(e.env.abbreviations)for(e.env.abbrRegExp||(f="(^|["+qe.split("").map(Ve).join("")+"])("+Object.keys(e.env.abbreviations).map(function(e){return e.substr(1)}).sort(function(e,t){return t.length-e.length}).map(Ve).join("|")+")($|["+qe.split("").map(Ve).join("")+"])",e.env.abbrRegExp=new RegExp(f,"g")),c=e.env.abbrRegExp,n=0,r=p.length;n<r;n++)if("inline"===p[n].type)for(t=(i=p[n].children).length-1;t>=0;t--)if("text"===(a=i[t]).type){for(l=0,o=a.content,c.lastIndex=0,u=a.level,s=[];d=c.exec(o);)c.lastIndex>l&&s.push({type:"text",content:o.slice(l,d.index+d[1].length),level:u}),s.push({type:"abbr_open",title:e.env.abbreviations[":"+d[2]],level:u++}),s.push({type:"text",content:d[2],level:u}),s.push({type:"abbr_close",level:--u}),l=c.lastIndex-d[3].length;s.length&&(l<o.length&&s.push({type:"text",content:o.slice(l),level:u}),p[n].children=i=[].concat(i.slice(0,t),s,i.slice(t+1)))}}],["replacements",function(e){var t,n,r,i,a;if(e.options.typographer)for(a=e.tokens.length-1;a>=0;a--)if("inline"===e.tokens[a].type)for(t=(i=e.tokens[a].children).length-1;t>=0;t--)"text"===(n=i[t]).type&&(r=Je(r=n.content),Ge.test(r)&&(r=r.replace(/\+-/g,"\xb1").replace(/\.{2,}/g,"\u2026").replace(/([?!])\u2026/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/gm,"$1\u2014$2").replace(/(^|\s)--(\s|$)/gm,"$1\u2013$2").replace(/(^|[^-\s])--([^-\s]|$)/gm,"$1\u2013$2")),n.content=r)}],["smartquotes",function(e){var t,n,r,i,a,o,s,l,u,c,d,f,p,h,m,v,g;if(e.options.typographer)for(g=[],m=e.tokens.length-1;m>=0;m--)if("inline"===e.tokens[m].type)for(v=e.tokens[m].children,g.length=0,t=0;t<v.length;t++)if("text"===(n=v[t]).type&&!$e.test(n.text)){for(s=v[t].level,p=g.length-1;p>=0&&!(g[p].level<=s);p--);g.length=p+1,a=0,o=(r=n.content).length;e:for(;a<o&&(Xe.lastIndex=a,i=Xe.exec(r),i);)if(l=!Qe(r,i.index-1),a=i.index+1,h="'"===i[0],(u=!Qe(r,a))||l){if(d=!u,f=!l)for(p=g.length-1;p>=0&&(c=g[p],!(g[p].level<s));p--)if(c.single===h&&g[p].level===s){c=g[p],h?(v[c.token].content=Ze(v[c.token].content,c.pos,e.options.quotes[2]),n.content=Ze(n.content,i.index,e.options.quotes[3])):(v[c.token].content=Ze(v[c.token].content,c.pos,e.options.quotes[0]),n.content=Ze(n.content,i.index,e.options.quotes[1])),g.length=p;continue e}d?g.push({token:t,pos:i.index,single:h,level:s}):f&&h&&(n.content=Ze(n.content,i.index,"\u2019"))}else h&&(n.content=Ze(n.content,i.index,"\u2019"))}}]];function tt(){this.options={},this.ruler=new Pe;for(var e=0;e<et.length;e++)this.ruler.push(et[e][0],et[e][1])}function nt(e,t,n,r,i){var a,o,s,l,u,c,d;for(this.src=e,this.parser=t,this.options=n,this.env=r,this.tokens=i,this.bMarks=[],this.eMarks=[],this.tShift=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",c=0,d=!1,s=l=c=0,u=(o=this.src).length;l<u;l++){if(a=o.charCodeAt(l),!d){if(32===a){c++;continue}d=!0}(10===a||l===u-1)&&(10!==a&&l++,this.bMarks.push(s),this.eMarks.push(l),this.tShift.push(c),d=!1,c=0,s=l+1)}this.bMarks.push(o.length),this.eMarks.push(o.length),this.tShift.push(0),this.lineMax=this.bMarks.length-1}function rt(e,t){var n,r,i;return(r=e.bMarks[t]+e.tShift[t])>=(i=e.eMarks[t])||42!==(n=e.src.charCodeAt(r++))&&45!==n&&43!==n||r<i&&32!==e.src.charCodeAt(r)?-1:r}function it(e,t){var n,r=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(r+1>=i||((n=e.src.charCodeAt(r++))<48||n>57))return-1;for(;;){if(r>=i)return-1;if(!((n=e.src.charCodeAt(r++))>=48&&n<=57)){if(41===n||46===n)break;return-1}}return r<i&&32!==e.src.charCodeAt(r)?-1:r}tt.prototype.process=function(e){var t,n,r;for(t=0,n=(r=this.ruler.getRules("")).length;t<n;t++)r[t](e)},nt.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]},nt.prototype.skipEmptyLines=function(e){for(var t=this.lineMax;e<t&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e},nt.prototype.skipSpaces=function(e){for(var t=this.src.length;e<t&&32===this.src.charCodeAt(e);e++);return e},nt.prototype.skipChars=function(e,t){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===t;e++);return e},nt.prototype.skipCharsBack=function(e,t,n){if(e<=n)return e;for(;e>n;)if(t!==this.src.charCodeAt(--e))return e+1;return e},nt.prototype.getLines=function(e,t,n,r){var i,a,o,s,l,u=e;if(e>=t)return"";if(u+1===t)return a=this.bMarks[u]+Math.min(this.tShift[u],n),o=r?this.eMarks[u]+1:this.eMarks[u],this.src.slice(a,o);for(s=new Array(t-e),i=0;u<t;u++,i++)(l=this.tShift[u])>n&&(l=n),l<0&&(l=0),a=this.bMarks[u]+l,o=u+1<t||r?this.eMarks[u]+1:this.eMarks[u],s[i]=this.src.slice(a,o);return s.join("")};var at={};["article","aside","button","blockquote","body","canvas","caption","col","colgroup","dd","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","li","map","object","ol","output","p","pre","progress","script","section","style","table","tbody","td","textarea","tfoot","th","tr","thead","ul","video"].forEach(function(e){at[e]=!0});var ot=/^<([a-zA-Z]{1,15})[\s\/>]/,st=/^<\/([a-zA-Z]{1,15})[\s>]/;function lt(e,t){var n=e.bMarks[t]+e.blkIndent,r=e.eMarks[t];return e.src.substr(n,r-n)}function ut(e,t){var n,r,i=e.bMarks[t]+e.tShift[t],a=e.eMarks[t];return i>=a||126!==(r=e.src.charCodeAt(i++))&&58!==r||i===(n=e.skipSpaces(i))||n>=a?-1:n}var ct=[["code",function(e,t,n){var r,i;if(e.tShift[t]-e.blkIndent<4)return!1;for(i=r=t+1;r<n;)if(e.isEmpty(r))r++;else{if(!(e.tShift[r]-e.blkIndent>=4))break;i=++r}return e.line=r,e.tokens.push({type:"code",content:e.getLines(t,i,4+e.blkIndent,!0),block:!0,lines:[t,e.line],level:e.level}),!0}],["fences",function(e,t,n,r){var i,a,o,s,l,u=!1,c=e.bMarks[t]+e.tShift[t],d=e.eMarks[t];if(c+3>d||126!==(i=e.src.charCodeAt(c))&&96!==i||(l=c,(a=(c=e.skipChars(c,i))-l)<3)||(o=e.src.slice(c,d).trim()).indexOf("`")>=0)return!1;if(r)return!0;for(s=t;!(++s>=n||(c=l=e.bMarks[s]+e.tShift[s],d=e.eMarks[s],c<d&&e.tShift[s]<e.blkIndent));)if(e.src.charCodeAt(c)===i&&!(e.tShift[s]-e.blkIndent>=4)&&(!((c=e.skipChars(c,i))-l<a)&&!((c=e.skipSpaces(c))<d))){u=!0;break}return a=e.tShift[t],e.line=s+(u?1:0),e.tokens.push({type:"fence",params:o,content:e.getLines(t+1,s,a,!0),lines:[t,e.line],level:e.level}),!0},["paragraph","blockquote","list"]],["blockquote",function(e,t,n,r){var i,a,o,s,l,u,c,d,f,p,h,m=e.bMarks[t]+e.tShift[t],v=e.eMarks[t];if(m>v||62!==e.src.charCodeAt(m++)||e.level>=e.options.maxNesting)return!1;if(r)return!0;for(32===e.src.charCodeAt(m)&&m++,l=e.blkIndent,e.blkIndent=0,s=[e.bMarks[t]],e.bMarks[t]=m,a=(m=m<v?e.skipSpaces(m):m)>=v,o=[e.tShift[t]],e.tShift[t]=m-e.bMarks[t],d=e.parser.ruler.getRules("blockquote"),i=t+1;i<n&&!((m=e.bMarks[i]+e.tShift[i])>=(v=e.eMarks[i]));i++)if(62!==e.src.charCodeAt(m++)){if(a)break;for(h=!1,f=0,p=d.length;f<p;f++)if(d[f](e,i,n,!0)){h=!0;break}if(h)break;s.push(e.bMarks[i]),o.push(e.tShift[i]),e.tShift[i]=-1337}else 32===e.src.charCodeAt(m)&&m++,s.push(e.bMarks[i]),e.bMarks[i]=m,a=(m=m<v?e.skipSpaces(m):m)>=v,o.push(e.tShift[i]),e.tShift[i]=m-e.bMarks[i];for(u=e.parentType,e.parentType="blockquote",e.tokens.push({type:"blockquote_open",lines:c=[t,0],level:e.level++}),e.parser.tokenize(e,t,i),e.tokens.push({type:"blockquote_close",level:--e.level}),e.parentType=u,c[1]=e.line,f=0;f<o.length;f++)e.bMarks[f+t]=s[f],e.tShift[f+t]=o[f];return e.blkIndent=l,!0},["paragraph","blockquote","list"]],["hr",function(e,t,n,r){var i,a,o,s=e.bMarks[t],l=e.eMarks[t];if((s+=e.tShift[t])>l||42!==(i=e.src.charCodeAt(s++))&&45!==i&&95!==i)return!1;for(a=1;s<l;){if((o=e.src.charCodeAt(s++))!==i&&32!==o)return!1;o===i&&a++}return!(a<3)&&(r||(e.line=t+1,e.tokens.push({type:"hr",lines:[t,e.line],level:e.level})),!0)},["paragraph","blockquote","list"]],["list",function(e,t,n,r){var i,a,o,s,l,u,c,d,f,p,h,m,v,g,y,b,k,S,_,E,w,x=!0;if((d=it(e,t))>=0)m=!0;else{if(!((d=rt(e,t))>=0))return!1;m=!1}if(e.level>=e.options.maxNesting)return!1;if(h=e.src.charCodeAt(d-1),r)return!0;for(g=e.tokens.length,m?(c=e.bMarks[t]+e.tShift[t],p=Number(e.src.substr(c,d-c-1)),e.tokens.push({type:"ordered_list_open",order:p,lines:b=[t,0],level:e.level++})):e.tokens.push({type:"bullet_list_open",lines:b=[t,0],level:e.level++}),i=t,y=!1,S=e.parser.ruler.getRules("list");i<n&&((f=(v=e.skipSpaces(d))>=e.eMarks[i]?1:v-d)>4&&(f=1),f<1&&(f=1),a=d-e.bMarks[i]+f,e.tokens.push({type:"list_item_open",lines:k=[t,0],level:e.level++}),s=e.blkIndent,l=e.tight,o=e.tShift[t],u=e.parentType,e.tShift[t]=v-e.bMarks[t],e.blkIndent=a,e.tight=!0,e.parentType="list",e.parser.tokenize(e,t,n,!0),(!e.tight||y)&&(x=!1),y=e.line-t>1&&e.isEmpty(e.line-1),e.blkIndent=s,e.tShift[t]=o,e.tight=l,e.parentType=u,e.tokens.push({type:"list_item_close",level:--e.level}),i=t=e.line,k[1]=i,v=e.bMarks[t],!(i>=n||e.isEmpty(i)||e.tShift[i]<e.blkIndent));){for(w=!1,_=0,E=S.length;_<E;_++)if(S[_](e,i,n,!0)){w=!0;break}if(w)break;if(m){if((d=it(e,i))<0)break}else if((d=rt(e,i))<0)break;if(h!==e.src.charCodeAt(d-1))break}return e.tokens.push({type:m?"ordered_list_close":"bullet_list_close",level:--e.level}),b[1]=i,e.line=i,x&&function(e,t){var n,r,i=e.level+2;for(n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===i&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].tight=!0,e.tokens[n].tight=!0,n+=2)}(e,g),!0},["paragraph","blockquote"]],["footnote",function(e,t,n,r){var i,a,o,s,l,u=e.bMarks[t]+e.tShift[t],c=e.eMarks[t];if(u+4>c||91!==e.src.charCodeAt(u)||94!==e.src.charCodeAt(u+1)||e.level>=e.options.maxNesting)return!1;for(s=u+2;s<c;s++){if(32===e.src.charCodeAt(s))return!1;if(93===e.src.charCodeAt(s))break}return!(s===u+2||s+1>=c||58!==e.src.charCodeAt(++s))&&(r||(s++,e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.refs||(e.env.footnotes.refs={}),l=e.src.slice(u+2,s-2),e.env.footnotes.refs[":"+l]=-1,e.tokens.push({type:"footnote_reference_open",label:l,level:e.level++}),i=e.bMarks[t],a=e.tShift[t],o=e.parentType,e.tShift[t]=e.skipSpaces(s)-s,e.bMarks[t]=s,e.blkIndent+=4,e.parentType="footnote",e.tShift[t]<e.blkIndent&&(e.tShift[t]+=e.blkIndent,e.bMarks[t]-=e.blkIndent),e.parser.tokenize(e,t,n,!0),e.parentType=o,e.blkIndent-=4,e.tShift[t]=a,e.bMarks[t]=i,e.tokens.push({type:"footnote_reference_close",level:--e.level})),!0)},["paragraph"]],["heading",function(e,t,n,r){var i,a,o,s=e.bMarks[t]+e.tShift[t],l=e.eMarks[t];if(s>=l||(35!==(i=e.src.charCodeAt(s))||s>=l))return!1;for(a=1,i=e.src.charCodeAt(++s);35===i&&s<l&&a<=6;)a++,i=e.src.charCodeAt(++s);return!(a>6||s<l&&32!==i)&&(r||(l=e.skipCharsBack(l,32,s),(o=e.skipCharsBack(l,35,s))>s&&32===e.src.charCodeAt(o-1)&&(l=o),e.line=t+1,e.tokens.push({type:"heading_open",hLevel:a,lines:[t,e.line],level:e.level}),s<l&&e.tokens.push({type:"inline",content:e.src.slice(s,l).trim(),level:e.level+1,lines:[t,e.line],children:[]}),e.tokens.push({type:"heading_close",hLevel:a,level:e.level})),!0)},["paragraph","blockquote"]],["lheading",function(e,t,n){var r,i,a,o=t+1;return!(o>=n||e.tShift[o]<e.blkIndent||e.tShift[o]-e.blkIndent>3||(i=e.bMarks[o]+e.tShift[o],a=e.eMarks[o],i>=a)||(r=e.src.charCodeAt(i),45!==r&&61!==r)||(i=e.skipChars(i,r),i=e.skipSpaces(i),i<a))&&(i=e.bMarks[t]+e.tShift[t],e.line=o+1,e.tokens.push({type:"heading_open",hLevel:61===r?1:2,lines:[t,e.line],level:e.level}),e.tokens.push({type:"inline",content:e.src.slice(i,e.eMarks[t]).trim(),level:e.level+1,lines:[t,e.line-1],children:[]}),e.tokens.push({type:"heading_close",hLevel:61===r?1:2,level:e.level}),!0)}],["htmlblock",function(e,t,n,r){var i,a,o,s=e.bMarks[t],l=e.eMarks[t],u=e.tShift[t];if(s+=u,!e.options.html||u>3||s+2>=l||60!==e.src.charCodeAt(s))return!1;if(33===(i=e.src.charCodeAt(s+1))||63===i){if(r)return!0}else{if(47!==i&&!function(e){var t=32|e;return t>=97&&t<=122}(i))return!1;if(47===i){if(!(a=e.src.slice(s,l).match(st)))return!1}else if(!(a=e.src.slice(s,l).match(ot)))return!1;if(!0!==at[a[1].toLowerCase()])return!1;if(r)return!0}for(o=t+1;o<e.lineMax&&!e.isEmpty(o);)o++;return e.line=o,e.tokens.push({type:"htmlblock",level:e.level,lines:[t,e.line],content:e.getLines(t,o,0,!0)}),!0},["paragraph","blockquote"]],["table",function(e,t,n,r){var i,a,o,s,l,u,c,d,f,p,h;if(t+2>n||(l=t+1,e.tShift[l]<e.blkIndent)||(o=e.bMarks[l]+e.tShift[l])>=e.eMarks[l]||124!==(i=e.src.charCodeAt(o))&&45!==i&&58!==i||(a=lt(e,t+1),!/^[-:| ]+$/.test(a))||(u=a.split("|"))<=2)return!1;for(d=[],s=0;s<u.length;s++){if(!(f=u[s].trim())){if(0===s||s===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(f))return!1;58===f.charCodeAt(f.length-1)?d.push(58===f.charCodeAt(0)?"center":"right"):58===f.charCodeAt(0)?d.push("left"):d.push("")}if(-1===(a=lt(e,t).trim()).indexOf("|")||(u=a.replace(/^\||\|$/g,"").split("|"),d.length!==u.length))return!1;if(r)return!0;for(e.tokens.push({type:"table_open",lines:p=[t,0],level:e.level++}),e.tokens.push({type:"thead_open",lines:[t,t+1],level:e.level++}),e.tokens.push({type:"tr_open",lines:[t,t+1],level:e.level++}),s=0;s<u.length;s++)e.tokens.push({type:"th_open",align:d[s],lines:[t,t+1],level:e.level++}),e.tokens.push({type:"inline",content:u[s].trim(),lines:[t,t+1],level:e.level,children:[]}),e.tokens.push({type:"th_close",level:--e.level});for(e.tokens.push({type:"tr_close",level:--e.level}),e.tokens.push({type:"thead_close",level:--e.level}),e.tokens.push({type:"tbody_open",lines:h=[t+2,0],level:e.level++}),l=t+2;l<n&&!(e.tShift[l]<e.blkIndent||(a=lt(e,l).trim(),-1===a.indexOf("|")));l++){for(u=a.replace(/^\||\|$/g,"").split("|"),e.tokens.push({type:"tr_open",level:e.level++}),s=0;s<u.length;s++)e.tokens.push({type:"td_open",align:d[s],level:e.level++}),c=u[s].substring(124===u[s].charCodeAt(0)?1:0,124===u[s].charCodeAt(u[s].length-1)?u[s].length-1:u[s].length).trim(),e.tokens.push({type:"inline",content:c,level:e.level,children:[]}),e.tokens.push({type:"td_close",level:--e.level});e.tokens.push({type:"tr_close",level:--e.level})}return e.tokens.push({type:"tbody_close",level:--e.level}),e.tokens.push({type:"table_close",level:--e.level}),p[1]=h[1]=l,e.line=l,!0},["paragraph"]],["deflist",function(e,t,n,r){var i,a,o,s,l,u,c,d,f,p,h,m,v,g;if(r)return!(e.ddIndent<0)&&ut(e,t)>=0;if(c=t+1,e.isEmpty(c)&&++c>n||e.tShift[c]<e.blkIndent||(i=ut(e,c))<0||e.level>=e.options.maxNesting)return!1;u=e.tokens.length,e.tokens.push({type:"dl_open",lines:l=[t,0],level:e.level++}),o=t,a=c;e:for(;;){for(g=!0,v=!1,e.tokens.push({type:"dt_open",lines:[o,o],level:e.level++}),e.tokens.push({type:"inline",content:e.getLines(o,o+1,e.blkIndent,!1).trim(),level:e.level+1,lines:[o,o],children:[]}),e.tokens.push({type:"dt_close",level:--e.level});;){if(e.tokens.push({type:"dd_open",lines:s=[c,0],level:e.level++}),m=e.tight,f=e.ddIndent,d=e.blkIndent,h=e.tShift[a],p=e.parentType,e.blkIndent=e.ddIndent=e.tShift[a]+2,e.tShift[a]=i-e.bMarks[a],e.tight=!0,e.parentType="deflist",e.parser.tokenize(e,a,n,!0),(!e.tight||v)&&(g=!1),v=e.line-a>1&&e.isEmpty(e.line-1),e.tShift[a]=h,e.tight=m,e.parentType=p,e.blkIndent=d,e.ddIndent=f,e.tokens.push({type:"dd_close",level:--e.level}),s[1]=c=e.line,c>=n||e.tShift[c]<e.blkIndent)break e;if((i=ut(e,c))<0)break;a=c}if(c>=n||(o=c,e.isEmpty(o))||e.tShift[o]<e.blkIndent||(a=o+1)>=n||(e.isEmpty(a)&&a++,a>=n)||e.tShift[a]<e.blkIndent||(i=ut(e,a))<0)break}return e.tokens.push({type:"dl_close",level:--e.level}),l[1]=c,e.line=c,g&&function(e,t){var n,r,i=e.level+2;for(n=t+2,r=e.tokens.length-2;n<r;n++)e.tokens[n].level===i&&"paragraph_open"===e.tokens[n].type&&(e.tokens[n+2].tight=!0,e.tokens[n].tight=!0,n+=2)}(e,u),!0},["paragraph"]],["paragraph",function(e,t){var n,r,i,a,o,s,l=t+1;if(l<(n=e.lineMax)&&!e.isEmpty(l))for(s=e.parser.ruler.getRules("paragraph");l<n&&!e.isEmpty(l);l++)if(!(e.tShift[l]-e.blkIndent>3)){for(i=!1,a=0,o=s.length;a<o;a++)if(s[a](e,l,n,!0)){i=!0;break}if(i)break}return r=e.getLines(t,l,e.blkIndent,!1).trim(),e.line=l,r.length&&(e.tokens.push({type:"paragraph_open",tight:!1,lines:[t,e.line],level:e.level}),e.tokens.push({type:"inline",content:r,level:e.level+1,lines:[t,e.line],children:[]}),e.tokens.push({type:"paragraph_close",tight:!1,level:e.level})),!0}]];function dt(){this.ruler=new Pe;for(var e=0;e<ct.length;e++)this.ruler.push(ct[e][0],ct[e][1],{alt:(ct[e][2]||[]).slice()})}dt.prototype.tokenize=function(e,t,n){for(var r,i=this.ruler.getRules(""),a=i.length,o=t,s=!1;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.tShift[o]<e.blkIndent));){for(r=0;r<a&&!i[r](e,o,n,!1);r++);if(e.tight=!s,e.isEmpty(e.line-1)&&(s=!0),(o=e.line)<n&&e.isEmpty(o)){if(s=!0,++o<n&&"list"===e.parentType&&e.isEmpty(o))break;e.line=o}}};var ft=/[\n\t]/g,pt=/\r[\n\u0085]|[\u2424\u2028\u0085]/g,ht=/\u00a0/g;function mt(e){switch(e){case 10:case 92:case 96:case 42:case 95:case 94:case 91:case 93:case 33:case 38:case 60:case 62:case 123:case 125:case 36:case 37:case 64:case 126:case 43:case 61:case 58:return!0;default:return!1}}dt.prototype.parse=function(e,t,n,r){var i,a=0,o=0;if(!e)return[];(e=(e=e.replace(ht," ")).replace(pt,"\n")).indexOf("\t")>=0&&(e=e.replace(ft,function(t,n){var r;return 10===e.charCodeAt(n)?(a=n+1,o=0,t):(r="    ".slice((n-a-o)%4),o=n-a+1,r)})),i=new nt(e,this,t,n,r),this.tokenize(i,i.line,i.lineMax)};for(var vt=[],gt=0;gt<256;gt++)vt.push(0);function yt(e){return e>=48&&e<=57||e>=65&&e<=90||e>=97&&e<=122}function bt(e,t){var n,r,i,a=t,o=!0,s=!0,l=e.posMax,u=e.src.charCodeAt(t);for(n=t>0?e.src.charCodeAt(t-1):-1;a<l&&e.src.charCodeAt(a)===u;)a++;return a>=l&&(o=!1),(i=a-t)>=4?o=s=!1:((32===(r=a<l?e.src.charCodeAt(a):-1)||10===r)&&(o=!1),(32===n||10===n)&&(s=!1),95===u&&(yt(n)&&(o=!1),yt(r)&&(s=!1))),{can_open:o,can_close:s,delims:i}}"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){vt[e.charCodeAt(0)]=1});var kt=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;var St=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;var _t=["coap","doi","javascript","aaa","aaas","about","acap","cap","cid","crid","data","dav","dict","dns","file","ftp","geo","go","gopher","h323","http","https","iax","icap","im","imap","info","ipp","iris","iris.beep","iris.xpc","iris.xpcs","iris.lwz","ldap","mailto","mid","msrp","msrps","mtqp","mupdate","news","nfs","ni","nih","nntp","opaquelocktoken","pop","pres","rtsp","service","session","shttp","sieve","sip","sips","sms","snmp","soap.beep","soap.beeps","tag","tel","telnet","tftp","thismessage","tn3270","tip","tv","urn","vemmi","ws","wss","xcon","xcon-userid","xmlrpc.beep","xmlrpc.beeps","xmpp","z39.50r","z39.50s","adiumxtra","afp","afs","aim","apt","attachment","aw","beshare","bitcoin","bolo","callto","chrome","chrome-extension","com-eventbrite-attendee","content","cvs","dlna-playsingle","dlna-playcontainer","dtn","dvb","ed2k","facetime","feed","finger","fish","gg","git","gizmoproject","gtalk","hcp","icon","ipn","irc","irc6","ircs","itms","jar","jms","keyparc","lastfm","ldaps","magnet","maps","market","message","mms","ms-help","msnim","mumble","mvn","notes","oid","palm","paparazzi","platform","proxy","psyc","query","res","resource","rmi","rsync","rtmp","secondlife","sftp","sgn","skype","smb","soldat","spotify","ssh","steam","svn","teamspeak","things","udp","unreal","ut2004","ventrilo","view-source","webcal","wtai","wyciwyg","xfire","xri","ymsgr"],Et=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,wt=/^<([a-zA-Z.\-]{1,25}):([^<>\x00-\x20]*)>/;function xt(e,t){return e=e.source,t=t||"",function n(r,i){return r?(i=i.source||i,e=e.replace(r,i),n):new RegExp(e,t)}}var Ct=xt(/(?:unquoted|single_quoted|double_quoted)/)("unquoted",/[^"'=<>`\x00-\x20]+/)("single_quoted",/'[^']*'/)("double_quoted",/"[^"]*"/)(),Tt=xt(/(?:\s+attr_name(?:\s*=\s*attr_value)?)/)("attr_name",/[a-zA-Z_:][a-zA-Z0-9:._-]*/)("attr_value",Ct)(),At=xt(/<[A-Za-z][A-Za-z0-9]*attribute*\s*\/?>/)("attribute",Tt)(),Mt=xt(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)("open_tag",At)("close_tag",/<\/[A-Za-z][A-Za-z0-9]*\s*>/)("comment",/<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/)("processing",/<[?].*?[?]>/)("declaration",/<![A-Z]+\s+[^>]*>/)("cdata",/<!\[CDATA\[[\s\S]*?\]\]>/)();var Lt=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,Rt=/^&([a-z][a-z0-9]{1,31});/i;var It=[["text",function(e,t){for(var n=e.pos;n<e.posMax&&!mt(e.src.charCodeAt(n));)n++;return n!==e.pos&&(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}],["newline",function(e,t){var n,r,i=e.pos;if(10!==e.src.charCodeAt(i))return!1;if(n=e.pending.length-1,r=e.posMax,!t)if(n>=0&&32===e.pending.charCodeAt(n))if(n>=1&&32===e.pending.charCodeAt(n-1)){for(var a=n-2;a>=0;a--)if(32!==e.pending.charCodeAt(a)){e.pending=e.pending.substring(0,a+1);break}e.push({type:"hardbreak",level:e.level})}else e.pending=e.pending.slice(0,-1),e.push({type:"softbreak",level:e.level});else e.push({type:"softbreak",level:e.level});for(i++;i<r&&32===e.src.charCodeAt(i);)i++;return e.pos=i,!0}],["escape",function(e,t){var n,r=e.pos,i=e.posMax;if(92!==e.src.charCodeAt(r))return!1;if(++r<i){if((n=e.src.charCodeAt(r))<256&&0!==vt[n])return t||(e.pending+=e.src[r]),e.pos+=2,!0;if(10===n){for(t||e.push({type:"hardbreak",level:e.level}),r++;r<i&&32===e.src.charCodeAt(r);)r++;return e.pos=r,!0}}return t||(e.pending+="\\"),e.pos++,!0}],["backticks",function(e,t){var n,r,i,a,o,s=e.pos;if(96!==e.src.charCodeAt(s))return!1;for(n=s,s++,r=e.posMax;s<r&&96===e.src.charCodeAt(s);)s++;for(i=e.src.slice(n,s),a=o=s;-1!==(a=e.src.indexOf("`",o));){for(o=a+1;o<r&&96===e.src.charCodeAt(o);)o++;if(o-a===i.length)return t||e.push({type:"code",content:e.src.slice(s,a).replace(/[ \n]+/g," ").trim(),block:!1,level:e.level}),e.pos=o,!0}return t||(e.pending+=i),e.pos+=i.length,!0}],["del",function(e,t){var n,r,i,a,o,s=e.posMax,l=e.pos;if(126!==e.src.charCodeAt(l)||t||l+4>=s||126!==e.src.charCodeAt(l+1)||e.level>=e.options.maxNesting||(a=l>0?e.src.charCodeAt(l-1):-1,o=e.src.charCodeAt(l+2),126===a)||126===o||32===o||10===o)return!1;for(r=l+2;r<s&&126===e.src.charCodeAt(r);)r++;if(r>l+3)return e.pos+=r-l,t||(e.pending+=e.src.slice(l,r)),!0;for(e.pos=l+2,i=1;e.pos+1<s;){if(126===e.src.charCodeAt(e.pos)&&126===e.src.charCodeAt(e.pos+1)&&(a=e.src.charCodeAt(e.pos-1),126!==(o=e.pos+2<s?e.src.charCodeAt(e.pos+2):-1)&&126!==a&&(32!==a&&10!==a?i--:32!==o&&10!==o&&i++,i<=0))){n=!0;break}e.parser.skipToken(e)}return n?(e.posMax=e.pos,e.pos=l+2,t||(e.push({type:"del_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"del_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=s,!0):(e.pos=l,!1)}],["ins",function(e,t){var n,r,i,a,o,s=e.posMax,l=e.pos;if(43!==e.src.charCodeAt(l)||t||l+4>=s||43!==e.src.charCodeAt(l+1)||e.level>=e.options.maxNesting||(a=l>0?e.src.charCodeAt(l-1):-1,o=e.src.charCodeAt(l+2),43===a)||43===o||32===o||10===o)return!1;for(r=l+2;r<s&&43===e.src.charCodeAt(r);)r++;if(r!==l+2)return e.pos+=r-l,t||(e.pending+=e.src.slice(l,r)),!0;for(e.pos=l+2,i=1;e.pos+1<s;){if(43===e.src.charCodeAt(e.pos)&&43===e.src.charCodeAt(e.pos+1)&&(a=e.src.charCodeAt(e.pos-1),43!==(o=e.pos+2<s?e.src.charCodeAt(e.pos+2):-1)&&43!==a&&(32!==a&&10!==a?i--:32!==o&&10!==o&&i++,i<=0))){n=!0;break}e.parser.skipToken(e)}return n?(e.posMax=e.pos,e.pos=l+2,t||(e.push({type:"ins_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"ins_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=s,!0):(e.pos=l,!1)}],["mark",function(e,t){var n,r,i,a,o,s=e.posMax,l=e.pos;if(61!==e.src.charCodeAt(l)||t||l+4>=s||61!==e.src.charCodeAt(l+1)||e.level>=e.options.maxNesting||(a=l>0?e.src.charCodeAt(l-1):-1,o=e.src.charCodeAt(l+2),61===a)||61===o||32===o||10===o)return!1;for(r=l+2;r<s&&61===e.src.charCodeAt(r);)r++;if(r!==l+2)return e.pos+=r-l,t||(e.pending+=e.src.slice(l,r)),!0;for(e.pos=l+2,i=1;e.pos+1<s;){if(61===e.src.charCodeAt(e.pos)&&61===e.src.charCodeAt(e.pos+1)&&(a=e.src.charCodeAt(e.pos-1),61!==(o=e.pos+2<s?e.src.charCodeAt(e.pos+2):-1)&&61!==a&&(32!==a&&10!==a?i--:32!==o&&10!==o&&i++,i<=0))){n=!0;break}e.parser.skipToken(e)}return n?(e.posMax=e.pos,e.pos=l+2,t||(e.push({type:"mark_open",level:e.level++}),e.parser.tokenize(e),e.push({type:"mark_close",level:--e.level})),e.pos=e.posMax+2,e.posMax=s,!0):(e.pos=l,!1)}],["emphasis",function(e,t){var n,r,i,a,o,s,l,u=e.posMax,c=e.pos,d=e.src.charCodeAt(c);if(95!==d&&42!==d||t)return!1;if(n=(l=bt(e,c)).delims,!l.can_open)return e.pos+=n,t||(e.pending+=e.src.slice(c,e.pos)),!0;if(e.level>=e.options.maxNesting)return!1;for(e.pos=c+n,s=[n];e.pos<u;)if(e.src.charCodeAt(e.pos)!==d)e.parser.skipToken(e);else{if(r=(l=bt(e,e.pos)).delims,l.can_close){for(a=s.pop(),o=r;a!==o;){if(o<a){s.push(a-o);break}if(o-=a,0===s.length)break;e.pos+=a,a=s.pop()}if(0===s.length){n=a,i=!0;break}e.pos+=r;continue}l.can_open&&s.push(r),e.pos+=r}return i?(e.posMax=e.pos,e.pos=c+n,t||((2===n||3===n)&&e.push({type:"strong_open",level:e.level++}),(1===n||3===n)&&e.push({type:"em_open",level:e.level++}),e.parser.tokenize(e),(1===n||3===n)&&e.push({type:"em_close",level:--e.level}),(2===n||3===n)&&e.push({type:"strong_close",level:--e.level})),e.pos=e.posMax+n,e.posMax=u,!0):(e.pos=c,!1)}],["sub",function(e,t){var n,r,i=e.posMax,a=e.pos;if(126!==e.src.charCodeAt(a)||t||a+2>=i||e.level>=e.options.maxNesting)return!1;for(e.pos=a+1;e.pos<i;){if(126===e.src.charCodeAt(e.pos)){n=!0;break}e.parser.skipToken(e)}return!n||a+1===e.pos||(r=e.src.slice(a+1,e.pos)).match(/(^|[^\\])(\\\\)*\s/)?(e.pos=a,!1):(e.posMax=e.pos,e.pos=a+1,t||e.push({type:"sub",level:e.level,content:r.replace(kt,"$1")}),e.pos=e.posMax+1,e.posMax=i,!0)}],["sup",function(e,t){var n,r,i=e.posMax,a=e.pos;if(94!==e.src.charCodeAt(a)||t||a+2>=i||e.level>=e.options.maxNesting)return!1;for(e.pos=a+1;e.pos<i;){if(94===e.src.charCodeAt(e.pos)){n=!0;break}e.parser.skipToken(e)}return!n||a+1===e.pos||(r=e.src.slice(a+1,e.pos)).match(/(^|[^\\])(\\\\)*\s/)?(e.pos=a,!1):(e.posMax=e.pos,e.pos=a+1,t||e.push({type:"sup",level:e.level,content:r.replace(St,"$1")}),e.pos=e.posMax+1,e.posMax=i,!0)}],["links",function(e,t){var n,r,i,a,o,s,l,u,c=!1,d=e.pos,f=e.posMax,p=e.pos,h=e.src.charCodeAt(p);if(33===h&&(c=!0,h=e.src.charCodeAt(++p)),91!==h||e.level>=e.options.maxNesting||(n=p+1,(r=De(e,p))<0))return!1;if((s=r+1)<f&&40===e.src.charCodeAt(s)){for(s++;s<f&&(32===(u=e.src.charCodeAt(s))||10===u);s++);if(s>=f)return!1;for(p=s,Ue(e,s)?(a=e.linkContent,s=e.pos):a="",p=s;s<f&&(32===(u=e.src.charCodeAt(s))||10===u);s++);if(s<f&&p!==s&&je(e,s))for(o=e.linkContent,s=e.pos;s<f&&(32===(u=e.src.charCodeAt(s))||10===u);s++);else o="";if(s>=f||41!==e.src.charCodeAt(s))return e.pos=d,!1;s++}else{if(e.linkLevel>0)return!1;for(;s<f&&(32===(u=e.src.charCodeAt(s))||10===u);s++);if(s<f&&91===e.src.charCodeAt(s)&&(p=s+1,(s=De(e,s))>=0?i=e.src.slice(p,s++):s=p-1),i||(w(i)>"u"&&(s=r+1),i=e.src.slice(n,r)),!(l=e.env.references[ze(i)]))return e.pos=d,!1;a=l.href,o=l.title}return t||(e.pos=n,e.posMax=r,c?e.push({type:"image",src:a,title:o,alt:e.src.substr(n,r-n),level:e.level}):(e.push({type:"link_open",href:a,title:o,level:e.level++}),e.linkLevel++,e.parser.tokenize(e),e.linkLevel--,e.push({type:"link_close",level:--e.level}))),e.pos=s,e.posMax=f,!0}],["footnote_inline",function(e,t){var n,r,i,a,o=e.posMax,s=e.pos;return!(s+2>=o||94!==e.src.charCodeAt(s)||91!==e.src.charCodeAt(s+1)||e.level>=e.options.maxNesting||(n=s+2,r=De(e,s+1),r<0))&&(t||(e.env.footnotes||(e.env.footnotes={}),e.env.footnotes.list||(e.env.footnotes.list=[]),i=e.env.footnotes.list.length,e.pos=n,e.posMax=r,e.push({type:"footnote_ref",id:i,level:e.level}),e.linkLevel++,a=e.tokens.length,e.parser.tokenize(e),e.env.footnotes.list[i]={tokens:e.tokens.splice(a)},e.linkLevel--),e.pos=r+1,e.posMax=o,!0)}],["footnote_ref",function(e,t){var n,r,i,a,o=e.posMax,s=e.pos;if(s+3>o||!e.env.footnotes||!e.env.footnotes.refs||91!==e.src.charCodeAt(s)||94!==e.src.charCodeAt(s+1)||e.level>=e.options.maxNesting)return!1;for(r=s+2;r<o;r++){if(32===e.src.charCodeAt(r)||10===e.src.charCodeAt(r))return!1;if(93===e.src.charCodeAt(r))break}return!(r===s+2||r>=o||(r++,n=e.src.slice(s+2,r-1),w(e.env.footnotes.refs[":"+n])>"u"))&&(t||(e.env.footnotes.list||(e.env.footnotes.list=[]),e.env.footnotes.refs[":"+n]<0?(i=e.env.footnotes.list.length,e.env.footnotes.list[i]={label:n,count:0},e.env.footnotes.refs[":"+n]=i):i=e.env.footnotes.refs[":"+n],a=e.env.footnotes.list[i].count,e.env.footnotes.list[i].count++,e.push({type:"footnote_ref",id:i,subId:a,level:e.level})),e.pos=r,e.posMax=o,!0)}],["autolink",function(e,t){var n,r,i,a,o,s=e.pos;return!(60!==e.src.charCodeAt(s)||(n=e.src.slice(s),n.indexOf(">")<0))&&((r=n.match(wt))?!(_t.indexOf(r[1].toLowerCase())<0||(a=r[0].slice(1,-1),o=Fe(a),!e.parser.validateLink(a)))&&(t||(e.push({type:"link_open",href:o,level:e.level}),e.push({type:"text",content:a,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=r[0].length,!0):!!(i=n.match(Et))&&(o=Fe("mailto:"+(a=i[0].slice(1,-1))),!!e.parser.validateLink(o)&&(t||(e.push({type:"link_open",href:o,level:e.level}),e.push({type:"text",content:a,level:e.level+1}),e.push({type:"link_close",level:e.level})),e.pos+=i[0].length,!0)))}],["htmltag",function(e,t){var n,r,i,a=e.pos;return!(!e.options.html||(i=e.posMax,60!==e.src.charCodeAt(a)||a+2>=i)||(n=e.src.charCodeAt(a+1),33!==n&&63!==n&&47!==n&&!function(e){var t=32|e;return t>=97&&t<=122}(n))||(r=e.src.slice(a).match(Mt),!r))&&(t||e.push({type:"htmltag",content:e.src.slice(a,a+r[0].length),level:e.level}),e.pos+=r[0].length,!0)}],["entity",function(e,t){var n,r,i=e.pos,a=e.posMax;if(38!==e.src.charCodeAt(i))return!1;if(i+1<a)if(35===e.src.charCodeAt(i+1)){if(r=e.src.slice(i).match(Lt))return t||(n="x"===r[1][0].toLowerCase()?parseInt(r[1].slice(1),16):parseInt(r[1],10),e.pending+=be(n)?ke(n):ke(65533)),e.pos+=r[0].length,!0}else if(r=e.src.slice(i).match(Rt)){var o=he(r[1]);if(r[1]!==o)return t||(e.pending+=o),e.pos+=r[0].length,!0}return t||(e.pending+="&"),e.pos++,!0}]];function Ot(){this.ruler=new Pe;for(var e=0;e<It.length;e++)this.ruler.push(It[e][0],It[e][1]);this.validateLink=Pt}function Pt(e){var t=e.trim().toLowerCase();return!(-1!==(t=we(t)).indexOf(":")&&-1!==["vbscript","javascript","file","data"].indexOf(t.split(":")[0]))}Ot.prototype.skipToken=function(e){var t,n,r=this.ruler.getRules(""),i=r.length,a=e.pos;if((n=e.cacheGet(a))>0)e.pos=n;else{for(t=0;t<i;t++)if(r[t](e,!0))return void e.cacheSet(a,e.pos);e.pos++,e.cacheSet(a,e.pos)}},Ot.prototype.tokenize=function(e){for(var t,n,r=this.ruler.getRules(""),i=r.length,a=e.posMax;e.pos<a;){for(n=0;n<i&&!(t=r[n](e,!1));n++);if(t){if(e.pos>=a)break}else e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()},Ot.prototype.parse=function(e,t,n,r){var i=new Ne(e,this,t,n,r);this.tokenize(i)};var Nt={default:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","replacements","smartquotes","references","abbr2","footnote_tail"]},block:{rules:["blockquote","code","fences","footnote","heading","hr","htmlblock","lheading","list","paragraph","table"]},inline:{rules:["autolink","backticks","del","emphasis","entity","escape","footnote_ref","htmltag","links","newline","text"]}}},full:{options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{},block:{},inline:{}}},commonmark:{options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"\u201c\u201d\u2018\u2019",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","abbr2"]},block:{rules:["blockquote","code","fences","heading","hr","htmlblock","lheading","list","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","htmltag","links","newline","text"]}}}};function Dt(e,t,n){this.src=t,this.env=n,this.options=e.options,this.tokens=[],this.inlineMode=!1,this.inline=e.inline,this.block=e.block,this.renderer=e.renderer,this.typographer=e.typographer}function Bt(e,t){"string"!=typeof e&&(t=e,e="default"),t&&null!=t.linkify&&console.warn("linkify option is removed. Use linkify plugin instead:\n\nimport Remarkable from 'remarkable';\nimport linkify from 'remarkable/linkify';\nnew Remarkable().use(linkify)\n"),this.inline=new Ot,this.block=new dt,this.core=new tt,this.renderer=new Oe,this.ruler=new Pe,this.options={},this.configure(Nt[e]),this.set(t||{})}Bt.prototype.set=function(e){ve(this.options,e)},Bt.prototype.configure=function(e){var t=this;if(!e)throw new Error("Wrong `remarkable` preset, check name/content");e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enable(e.components[n].rules,!0)})},Bt.prototype.use=function(e,t){return e(this,t),this},Bt.prototype.parse=function(e,t){var n=new Dt(this,e,t);return this.core.process(n),n.tokens},Bt.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)},Bt.prototype.parseInline=function(e,t){var n=new Dt(this,e,t);return n.inlineMode=!0,this.core.process(n),n.tokens},Bt.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};var Ft=function(){function e(){x(this,e)}return T(e,null,[{key:"instantiate",value:function(t){if(t)return new Bt(_(_({},e.DEFAULT_PROPERTIES),t));if(window.hljs){var n=window.hljs;return new Bt({highlight:function(e,t){if(t&&n.getLanguage(t))try{return n.highlight(e,{language:t}).value}catch(r){console.error("failed to setup the highlight dependency")}try{return n.highlightAuto(e).value}catch(i){console.error("failed to automatically highlight messages")}return""},html:!1,xhtmlOut:!1,breaks:!0,langPrefix:"language-",linkTarget:"_blank",typographer:!0})}return new Bt(e.DEFAULT_PROPERTIES)}},{key:"createNew",value:function(t){var n=e.instantiate(t);return n.inline.validateLink=function(){return!0},n}}])}();Ft.DEFAULT_PROPERTIES={breaks:!0,linkTarget:"_blank"};var Ut=Ft,jt=function(){return T(function e(t){x(this,e),this.storageKey="deep-chat-storage",this.maxMessages=1e3,"object"==w(t)&&(t.key&&(this.storageKey=t.key),t.maxMessages&&(this.maxMessages=t.maxMessages),t.clear=this.clear.bind(this))},[{key:"get",value:function(){var e=localStorage.getItem(this.storageKey);return e?JSON.parse(e):[]}},{key:"addMessages",value:function(e){var t=e.length-this.maxMessages;t<0&&(t=0);var n=e.slice(t,e.length);localStorage.setItem(this.storageKey,JSON.stringify(n))}},{key:"clear",value:function(){localStorage.removeItem(this.storageKey)}}])}(),zt=function(){function e(){x(this,e)}return T(e,null,[{key:"applyCustomStylesToElements",value:function(e,t,n){if(n&&(Object.assign(e.outerContainer.style,n.outerContainer),Object.assign(e.innerContainer.style,n.innerContainer),Object.assign(e.bubbleElement.style,n.bubble),t)){var r=e.bubbleElement.children[0],i="a"!==r.tagName.toLocaleLowerCase()?r:r.children[0];Object.assign(i.style,n.media)}}},{key:"applySideStyles",value:function(t,n,r,i){i&&(e.applyCustomStylesToElements(t,r,i.shared),n===tn.USER_ROLE?e.applyCustomStylesToElements(t,r,i.user):(e.applyCustomStylesToElements(t,r,i.ai),e.applyCustomStylesToElements(t,r,i[n])))}},{key:"isElementsStyles",value:function(e){return!!(e.outerContainer||e.innerContainer||e.bubble||e.media)}},{key:"applyCustomStyles",value:function(t,n,r,i,a){var o;a&&t.default!==a?e.isElementsStyles(a)?(e.applyCustomStylesToElements(n,i,null==(o=t.default)?void 0:o.shared),e.applyCustomStylesToElements(n,i,a)):(e.applySideStyles(n,r,i,t.default),e.applySideStyles(n,r,i,a)):e.applySideStyles(n,r,i,t.default)}},{key:"extractParticularSharedStyles",value:function(e,t){if(null!=t&&t.shared){var n=t.shared,r={outerContainer:{},innerContainer:{},bubble:{},media:{}};return e.forEach(function(e){var t,i,a,o;r.outerContainer[e]=(null==(t=n.outerContainer)?void 0:t[e])||"",r.innerContainer[e]=(null==(i=n.innerContainer)?void 0:i[e])||"",r.bubble[e]=(null==(a=n.bubble)?void 0:a[e])||"",r.media[e]=(null==(o=n.media)?void 0:o[e])||""}),r}}}])}(),Ht=function(){return T(function e(){x(this,e)},null,[{key:"onMessage",value:function(e,t,n){var r,i=JSON.parse(JSON.stringify({message:t,isHistory:n,isInitial:n}));ie.reAddFileRefToObject(t,i.message),null==(r=e.onMessage)||r.call(e,i),e.dispatchEvent(new CustomEvent("message",{detail:i})),ae.fireOnNewMessage(e,i)}},{key:"onClearMessages",value:function(e){var t;null==(t=e.onClearMessages)||t.call(e),e.dispatchEvent(new CustomEvent("clear-messages"))}},{key:"onRender",value:function(e){var t;null==(t=e.onComponentRender)||t.call(e,e),e.dispatchEvent(new CustomEvent("render",{detail:e}))}},{key:"onInput",value:function(e,t,n){var r,i,a=JSON.parse(JSON.stringify({content:t,isUser:n}));t.files&&ie.reAddFileRefToObject({files:null==(r=t.files)?void 0:r.map(function(e){return{ref:e}})},a.content),null==(i=e.onInput)||i.call(e,a),e.dispatchEvent(new CustomEvent("input",{detail:a}))}},{key:"onError",value:function(e,t){var n;null==(n=e.onError)||n.call(e,t),e.dispatchEvent(new CustomEvent("error",{detail:t}))}}])}(),qt=function(){function e(){x(this,e)}return T(e,null,[{key:"generateLoadingRingElement",value:function(){var e=document.createElement("div");return e.classList.add("loading-history"),e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),e}},{key:"apply",value:function(e,t,n){ne.setRing(t.bubbleElement,null==n?void 0:n.bubble),null!=n&&n.bubble&&delete(n=JSON.parse(JSON.stringify(n))).bubble,e.applyCustomStyles(t,"history",!1,n)}},{key:"addLoadHistoryMessage",value:function(t,n){var r,i,a,o,s,l,u,c,d=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t.bubbleElement.classList.add(e.CLASS);var f=d?e.FULL_VIEW_CLASS:e.SMALL_CLASS;t.outerContainer.classList.add(f);var p=d?null==(o=null==(a=null==(i=null==(r=n.messageStyles)?void 0:r.loading)?void 0:i.history)?void 0:a.full)?void 0:o.styles:null==(c=null==(u=null==(l=null==(s=n.messageStyles)?void 0:s.loading)?void 0:l.history)?void 0:u.small)?void 0:c.styles;e.apply(n,t,p),n.elementRef.prepend(t.outerContainer)}},{key:"createDefaultElements",value:function(t){var n=t.createMessageElements("",tn.AI_ROLE),r=n.bubbleElement,i=e.generateLoadingRingElement();return r.appendChild(i),n}},{key:"addMessage",value:function(t){var n,r,i,a,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],s=null==(a=null==(i=null==(r=null==(n=t.messageStyles)?void 0:n.loading)?void 0:r.history)?void 0:i.full)?void 0:a.html,l=s?pe.createElements(t,s,tn.AI_ROLE,!0,!0):e.createDefaultElements(t);return e.addLoadHistoryMessage(l,t,o),tn.softRemRoleElements(l.innerContainer,t.avatar,t.name),l}},{key:"tryChangeViewToSmall",value:function(t,n){var r,i,a,o,s,l,u,c;if(null!=n&&n.outerContainer.classList.contains(e.FULL_VIEW_CLASS)){n.outerContainer.classList.replace(e.FULL_VIEW_CLASS,e.SMALL_CLASS);var d=null==(o=null==(a=null==(i=null==(r=t.messageStyles)?void 0:r.loading)?void 0:i.history)?void 0:a.small)?void 0:o.styles;d&&e.apply(t,n,d);var f=null==(c=null==(u=null==(l=null==(s=t.messageStyles)?void 0:s.loading)?void 0:l.history)?void 0:u.small)?void 0:c.html;return f&&(n.bubbleElement.innerHTML=f),!0}return!1}},{key:"changeFullViewToSmall",value:function(t){var n=t.messageElementRefs[t.messageElementRefs.length-1];e.tryChangeViewToSmall(t,n)||e.tryChangeViewToSmall(t,t.messageElementRefs[0])}}])}();qt.CLASS="loading-history-message",qt.FULL_VIEW_CLASS="loading-history-message-full-view",qt.SMALL_CLASS="loading-history-message-small";var Vt=qt,Gt=function(){function e(){x(this,e)}return T(e,null,[{key:"setFade",value:function(t,n){t.style.transitionDuration="".concat("number"==typeof n?n:e.DEFAULT_FADE_MS,"ms")}},{key:"fadeAnimation",value:function(){var t=k(y().mark(function t(n,r){var i;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.style.opacity="0",i="number"==typeof r?r:e.DEFAULT_FADE_MS,t.next=4,new Promise(function(e){setTimeout(function(){return e()},i)});case 4:n.style.opacity="1";case 5:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}])}();Gt.DEFAULT_FADE_MS=500;var Wt=Gt,Kt="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='iso-8859-1'?%3e%3csvg%20fill='%23000000'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20viewBox='0%200%2032%2032'%20xml:space='preserve'%3e%3cpath%20d='M23,30.36H9c-2.404,0-4.36-1.956-4.36-4.36V15c0-2.404,1.956-4.36,4.36-4.36h3.659%20c0.167-1.566,1.415-2.813,2.981-2.981V5.333c-1.131-0.174-2-1.154-2-2.333c0-1.301,1.059-2.36,2.36-2.36%20c1.302,0,2.36,1.059,2.36,2.36c0,1.179-0.869,2.159-2,2.333V7.66c1.566,0.167,2.814,1.415,2.981,2.981H23%20c2.404,0,4.36,1.956,4.36,4.36v11C27.36,28.404,25.404,30.36,23,30.36z%20M9,11.36c-2.007,0-3.64,1.633-3.64,3.64v11%20c0,2.007,1.633,3.64,3.64,3.64h14c2.007,0,3.64-1.633,3.64-3.64V15c0-2.007-1.633-3.64-3.64-3.64H9z%20M13.384,10.64h5.231%20C18.439,9.354,17.334,8.36,16,8.36C14.667,8.36,13.561,9.354,13.384,10.64z%20M16,1.36c-0.904,0-1.64,0.736-1.64,1.64%20S15.096,4.64,16,4.64c0.904,0,1.64-0.736,1.64-1.64S16.904,1.36,16,1.36z%20M20,27.36h-8c-1.301,0-2.36-1.059-2.36-2.36%20s1.059-2.36,2.36-2.36h8c1.302,0,2.36,1.059,2.36,2.36S21.302,27.36,20,27.36z%20M12,23.36c-0.904,0-1.64,0.735-1.64,1.64%20s0.736,1.64,1.64,1.64h8c0.904,0,1.64-0.735,1.64-1.64s-0.735-1.64-1.64-1.64H12z%20M31,23.86h-2c-0.199,0-0.36-0.161-0.36-0.36V15%20c0-0.199,0.161-0.36,0.36-0.36h2c0.199,0,0.36,0.161,0.36,0.36v8.5C31.36,23.699,31.199,23.86,31,23.86z%20M29.36,23.14h1.279v-7.78%20H29.36V23.14z%20M3,23.86H1c-0.199,0-0.36-0.161-0.36-0.36V15c0-0.199,0.161-0.36,0.36-0.36h2c0.199,0,0.36,0.161,0.36,0.36v8.5%20C3.36,23.699,3.199,23.86,3,23.86z%20M1.36,23.14h1.28v-7.78H1.36V23.14z%20M20,20.36c-1.302,0-2.36-1.059-2.36-2.36%20s1.059-2.36,2.36-2.36s2.36,1.059,2.36,2.36C22.36,19.302,21.302,20.36,20,20.36z%20M20,16.36c-0.904,0-1.64,0.736-1.64,1.64%20s0.735,1.64,1.64,1.64s1.64-0.735,1.64-1.64S20.904,16.36,20,16.36z%20M12,20.36c-1.301,0-2.36-1.059-2.36-2.36s1.059-2.36,2.36-2.36%20s2.36,1.059,2.36,2.36C14.36,19.302,13.301,20.36,12,20.36z%20M12,16.36c-0.904,0-1.64,0.736-1.64,1.64s0.736,1.64,1.64,1.64%20s1.64-0.735,1.64-1.64S12.904,16.36,12,16.36z'/%3e%3crect%20style='fill:none;'%20width='32'%20height='32'/%3e%3c/svg%3e",Jt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAMAAAC/MqoPAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAADNQTFRF////9vX18vLy/Pz86enp4+Li2tnZ1tbWzczM+fn57Ozs4N/f09LS0M/P5uXl7+/v3dzcwtncCAAAAAFiS0dEAIgFHUgAAAAJcEhZcwAAAEgAAABIAEbJaz4AAAZNSURBVHja7d3bdtsqEABQYABZSLH9/3+ZpnUsIcF5iOM6PfElNoMHMfPQdq3GmL0GkLhEUqLaUExnOtOZznSmM53pTGc605nOdKYznelMZzrTmV4LXSqllKyJDkob26xWq8Zae/iH0QoWTm9d1xur4WuypQJtTd+5dqn0VjcxzNO5/57mEBvdLo8Oron6aseWOjYOFkVvjQs3DmgyONMuht52EfztP+4hdu0i6LCO808/M8c1lE/fuPGej41uUzgdtoO/75N+2ELJ9I3b3//hPXbiMenm3pR/Jt4USgcLBIp4Bh10gqKVhvLo0klCxeSky96nKcj3siw6pJIL4XsoiQ7apyvMY/V3HHrSRioLopvEhSpTCn2TPEuwKYMOIX0tAxRBf/Hpa+lfSqBv9gi1FPsNfTrMAiVmIE/vJhz61FGnQxRIEYE4vfNYdN8Rp6MlHaHotHTn8ejekaZPAjEmyvQWdZFTtYTpXqCGJ0zvcek9Yfoel76nS0ffv1NMp1ca+pkgyfRCGind4L7OWWc605l+cxjsyhqy9AGbPpClc1/nvl5VX0c/3Alk6RU3+Am7shNZ+h6bvidLr7jBB+zKBrL0irOOudmIUDzTmf5gIP+iEuXtRuTVaEmY/oZLfyNMrzjryPc0gerMTdpVg0tvjJUU6bLPcGOoUv46SLL6Wi8yhLf06C7TUyekI0efRaaYqdFltkeNpPumRPSMDxgBYvSM035FrKAmH72hRW99PrpvSdEHkTEGUvSsK3yKVDkuJ92RohcZaehzzirPpOg+J92Tolfc4Cumx5xVXpGiZ34+ICX6W84qv5GiR5NPbiIpOv6BCoSvSkTX+eiaGP092zINvBOj4x8mSf9FqejvNo/cvpOji19ZbmviL0GPLsYMFzgzCor0+Bv/ePDvSJKOb9dJ5UlnbnEHiHgzv6cdTpJOWuc/u3FEucLDOL75xGtBiefrcwgoC9NDSH/jkH6pAuXmBqPQ9HSUPVdZBH1GGOrMXAQdYxcKZfxAoK+KKBKFLosoEoX+u4giUehz8jlcnAuhp78I46yDYNAd+QLR6K+pr+yvxdBTHyVDubQh0UfSxaHSd0lbvNkVRE87JGOtc+PQd2QLQ6fHhJkKsSh6yg13tO08JPprsgrrXWH0dJd2vH1MLPprot4eXoujpzrdhngiD40ek2y92lggPcnWa8qN1Yz0BFuvZhRl0uOfR0v4Ewuli/Bg4Qr3lArqGdndQ3UPO1EunXYwnelMZzrTmc50pjOd6UxnOtOZznSmM53pTGf6kuj6oedFKV0s3fX6sX1S3bsi6a4PD7+/YAqYeBw6pIB/4qEgOqxdSPbGiim4NRRCbzs3Jj0L4UfXtQXQVRfn5IdA/Bw7RZzurEV6EtdsLeGXkIPuA+K1UoVeA0l62zmN/LqfSSft9KkepmoRuvi3nd5uKNFB9zbbXEANqdr941XO0NJx2v2jdJenpf+/3bvn0ts16ph+sd6hX7dPo2+2cZzE02Ia43bzDHqr+2Evnhz74ZHU30ffbKOeng1/NPV30Ns1gYQnSP2P6e65Pfxc6h02XZqXQCjhJ6kPL6bFo4NrGvAU4UII4SE2P1vQuZkuOxckVfehisF1MjUddN/MZBN+kvq5uf0O/xa66gyNS9ktMWlz44rO1Z8C19i5FPdHzPamXn+F3hryPfxMr78+4F+kq22kO6Rf6fUQt+puuustyWv4rbG3l/duztFB96GYoe1cTBdXMr+nw9qVM6ZfxOvzezff0nXi/ZOndvrR6Zvpm0c3h6nhdb+5iS7tsIim/qXZD9+97/Jf+rpZ5BET1ayv0GUzLhEuhBBjIy/RdVPgndutIRt9nt7p5cKFEEJ3Z+jQFDZL+XnMDXxHB73gxn5s9Kc3d3/pFciFkN/QTSXHJpX5l66gDrkQoP6hL3xsPw39la4qOiV8tH78XeSbue6N9mvWa6J/ybpc1CT1Wnh5Qq9meP8IOKH3ddH7E/ri1iYux/SXDrXR4UiPdck/wUpU+FtPf6/orja6O9KL3l56LOvVxe5Ib2qjN0d6Vbex4ghWlU3bPqI90If66MNng680FNpbJijH6kCvaF3uMzQ3+IrpFerV4Y9dffQdN3im10ivbuImhD3Qq5u4HdZkua8znelMZ/pS4z9CPVKkxowNxgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wMy0yN1QxNTo0NToxNSswMDowMN1xSg4AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDMtMjdUMTU6NDU6MTUrMDA6MDCsLPKyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",$t=function(){return T(function e(t){x(this,e),this.className=t},[{key:"tryHide",value:function(e){var t;(t=e.getElementsByClassName(this.className)[0].style).visibility||(t.visibility="hidden")}},{key:"tryReveal",value:function(e){e.getElementsByClassName(this.className)[0].style.visibility=""}},{key:"trySoftRem",value:function(e){e.getElementsByClassName(this.className)[0].classList.add("role-hidden")}}])}(),Xt=function(e){function t(e){var n;return x(this,t),(n=f(this,t,["avatar-container"]))._avatars=e,n}return v(t,e),T(t,[{key:"addBesideMsg",value:function(e,t){var n="boolean"==typeof this._avatars?void 0:this._avatars,r=this.createAvatar(t,n),i=this.getPosition(t,n);r.classList.add("left"===i?"left-item-position":"right-item-position"),e.insertAdjacentElement("left"===i?"beforebegin":"afterend",r)}},{key:"createAvatar",value:function(e,n){var r,i,a,o,s,l=document.createElement("img");e===tn.USER_ROLE?(l.src=(null==(r=null==n?void 0:n.user)?void 0:r.src)||(null==(i=null==n?void 0:n.default)?void 0:i.src)||Jt,l.onerror=t.errorFallback.bind(this,Jt)):(l.src=(null==(a=null==n?void 0:n[e])?void 0:a.src)||(null==(o=null==n?void 0:n.ai)?void 0:o.src)||(null==(s=null==n?void 0:n.default)?void 0:s.src)||Kt,l.onerror=t.errorFallback.bind(this,Kt)),l.classList.add("avatar"),l.alt="".concat(e," avatar");var u=document.createElement("div");return u.classList.add(this.className),u.appendChild(l),n&&t.applyCustomStyles(u,l,n,e),u}},{key:"getPosition",value:function(e,t){var n,r,i,a,o,s,l=null==(r=null==(n=null==t?void 0:t[e])?void 0:n.styles)?void 0:r.position;return e!==tn.USER_ROLE&&(null!==l&&void 0!==l||(l=null==(a=null==(i=null==t?void 0:t.ai)?void 0:i.styles)?void 0:a.position)),null!==l&&void 0!==l||(l=null==(s=null==(o=null==t?void 0:t.default)?void 0:o.styles)?void 0:s.position),null!==l&&void 0!==l||(l=e===tn.USER_ROLE?"right":"left"),l}}],[{key:"errorFallback",value:function(e,t){var n=t.target;n.onerror=null,n.src=e}},{key:"applyCustomStylesToElements",value:function(e,t,n){Object.assign(e.style,n.container),Object.assign(t.style,n.avatar)}},{key:"applyCustomStyles",value:function(e,n,r,i){var a,o,s,l;if(null!=(a=r.default)&&a.styles&&t.applyCustomStylesToElements(e,n,r.default.styles),i===tn.USER_ROLE)null!=(o=r.user)&&o.styles&&t.applyCustomStylesToElements(e,n,r.user.styles);else{null!=(s=r.ai)&&s.styles&&t.applyCustomStylesToElements(e,n,r.ai.styles);var u=null==(l=r[i])?void 0:l.styles;u&&t.applyCustomStylesToElements(e,n,u)}}}])}($t),Yt=function(e){function t(e){var n;return x(this,t),(n=f(this,t,["name"]))._names=e,n}return v(t,e),T(t,[{key:"addBesideMsg",value:function(e,n){var r="boolean"==typeof this._names?{}:this._names,i=this.createName(n,r),a=t.getPosition(n,r);i.classList.add("left"===a?"left-item-position":"right-item-position"),e.insertAdjacentElement("left"===a?"beforebegin":"afterend",i)}},{key:"createName",value:function(e,n){var r=document.createElement("div");return r.classList.add(this.className),r.textContent=t.getNameText(e,n),t.applyStyle(r,e,n),r}}],[{key:"getPosition",value:function(e,t){var n,r,i,a=null==(n=null==t?void 0:t[e])?void 0:n.position;return e!==tn.USER_ROLE&&(null!==a&&void 0!==a||(a=null==(r=null==t?void 0:t.ai)?void 0:r.position)),null!==a&&void 0!==a||(a=null==(i=null==t?void 0:t.default)?void 0:i.position),null!==a&&void 0!==a||(a=e===tn.USER_ROLE?"right":"left"),a}},{key:"applyStyle",value:function(e,t,n){var r,i,a,o;Object.assign(e.style,null==(r=n.default)?void 0:r.style),t===tn.USER_ROLE?Object.assign(e.style,null==(i=n.user)?void 0:i.style):(Object.assign(e.style,null==(a=n.ai)?void 0:a.style),Object.assign(e.style,null==(o=n[t])?void 0:o.style))}},{key:"getNameText",value:function(e,t){var n,r,i,a,o,s;return e===tn.USER_ROLE?(null==(n=t.user)?void 0:n.text)||(null==(r=t.default)?void 0:r.text)||"User":e===tn.AI_ROLE?(null==(i=t.ai)?void 0:i.text)||(null==(a=t.default)?void 0:a.text)||"AI":(null==(o=t[e])?void 0:o.text)||(null==(s=t.default)?void 0:s.text)||e}}])}($t),Qt=function(){function e(t){var n,r=this;x(this,e),this.messageElementRefs=[],this.htmlClassUtilities={},this.messageToElements=[],this.elementRef=e.createContainerElement(),this.messageStyles=ae.processMessageStyles(t.messageStyles),this._remarkable=Ut.createNew(t.remarkable),t.avatars&&(this.avatar=new Xt(t.avatars)),t.names&&(this.name=new Yt(t.names)),t.browserStorage&&(this.browserStorage=new jt(t.browserStorage)),this._onMessage=Ht.onMessage.bind(this,t),t.htmlClassUtilities&&(this.htmlClassUtilities=t.htmlClassUtilities),this.focusMode=t.focusMode,this.focusMode||(this._lastGroupMessagesElement=document.createElement("div")),"boolean"!=typeof this.focusMode&&null!=(n=this.focusMode)&&n.fade&&Wt.setFade(this.elementRef,this.focusMode.fade),setTimeout(function(){r.submitUserMessage=t.submitUserMessage})}return T(e,[{key:"addNewTextMessage",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(null!=r&&r.status){var a=this.overwriteText(n,t,this.messageElementRefs);if(a)return a;r.status=!1}var o=i?this.createAndPrependNewMessageElement(t,n,i):this.createAndAppendNewMessageElement(t,n);return o.bubbleElement.classList.add(e.TEXT_BUBBLE_CLASS),this.applyCustomStyles(o,n,!1),tn.fillEmptyMessageElement(o.bubbleElement,t),o}},{key:"overwriteText",value:function(t,n,r){var i=tn.overwriteMessage(this.messageToElements,r,n,t,"text",e.TEXT_BUBBLE_CLASS);return i&&this.renderText(i.bubbleElement,n),i}},{key:"createAndAppendNewMessageElement",value:function(e,t){return this.focusMode?this.appendNewMessageElementFocusMode(e,t):this.createAndAppendNewMessageElementDefault(e,t)}},{key:"appendNewMessageElementFocusMode",value:function(e,t){var n,r=this.createNewMessageElement(e,t);if(this.appendOuterContainerElemet(r.outerContainer,t),"user"===t){var i="boolean"!=typeof this.focusMode&&(null==(n=this.focusMode)?void 0:n.scroll);Q.scrollToBottom(this.elementRef,i)}return r}},{key:"createNewGroupElementFocusMode",value:function(){var t;null==(t=this._lastGroupMessagesElement)||t.classList.remove(e.LAST_GROUP_MESSAGES_ACTIVE);var n=document.createElement("div");this._lastGroupMessagesElement&&n.classList.add(e.LAST_GROUP_MESSAGES_ACTIVE),this._lastGroupMessagesElement=n}},{key:"createAndAppendNewMessageElementDefault",value:function(e,t){var n=this,r=this.createNewMessageElement(e,t);return this.appendOuterContainerElemet(r.outerContainer),setTimeout(function(){return Q.scrollToBottom(n.elementRef)}),r}},{key:"appendOuterContainerElemet",value:function(e,t){var n;this.focusMode&&("user"===t||!this._lastGroupMessagesElement)&&this.createNewGroupElementFocusMode(),null==(n=this._lastGroupMessagesElement)||n.appendChild(e),this.elementRef.appendChild(this._lastGroupMessagesElement)}},{key:"createAndPrependNewMessageElement",value:function(t,n,r){var i,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=this.createNewMessageElement(t,n,r,a);if(r&&null!=(i=this.elementRef.firstChild)&&i.classList.contains(e.INTRO_CLASS)){this.elementRef.firstChild.insertAdjacentElement("afterend",o.outerContainer);var s=this.messageElementRefs[0];this.messageElementRefs[0]=this.messageElementRefs[1],this.messageElementRefs[1]=s}else this.elementRef.insertBefore(o.outerContainer,this.elementRef.firstChild);return o}},{key:"createMessageElementsOnOrientation",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n?this.createAndPrependNewMessageElement(e,t,!0,r):this.createNewMessageElement(e,t,r)}},{key:"createNewMessageElement",value:function(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];arguments.length>3&&void 0!==arguments[3]&&arguments[3]||null==(r=this._introPanel)||r.hide();var a=this.messageElementRefs[this.messageElementRefs.length-1];return Vt.changeFullViewToSmall(this),!i&&e.isTemporaryElement(a)&&(this.revealRoleElementsIfTempRemoved(a,n),this.removeLastMessage()),this.createMessageElements(t,n,i)}},{key:"revealRoleElementsIfTempRemoved",value:function(e,t){if((this.avatar||this.name)&&ue.isElementTemporary(e)){var n=this.messageElementRefs[this.messageElementRefs.length-2];n&&this.messageToElements.length>0&&!e.bubbleElement.classList.contains(tn.getRoleClass(t))&&tn.revealRoleElements(n.innerContainer,this.avatar,this.name)}}},{key:"createElements",value:function(t,n){var r=e.createBaseElements(n),i=r.outerContainer,a=r.innerContainer,o=r.bubbleElement;return i.appendChild(a),this.addInnerContainerElements(o,t,n),r}},{key:"createMessageElements",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.createElements(e,t);return tn.updateRefArr(this.messageElementRefs,r,n),tn.classifyRoleMessages(this.messageElementRefs,t),r}},{key:"addInnerContainerElements",value:function(e,t,n){var r=this.messageElementRefs[this.messageElementRefs.length-1];return tn.areOuterContainerClassRolesSame(n,r)&&!this.isLastMessageError()&&tn.hideRoleElements(r.innerContainer,this.avatar,this.name),e.classList.add("message-bubble",tn.getRoleClass(n),n===tn.USER_ROLE?"user-message-text":"ai-message-text"),this.renderText(e,t),tn.addRoleElements(e,n,this.avatar,this.name),{bubbleElement:e}}},{key:"applyCustomStyles",value:function(e,t,n,r){e&&this.messageStyles&&zt.applyCustomStyles(this.messageStyles,e,t,n,r)}},{key:"removeMessage",value:function(e){e.outerContainer.remove();var t=this.messageElementRefs.findIndex(function(t){return t===e});this.messageElementRefs.splice(t,1)}},{key:"removeLastMessage",value:function(){this.messageElementRefs[this.messageElementRefs.length-1].outerContainer.remove(),this.messageElementRefs.pop()}},{key:"isLastMessageError",value:function(){var e;return null==(e=tn.getLastMessageBubbleElement(this.elementRef))?void 0:e.classList.contains(tn.ERROR_MESSAGE_TEXT_CLASS)}},{key:"sendClientUpdate",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null==(t=this._onMessage)||t.call(this,e,n)}},{key:"renderText",value:function(e,t){e.innerHTML=this._remarkable.render(t),0===e.innerText.trim().length&&(e.innerText=t)}},{key:"refreshTextMessages",value:function(e){var t=this;this._remarkable=Ut.createNew(e),this.messageToElements.forEach(function(e){e[1].text&&e[0].text&&t.renderText(e[1].text.bubbleElement,e[0].text)})}}],[{key:"createContainerElement",value:function(){var e=document.createElement("div");return e.id="messages",e}},{key:"isTemporaryElement",value:function(t){return e.isLoadingMessage(t)||ue.isElementTemporary(t)}},{key:"createBaseElements",value:function(e){var t=document.createElement("div"),n=document.createElement("div");n.classList.add("inner-message-container"),t.appendChild(n),t.classList.add("outer-message-container"),t.classList.add(tn.buildRoleOuterContainerClass(e));var r=document.createElement("div");return r.classList.add("message-bubble"),n.appendChild(r),{outerContainer:t,innerContainer:n,bubbleElement:r}}},{key:"createMessageContent",value:function(e){var t=e.text,n=e.files,r=e.html,i=e.custom,a=e._sessionId,o={role:e.role||tn.AI_ROLE};return t&&(o.text=t),n&&(o.files=n),r&&(o.html=r),!t&&!n&&!r&&(o.text=""),i&&(o.custom=i),a&&(o._sessionId=a),o}},{key:"isLoadingMessage",value:function(e){return null==e?void 0:e.bubbleElement.classList.contains(ne.BUBBLE_CLASS)}}])}();Qt.TEXT_BUBBLE_CLASS="text-message",Qt.INTRO_CLASS="deep-chat-intro",Qt.LAST_GROUP_MESSAGES_ACTIVE="deep-chat-last-group-messages-active";var Zt=Qt,en=function(){function e(){x(this,e)}return T(e,null,[{key:"getLastElementsByClass",value:function(e,t,n){for(var r,i=function(){var r=e[a];if(r.bubbleElement.classList.contains(t[0])&&!t.slice(1).find(function(e){return!r.bubbleElement.classList.contains(e)})){if(!n)return{v:r};if(!n.find(function(e){return r.bubbleElement.classList.contains(e)}))return{v:r}}},a=e.length-1;a>=0;a-=1)if(r=i())return r.v}},{key:"getLastMessage",value:function(e,t,n){for(var r=e.length-1;r>=0;r-=1)if(e[r][0].role===t){if(!n)return e[r][0];if(e[r][0][n])return e[r][0]}}},{key:"getLastTextToElement",value:function(e,t){for(var n=e.length-1;n>=0;n-=1)if(e[n][0]===t)return e[n]}},{key:"overwriteMessage",value:function(t,n,r,i,a,o){var s=e.getLastElementsByClass(n,[e.getRoleClass(i),o],[ne.BUBBLE_CLASS]),l=e.getLastMessage(t,i,a);return l&&(l[a]=r),s}},{key:"getRoleClass",value:function(e){return"".concat(e,"-message")}},{key:"fillEmptyMessageElement",value:function(t,n){0===n.trim().length&&(t.classList.add(e.EMPTY_MESSAGE_CLASS),t.innerHTML='<div style="color:#00000000">.</div>')}},{key:"unfillEmptyMessageElement",value:function(t,n){t.classList.contains(e.EMPTY_MESSAGE_CLASS)&&n.trim().length>0&&t.replaceChildren()}},{key:"getLastMessageBubbleElement",value:function(t){var n,r,i,a;return null==(a=Array.from((null==(i=null==(r=null==(n=e.getLastMessageElement(t))?void 0:n.children)?void 0:r[0])?void 0:i.children)||[]).map(function(e){return Array.from((null==e?void 0:e.children)||[]).find(function(e){return e.classList.contains("message-bubble")})}))?void 0:a[0]}},{key:"getLastMessageElement",value:function(e){return e.children[e.children.length-1]}},{key:"addRoleElements",value:function(e,t,n,r){null==n||n.addBesideMsg(e,t),null==r||r.addBesideMsg(e,t)}},{key:"hideRoleElements",value:function(e,t,n){null==t||t.tryHide(e),null==n||n.tryHide(e)}},{key:"revealRoleElements",value:function(e,t,n){null==t||t.tryReveal(e),null==n||n.tryReveal(e)}},{key:"softRemRoleElements",value:function(e,t,n){null==t||t.trySoftRem(e),null==n||n.trySoftRem(e)}},{key:"updateRefArr",value:function(e,t,n){n?e.unshift(t):e.push(t)}},{key:"buildRoleOuterContainerClass",value:function(t){return"".concat(e.OUTER_CONTAINER_CLASS_ROLE_PREFIX).concat(t)}},{key:"addNewPositionClasses",value:function(t,n){var r;t.outerContainer.classList.remove(e.POSITION_TOP_MESSAGE_CLASS,e.POSITION_MIDDLE_MESSAGE_CLASS,e.POSITION_BOTTOM_MESSAGE_CLASS),(r=t.outerContainer.classList).add.apply(r,u(n))}},{key:"getNumberOfElements",value:function(e){var t=0;return void 0!==e.text&&(t+=1),void 0!==e.html&&(t+=1),e.files&&(t+=e.files.length),t}},{key:"filterdMessageElements",value:function(e,t){return e.filter(function(e){return e.bubbleElement.classList.contains(t)})}},{key:"findMessageElements",value:function(e,t){return e.find(function(e){return e.bubbleElement.classList.contains(t)})}},{key:"generateMessageBodyElements",value:function(t,n){var r={};return t.text&&(r.text=e.findMessageElements(n,Zt.TEXT_BUBBLE_CLASS)),t.html&&(r.html=e.findMessageElements(n,pe.HTML_BUBBLE_CLASS)),t.files&&(r.files=e.filterdMessageElements(n,ie.FILE_BUBBLE_CLASS)),r}},{key:"generateMessageBody",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.getNumberOfElements(t),a=r?n.slice(0,i):n.slice(n.length-i);return e.generateMessageBodyElements(t,a)}},{key:"classifyRoleMessages",value:function(t,n){for(var r=n?e.buildRoleOuterContainerClass(n):void 0,i=t.length-1;i>=0;i-=1)if(n||(r=Array.from(t[i].outerContainer.classList).find(function(t){return t.startsWith(e.OUTER_CONTAINER_CLASS_ROLE_PREFIX)})),r){var a=t[i],o=a.outerContainer.classList.contains(r),s=t[i-1],l=t[i+1],u=null==s?void 0:s.outerContainer.classList.contains(r),c=null==l?void 0:l.outerContainer.classList.contains(r);if(o)!u&&c?e.addNewPositionClasses(a,[e.POSITION_TOP_MESSAGE_CLASS]):u&&c?e.addNewPositionClasses(a,[e.POSITION_MIDDLE_MESSAGE_CLASS]):u&&!c?e.addNewPositionClasses(a,[e.POSITION_BOTTOM_MESSAGE_CLASS]):!u&&!c&&e.addNewPositionClasses(a,[e.POSITION_TOP_MESSAGE_CLASS,e.POSITION_BOTTOM_MESSAGE_CLASS]);else if(n)break}}},{key:"areOuterContainerClassRolesSame",value:function(t,n){return!!n&&Array.from(n.outerContainer.classList).find(function(t){return t.startsWith(e.OUTER_CONTAINER_CLASS_ROLE_PREFIX)})===e.buildRoleOuterContainerClass(t)}},{key:"resetAllRoleElements",value:function(t,n,r){if(n||r){var i="";t.forEach(function(a,o){a.bubbleElement.classList.contains(e.ERROR_MESSAGE_TEXT_CLASS)||e.revealRoleElements(a.innerContainer,n,r);var s=Array.from(a.outerContainer.classList).find(function(t){return t.startsWith(e.OUTER_CONTAINER_CLASS_ROLE_PREFIX)});i===s&&e.hideRoleElements(t[o-1].innerContainer,n,r),i=s})}}},{key:"deepCloneMessagesWithReferences",value:function(t){return t.map(function(t){return e.processMessageContent(t)})}},{key:"processMessageContent",value:function(t){if(null==t||"object"!=w(t))return t;if(Array.isArray(t))return t.map(function(t){return e.processMessageContent(t)});var n={};return Object.entries(t).forEach(function(t){var r=l(t,2),i=r[0],a=r[1];"ref"===i&&a instanceof File||"custom"===i?n[i]=a:null!==a&&"object"==w(a)?n[i]=e.processMessageContent(a):n[i]=a}),n}}])}();en.AI_ROLE="ai",en.USER_ROLE="user",en.ERROR_MESSAGE_TEXT_CLASS="error-message-text",en.OUTER_CONTAINER_CLASS_ROLE_PREFIX="deep-chat-outer-container-role-",en.EMPTY_MESSAGE_CLASS="empty-message",en.POSITION_TOP_MESSAGE_CLASS="deep-chat-top-message",en.POSITION_MIDDLE_MESSAGE_CLASS="deep-chat-middle-message",en.POSITION_BOTTOM_MESSAGE_CLASS="deep-chat-bottom-message";var tn=en,nn=function(){function e(t,n){x(this,e),this._fileAdded=!1,this._streamType="",this._hasStreamEnded=!1,this._partialText="",this._messages=t,"object"==w(n)&&(this._partialRender=n.partialRender,this._customWrappers=n.htmlWrappers)}return T(e,[{key:"upsertStreamedMessage",value:function(e){if(!this._hasStreamEnded){if(void 0===(null==e?void 0:e.text)&&void 0===(null==e?void 0:e.html))return console.error(X.INVALID_STREAM_EVENT);null!=e&&e.custom&&this._message&&(this._message.custom=e.custom);var t=(null==e?void 0:e.text)||(null==e?void 0:e.html)||"",n=Q.isScrollbarAtBottomOfElement(this._messages.elementRef),r=void 0!==(null==e?void 0:e.text)?"text":"html";if(this._elements||this._message){if(this._streamType!==r)return console.error(X.INVALID_STREAM_EVENT_MIX);this.updateBasedOnType(t,r,null==e?void 0:e.overwrite)}else this.setInitialState(r,t,null==e?void 0:e.role);n&&Q.scrollToBottom(this._messages.elementRef)}}},{key:"setInitialState",value:function(t,n,r){var i,a,o;this._streamType=t,null!==r&&void 0!==r||(r=tn.AI_ROLE);var s=(null==(i=this._customWrappers)?void 0:i[r])||(null==(a=this._customWrappers)?void 0:a.default),u=s?"":n;this._elements="text"===t?this._messages.addNewTextMessage(u,r):pe.add(this._messages,u,r),this._elements&&(this._elements.bubbleElement.classList.add(e.MESSAGE_CLASS),this._activeMessageRole=r,this._message=E({role:this._activeMessageRole},t,u),this._messages.messageToElements.push([this._message,E({},t,this._elements)]),null==(o=this._messages.browserStorage)||o.addMessages(this._messages.messageToElements.map(function(e){return l(e,1)[0]})),s&&this.setTargetWrapperIfNeeded(this._elements,n,this._streamType,s))}},{key:"setTargetWrapperIfNeeded",value:function(t,n,r,i){t.bubbleElement.innerHTML=i,this._targetWrapper=t.bubbleElement.getElementsByClassName(e.TARGET_WRAPPER_CLASS)[0],this._elements&&ce.apply(this._messages,this._elements.bubbleElement),this.updateBasedOnType(n,r)}},{key:"updateBasedOnType",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._targetWrapper||(null==(n=this._elements)?void 0:n.bubbleElement);this._partialRender||tn.unfillEmptyMessageElement(i,e),("text"===t?this.updateText:this.updateHTML).bind(this)(e,i,r)}},{key:"updateText",value:function(e,t,n){this._message&&(this._message.text=n?e:this._message.text+e,this._partialRender&&this.isNewPartialRenderParagraph(t,n)&&this.partialRenderNewParagraph(t),this._partialBubble?this.partialRenderBubbleUpdate(e):this._messages.renderText(t,this._message.text))}},{key:"isNewPartialRenderParagraph",value:function(t,n){var r,i;return n?(t.innerHTML="",!0):this._partialBubble?this._partialText&&(null==(i=this._partialText)?void 0:i.indexOf(e.PARTIAL_RENDER_TEXT_MARK))>-1:(null==(r=this._message)?void 0:r.text)&&this._message.text.indexOf(e.PARTIAL_RENDER_TEXT_MARK)>-1}},{key:"partialRenderNewParagraph",value:function(e){this._partialText="",this._partialBubble=document.createElement("div"),this._partialBubble.classList.add("partial-render-message"),e.appendChild(this._partialBubble)}},{key:"partialRenderBubbleUpdate",value:function(e){this._partialText+=e,this._messages.renderText(this._partialBubble,this._partialText)}},{key:"updateHTML",value:function(e,t,n){if(this._message)if(n)this._message.html=e,t.innerHTML=e;else{var r=document.createElement("span");r.innerHTML=e,t.appendChild(r),this._message.html=(null==t?void 0:t.innerHTML)||""}}},{key:"finaliseStreamedMessage",value:function(){var t;if(!this._endStreamAfterOperation&&this._message&&(!this._fileAdded||this._elements)){if(!this._elements)throw Error(X.NO_VALID_STREAM_EVENTS_SENT);null!=(t=this._elements.bubbleElement)&&t.classList.contains(e.MESSAGE_CLASS)&&("text"===this._streamType?this._messages.textToSpeech&&ee.speak(this._message.text||"",this._messages.textToSpeech):"html"===this._streamType&&this._elements&&ce.apply(this._messages,this._elements.outerContainer),this._elements.bubbleElement.classList.remove(e.MESSAGE_CLASS),this._message&&(this._targetWrapper&&(this._message.html=this._elements.bubbleElement.children[0].outerHTML,"text"===this._streamType&&delete this._message.text),this._messages.sendClientUpdate(Zt.createMessageContent(this._message),!1)),this._hasStreamEnded=!0)}}},{key:"markFileAdded",value:function(){this._fileAdded=!0}},{key:"newMessage",value:function(){this.finaliseStreamedMessage(),this._elements=void 0,delete this._message,this._fileAdded=!1,this._hasStreamEnded=!1,this._activeMessageRole=void 0}},{key:"endStreamAfterFileDownloaded",value:function(){var e=k(y().mark(function e(t,n){var r,i,a;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this._endStreamAfterOperation=!0,e.next=3,n();case 3:r=e.sent,i=r.text,a=r.files,i&&this.updateBasedOnType(i,"text",!0),this._endStreamAfterOperation=!1,this.finaliseStreamedMessage(),a&&t.addNewMessage({files:a});case 7:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()}])}();nn.MESSAGE_CLASS="streamed-message",nn.PARTIAL_RENDER_TEXT_MARK="\n\n",nn.TARGET_WRAPPER_CLASS="stream-wrapper";var rn=nn,an=function(){function e(){x(this,e)}return T(e,null,[{key:"tempRemoveContentHeader",value:function(){var t=k(y().mark(function t(n,r,i){var a,o;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=n&&n.headers){t.next=2;break}throw new Error("Request settings have not been set up");case 2:return a=n.headers[e.CONTENT_TYPE],delete n.headers[e.CONTENT_TYPE],t.prev=4,t.next=7,r(i);case 7:o=t.sent,t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(4),n.headers[e.CONTENT_TYPE]=a,t.t0;case 13:return t.abrupt("return",(n.headers[e.CONTENT_TYPE]=a,o));case 14:case"end":return t.stop()}},t,null,[[4,10]])}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"displayError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Service error, please try again.";if(console.error(t),"object"==w(t))return t instanceof Error?e.addNewErrorMessage("service",t.message):Array.isArray(t)||"string"==typeof t.error?e.addNewErrorMessage("service",t):0===Object.keys(t).length?e.addNewErrorMessage("service",n):e.addNewErrorMessage("service",JSON.stringify(t));e.addNewErrorMessage("service",t)}},{key:"fetch",value:function(e){function t(t,n,r,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t,n,r){var i,a,o={method:(null==(i=e.connectSettings)?void 0:i.method)||"POST",headers:t};return"GET"!==o.method&&(o.body=n?JSON.stringify(r):r),e.connectSettings.credentials&&(o.credentials=e.connectSettings.credentials),fetch((null==(a=e.connectSettings)?void 0:a.url)||e.url||"",o)})},{key:"processResponseByType",value:function(e){var t=e.headers.get("content-type");return null!=t&&t.includes("application/json")?e.json():null!=t&&t.includes("text/plain")||!t?e:e.blob()}},{key:"processRequestInterceptor",value:function(){var e=k(y().mark(function e(t,n){var r,i,a,o;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==(r=t.requestInterceptor)?void 0:r.call(t,n);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=n;case 5:return i=e.t0,a=i,o=i,e.abrupt("return",{body:a.body,headers:a.headers,error:o.error});case 9:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"validateResponseFormat",value:function(e,t){if(!e)return!1;var n=Array.isArray(e)?e:[e];return t&&n.length>1?(console.error(X.INVALID_STREAM_ARRAY_RESPONSE),!1):!n.find(function(e){return"object"!=w(e)||!("string"==typeof e.error||"string"==typeof e.text||"string"==typeof e.html||Array.isArray(e.files))})}},{key:"onInterceptorError",value:function(e,t,n){e.addNewErrorMessage("service",t),null==n||n()}},{key:"basicResponseProcessing",value:function(){var t=k(y().mark(function t(n,r){var i,a,o,s,l,u,c,d,f,p,h=arguments;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=(i=h.length>2&&void 0!==h[2]?h[2]:{}).io,o=i.displayError,s=void 0===o||o,l=i.useRI,u=void 0===l||l,null!=a&&a.extractResultData){t.next=4;break}return t.abrupt("return",r);case 4:return c=u?a.deepChat.responseInterceptor:void 0,t.next=7,null==c?void 0:c(r);case 7:if(t.t0=t.sent,t.t0){t.next=10;break}t.t0=r;case 10:return d=t.t0,t.next=13,a.extractResultData(d);case 13:if((f=t.sent)&&("object"==w(f)||Array.isArray(f))){t.next=17;break}return s&&(p=X.INVALID_RESPONSE(r,"response",!!c,d),e.displayError(n,p)),t.abrupt("return");case 17:return t.abrupt("return",f);case 18:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()}])}();an.CONTENT_TYPE="Content-Type";var on=an;function sn(e,t){return ln.apply(this,arguments)}function ln(){return ln=k(y().mark(function e(t,n){var r,i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=t.getReader();case 1:return e.next=3,r.read();case 3:if((i=e.sent).done){e.next=7;break}n(i.value);case 5:e.next=1;break;case 7:case"end":return e.stop()}},e)})),ln.apply(this,arguments)}function un(e){var t,n,r,i=!1;return function(a){void 0===t?(t=a,n=0,r=-1):t=function(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(t,a);for(var o=t.length,s=0;n<o;){i&&(10===t[n]&&(s=++n),i=!1);for(var l=-1;n<o&&-1===l;++n)switch(t[n]){case 58:-1===r&&(r=n-s);break;case 13:i=!0;case 10:l=n}if(-1===l)break;e(t.subarray(s,l),r),s=n,r=-1}s===o?t=void 0:0!==s&&(t=t.subarray(s),n-=s)}}function cn(e,t,n){var r={data:"",event:"",id:"",retry:void 0},i=new TextDecoder;return function(a,o){if(0===a.length)null==n||n(r),r={data:"",event:"",id:"",retry:void 0};else if(o>0){var s=i.decode(a.subarray(0,o)),l=o+(32===a[o+1]?2:1),u=i.decode(a.subarray(l));switch(s){case"data":r.data=r.data?r.data+"\n"+u:u;break;case"event":r.event=u;break;case"id":e(r.id=u);break;case"retry":var c=parseInt(u,10);isNaN(c)||t(r.retry=c)}}}}var dn="text/event-stream",fn="last-event-id";function pn(e,t){var n=t.signal,r=t.headers,i=t.onopen,a=t.onmessage,o=t.onclose,s=t.onerror,l=t.openWhenHidden,u=t.fetch,c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise(function(t,d){var f,p=Object.assign({},r);function h(){f.abort(),document.hidden||_()}p.accept||(p.accept=dn),l||document.addEventListener("visibilitychange",h);var m=1e3,v=0;function g(){document.removeEventListener("visibilitychange",h),window.clearTimeout(v),f.abort()}null==n||n.addEventListener("abort",function(){g(),t()});var b=null!==u&&void 0!==u?u:window.fetch,S=null!==i&&void 0!==i?i:hn;function _(){return E.apply(this,arguments)}function E(){return(E=k(y().mark(function n(){var r,i,l;return y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return f=new AbortController,n.prev=1,n.next=4,b(e,Object.assign(Object.assign({},c),{headers:p,signal:f.signal}));case 4:return i=n.sent,n.next=7,S(i);case 7:return n.next=9,sn(i.body,un(cn(function(e){e?p[fn]=e:delete p[fn]},function(e){m=e},a)));case 9:null==o||o(),g(),t(),n.next=17;break;case 14:if(n.prev=14,n.t0=n.catch(1),!f.signal.aborted)try{l=null!==(r=null==s?void 0:s(n.t0))&&void 0!==r?r:m,window.clearTimeout(v),v=window.setTimeout(_,l)}catch(l){g(),d(l)}case 17:case"end":return n.stop()}},n,null,[[1,14]])}))).apply(this,arguments)}_()})}function hn(e){var t=e.headers.get("content-type");if(null==t||!t.startsWith(dn))throw new Error("Expected content-type to be ".concat(dn,", Actual: ").concat(t))}var mn=function(){function e(){x(this,e)}return T(e,null,[{key:"request",value:function(){var t=k(y().mark(function t(n,r,i){var a,o,s,l,u,c,d,f,p,h,m,v,g,b,k,S=arguments;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=!(S.length>3&&void 0!==S[3])||S[3],o=S.length>4&&void 0!==S[4]&&S[4],f={body:r,headers:null==(s=n.connectSettings)?void 0:s.headers},t.next=5,on.processRequestInterceptor(n.deepChat,f);case 5:if(p=t.sent,h=p.body,m=p.headers,!(v=p.error)){t.next=11;break}return t.abrupt("return",on.onInterceptorError(i,v,n.streamHandlers.onClose));case 11:if(null==(l=n.connectSettings)||!l.handler){t.next=13;break}return t.abrupt("return",bn.stream(n,h,i));case 13:if((null==(u=n.connectSettings)?void 0:u.url)!==gn.URL){t.next=15;break}return t.abrupt("return",gn.requestStream(i,n));case 15:return g=new rn(i,n.stream),b=on.fetch.bind(this,n,m,a),k={method:(null==(c=n.connectSettings)?void 0:c.method)||"POST",headers:m,credentials:null==(d=n.connectSettings)?void 0:d.credentials,body:a?JSON.stringify(h):h},t.abrupt("return",("object"==w(n.stream)&&n.stream.readable?e.handleReadableStream(n,i,g,k,o,b,h):e.handleEventStream(n,i,g,k,o,b,h),g));case 17:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"handleReadableStream",value:function(t,n,r,i,a,o,s){var l,u=t.streamHandlers,c=u.onOpen,d=u.onClose,f=u.abortStream,p=!1;fetch((null==(l=t.connectSettings)?void 0:l.url)||t.url||"",i).then(function(){var i=k(y().mark(function i(l){var u,f,h,m,v,g,b,k,S,_,E;return y().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(l.body){i.next=2;break}throw new Error(X.READABLE_STREAM_CONNECTION_ERROR);case 2:h=l.body.getReader(),m=new TextDecoder,c(),v=!1;case 5:if(v||p){i.next=26;break}return i.next=8,h.read();case 8:if(g=i.sent,b=g.value,k=g.done,!(v=k)){i.next=15;break}e.handleClose(t,r,d,a),i.next=24;break;case 15:return S=m.decode(b,{stream:!0}),i.next=18,null==(f=(u=t.deepChat).responseInterceptor)?void 0:f.call(u,S);case 18:if(i.t0=i.sent,i.t0){i.next=21;break}i.t0=S;case 21:_=i.t0,E="object"==w(_)?_:{text:S},e.handleMessage(t,n,r,d,E,o,s);case 24:i.next=5;break;case 26:case"end":return i.stop()}},i)}));return function(e){return i.apply(this,arguments)}}()).catch(function(r){e.handleError(t,n,r)}),f.abort=function(){p=!0}}},{key:"handleEventStream",value:function(t,n,r,i,a,o,s){var l,u=t.streamHandlers,c=u.onOpen,d=u.onClose,f=u.abortStream;pn((null==(l=t.connectSettings)?void 0:l.url)||t.url||"",_(_({},i),{},{openWhenHidden:!0,onopen:function(e){return k(y().mark(function t(){return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=2;break}return t.abrupt("return",c());case 2:return t.next=4,on.processResponseByType(e);case 4:throw t.sent;case 5:case"end":return t.stop()}},t)}))()},onmessage:function(i){return k(y().mark(function a(){var l,u,c,f;return y().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(JSON.stringify(i.data)===JSON.stringify("[DONE]")){a.next=9;break}try{c=JSON.parse(i.data)}catch(p){c={}}return a.next=4,null==(u=(l=t.deepChat).responseInterceptor)?void 0:u.call(l,c);case 4:if(a.t0=a.sent,a.t0){a.next=7;break}a.t0=c;case 7:f=a.t0,e.handleMessage(t,n,r,d,f,o,s);case 9:case"end":return a.stop()}},a)}))()},onerror:function(e){throw d(),e},onclose:function(){e.handleClose(t,r,d,a)},signal:f.signal})).catch(function(r){e.handleError(t,n,r)})}},{key:"handleMessage",value:function(t,n,r,i,a,o,s){var l;null==(l=t.extractResultData)||l.call(t,a,o,s).then(function(a){t.asyncCallInProgress&&a&&""!==a.text?(e.simulate(n,t.streamHandlers,a),i(),t.asyncCallInProgress=!1):e.upsertWFiles(n,r.upsertStreamedMessage.bind(r),r,a)}).catch(function(e){return on.displayError(n,e)})}},{key:"handleError",value:function(e,t,n){var r;t.isLastMessageError()||null==(r=e.extractResultData)||r.call(e,n).then(function(){on.displayError(t,n)}).catch(function(e){on.displayError(t,e)})}},{key:"handleClose",value:function(e,t,n,r){if(!e.asyncCallInProgress)try{t.finaliseStreamedMessage(),n()}catch(i){if(!r)throw i}}},{key:"simulate",value:function(){var t=k(y().mark(function t(n,r,i,a){var o,s,l,u,c,d;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r,t.next=3,on.basicResponseProcessing(n,i,{io:a,useRI:!1});case 3:if(t.sent){t.next=5;break}return t.abrupt("return",r.onClose());case 5:if(Array.isArray(i)&&(i=i[0]),!i.files){t.next=10;break}return t.next=8,on.basicResponseProcessing(n,{files:i.files},{io:a});case 8:s=t.sent,n.addNewMessage(_({sendUpdate:!1,ignoreText:!0},s),!1);case 10:i.text&&(r.onOpen(),l=i.text.split(""),u=new rn(n,null==a?void 0:a.stream),e.populateMessages(n,l,u,o,"text",0,a)),i.html&&(r.onOpen(),0===(c=ce.splitHTML(i.html)).length&&(c=i.html.split("")),d=new rn(n,null==a?void 0:a.stream),e.populateMessages(n,c,d,o,"html",0,a)),i.error&&(on.displayError(n,i.error),r.onClose());case 13:case"end":return t.stop()}},t)}));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"populateMessages",value:function(){var t=k(y().mark(function t(n,r,i,a,o,s,l){var u,c,d;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(u=r[s])){t.next=10;break}return t.next=4,on.basicResponseProcessing(n,E({},o,u),{io:l});case 4:c=t.sent,e.upsertWFiles(n,i.upsertStreamedMessage.bind(i),i,c),d=setTimeout(function(){e.populateMessages(n,r,i,a,o,s+1,l)},a.simulationInterim||6),a.abortStream.abort=function(){e.abort(d,i,a.onClose)},t.next=11;break;case 10:i.finaliseStreamedMessage(),a.onClose();case 11:case"end":return t.stop()}},t)}));return function(e,n,r,i,a,o,s){return t.apply(this,arguments)}}()},{key:"isSimulation",value:function(e){return"object"==w(e)&&!!e.simulation}},{key:"isSimulatable",value:function(t,n){return e.isSimulation(t)&&n&&(n.text||n.html)}},{key:"abort",value:function(e,t,n){clearTimeout(e),t.finaliseStreamedMessage(),n()}},{key:"upsertWFiles",value:function(e,t,n,r){if(r&&Array.isArray(r)&&(r=r[0]),null!=r&&r.text||null!=r&&r.html){var i=t(r);null!==n&&void 0!==n||(n=i||void 0)}null!=r&&r.files&&(e.addNewMessage({files:r.files}),null==n||n.markFileAdded())}}])}(),vn=function(){function e(){x(this,e)}return T(e,null,[{key:"generateResponse",value:function(e){var t=e[e.length-1][0];if(t.files&&t.files.length>0){if(t.files.length>1)return"These are interesting files!";var n=t.files[0];return n.src&&n.src.startsWith("data:image/gif")?"That is a nice gif!":"image"===n.type?"That is a nice image!":"audio"===n.type?"I like the sound of that!":"That is an interesting file!"}if(t.text){if("?"===t.text.charAt(t.text.length-1))return"I'm sorry but I can't answer that question...";if(t.text.includes("updog"))return"What's updog?"}return"Hi there! This is a demo response!"}},{key:"getCustomResponse",value:function(e,t){return"function"==typeof e?e(t):e}},{key:"getResponse",value:function(t){var n=t.customDemoResponse,r=t.messageToElements;return n?e.getCustomResponse(n,r[r.length-1][0]):{text:e.generateResponse(r)}}},{key:"request",value:function(t,n){var r=e.getResponse(n);setTimeout(k(y().mark(function e(){var i,a,o;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,on.basicResponseProcessing(n,r,{io:t});case 2:if(i=e.sent){e.next=5;break}return e.abrupt("return",t.completionsHandlers.onFinish());case 5:a=Array.isArray(i)?i:[i],(o=a.find(function(e){return"string"==typeof e.error}))?(n.addNewErrorMessage("service",o.error),t.completionsHandlers.onFinish()):mn.isSimulatable(t.stream,i)?mn.simulate(n,t.streamHandlers,i):(a.forEach(function(e){return n.addNewMessage(e)}),t.completionsHandlers.onFinish());case 7:case"end":return e.stop()}},e)})),400)}},{key:"requestStream",value:function(t,n){setTimeout(function(){var r=e.getResponse(t);mn.simulate(t,n.streamHandlers,r,n)},400)}}])}();vn.URL="deep-chat-demo";var gn=vn,yn=function(){function e(){x(this,e)}return T(e,null,[{key:"setup",value:function(e){e.permittedErrorPrefixes=["Connection error","Error in server message"],e.websocket="pending"}},{key:"isElementPresentInDOM",value:function(e){return e.getRootNode({composed:!0})instanceof Document}},{key:"createConnection",value:function(t,n){if(e.isElementPresentInDOM(t.deepChat)){var r=t.connectSettings.websocket;if(r){if(t.connectSettings.handler)return bn.websocket(t,n);try{var i="boolean"!=typeof r?r:void 0,a=new WebSocket(t.connectSettings.url||"",i);t.websocket=a,t.websocket.onopen=function(){var r,i;n.removeError(),t.websocket&&"object"==w(t.websocket)&&e.assignListeners(t,a,n),null==(i=(r=t.deepChat)._validationHandler)||i.call(r)},t.websocket.onerror=function(r){console.error(r),e.retryConnection(t,n)}}catch(i){console.error(i),e.retryConnection(t,n)}}}}},{key:"retryConnection",value:function(t,n){var r,i;null==(i=(r=t.deepChat)._validationHandler)||i.call(r),e.isElementPresentInDOM(t.deepChat)&&(t.websocket="pending",n.isLastMessageError()||n.addNewErrorMessage("service","Connection error"),setTimeout(function(){e.createConnection(t,n)},5e3))}},{key:"assignListeners",value:function(t,n,r){var i=this,a={};n.onmessage=function(){var n=k(y().mark(function n(o){var s,l,u,c,d,f;return y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.extractResultData){n.next=22;break}return n.prev=1,s=JSON.parse(o.data),n.next=5,on.basicResponseProcessing(r,s,{io:t,displayError:!1});case 5:if(l=n.sent){n.next=8;break}throw Error(X.INVALID_RESPONSE(s,"server",!!t.deepChat.responseInterceptor,l));case 8:if(!mn.isSimulation(t.stream)){n.next=13;break}u=e.stream.bind(i,t,r,a),c=a[s.role||tn.AI_ROLE],mn.upsertWFiles(r,u,c,l),n.next=17;break;case 13:if(d=Array.isArray(l)?l:[l],!(f=d.find(function(e){return"string"==typeof e.error}))){n.next=16;break}throw f.error;case 16:d.forEach(function(e){return r.addNewMessage(e)});case 17:n.next=22;break;case 19:n.prev=19,n.t0=n.catch(1),on.displayError(r,n.t0,"Error in server message");case 22:case"end":return n.stop()}},n,null,[[1,19]])}));return function(e){return n.apply(this,arguments)}}(),n.onclose=function(){console.error("Connection closed"),r.isLastMessageError()||r.addNewErrorMessage("service","Connection error"),t.stream&&t.streamHandlers.abortStream.abort(),e.createConnection(t,r)}}},{key:"sendWebsocket",value:function(){var t=k(y().mark(function t(n,r,i){var a,o,s,l,u,c,d,f,p,h=arguments;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=!(h.length>3&&void 0!==h[3])||h[3],(null==(o=n.connectSettings)?void 0:o.url)!==gn.URL){t.next=3;break}return t.abrupt("return",gn.request(n,i));case 3:if((l=n.websocket)&&"pending"!==l){t.next=6;break}return t.abrupt("return");case 6:return u={body:r,headers:null==(s=n.connectSettings)?void 0:s.headers},t.next=9,on.processRequestInterceptor(n.deepChat,u);case 9:if(c=t.sent,d=c.body,!(f=c.error)){t.next=14;break}return t.abrupt("return",i.addNewErrorMessage("service",f));case 14:if(e.isWebSocket(l)){t.next=16;break}return t.abrupt("return",l.newUserMessage.listener(d));case 16:p=a?JSON.stringify(d):d,void 0===l.readyState||l.readyState!==l.OPEN?(console.error("Connection is not open"),i.isLastMessageError()||i.addNewErrorMessage("service","Connection error")):(l.send(JSON.stringify(p)),n.completionsHandlers.onFinish());case 18:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"canSendMessage",value:function(t){return!t||"pending"!==t&&(e.isWebSocket(t)?void 0!==t.readyState&&t.readyState===t.OPEN:t.isOpen)}},{key:"isWebSocket",value:function(e){return void 0!==e.send}},{key:"stream",value:function(e,t,n,r){if(r){var i=e.stream.simulation;if("string"==typeof i){var a,o=r.role||tn.AI_ROLE,s=n[o];r.text===i||r.html===i?(null==s||s.finaliseStreamedMessage(),delete n[o]):(null!==(a=n[o])&&void 0!==a||(n[o]=new rn(t,e.stream)),n[o].upsertStreamedMessage(r))}else mn.simulate(t,e.streamHandlers,r)}}}])}(),bn=function(){function e(){x(this,e)}return T(e,null,[{key:"request",value:function(){var t=k(y().mark(function t(n,r,i){var a,o,s,l,u;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s=!0,l=function(){var e=k(y().mark(function e(t){var r,a,o;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=2;break}return e.abrupt("return");case 2:return s=!1,e.next=5,on.basicResponseProcessing(i,t,{io:n,displayError:!1});case 5:(r=e.sent)?(a=Array.isArray(r)?r:[r],(o=a.find(function(e){return"string"==typeof e.error}))?(console.error(o.error),i.addNewErrorMessage("service",o.error),n.completionsHandlers.onFinish()):mn.isSimulatable(n.stream,r)?mn.simulate(i,n.streamHandlers,r):(a.forEach(function(e){return i.addNewMessage(e)}),n.completionsHandlers.onFinish())):(console.error(X.INVALID_RESPONSE(t,"server",!!n.deepChat.responseInterceptor,r)),i.addNewErrorMessage("service","Error in server message"),n.completionsHandlers.onFinish());case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),u=e.generateOptionalSignals(),null==(o=(a=n.connectSettings).handler)||o.call(a,r,_(_({},u),{},{onResponse:l}));case 3:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"attemptToFinaliseStream",value:function(e,t){try{var n=t.messageElementRefs[t.messageElementRefs.length-1];Zt.isLoadingMessage(n)?t.removeLastMessage():e.finaliseStreamedMessage()}catch(n){console.error(n),t.addNewErrorMessage("service",n)}}},{key:"stream",value:function(t,n,r){var i,a,o=!0,s=!1,l=new rn(r,t.stream),u=function(){var n=k(y().mark(function n(i){var a,s;return y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(o){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,on.basicResponseProcessing(r,i,{io:t,displayError:!1});case 4:(a=n.sent)?a.error?(e.streamError(a.error,l,t,r),o=!1):mn.upsertWFiles(r,l.upsertStreamedMessage.bind(l),l,a):(s=X.INVALID_RESPONSE(i,"server",!!t.deepChat.responseInterceptor,a),e.streamError(s,l,t,r),o=!1);case 6:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}();t.streamHandlers.abortStream.abort=function(){e.attemptToFinaliseStream(l,r),t.streamHandlers.onClose(),o=!1};var c=e.generateOptionalSignals();null==(a=(i=t.connectSettings).handler)||a.call(i,n,_(_({},c),{},{onOpen:function(){s||!o||(t.streamHandlers.onOpen(),s=!0)},onResponse:u,onClose:function(){o&&(e.attemptToFinaliseStream(l,r),t.streamHandlers.onClose(),o=!1)},stopClicked:t.streamHandlers.stopClicked}))}},{key:"streamError",value:function(e,t,n,r){console.error(e),t.finaliseStreamedMessage(),r.addNewErrorMessage("service",e),n.streamHandlers.onClose()}},{key:"websocket",value:function(t,n){var r,i,a=this,o={isOpen:!1,newUserMessage:{listener:function(){}},roleToStream:{}};t.websocket=o;var s=function(){var e=k(y().mark(function e(r){var i,s,l,u,c,d;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o.isOpen){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,on.basicResponseProcessing(n,r,{io:t,displayError:!1});case 4:(i=e.sent)?(s=Array.isArray(i)?i:[i],l=s.find(function(e){return"string"==typeof e.error}),l?(console.error(l.error),n.isLastMessageError()||n.addNewErrorMessage("service",l.error)):mn.isSimulation(t.stream)?(u=i,c=yn.stream.bind(a,t,n,o.roleToStream),d=o.roleToStream[u.role||tn.AI_ROLE],mn.upsertWFiles(n,c,d,u)):s.forEach(function(e){return n.addNewMessage(e)})):(console.error(X.INVALID_RESPONSE(r,"server",!!t.deepChat.responseInterceptor,i)),n.addNewErrorMessage("service","Error in server message"));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),l=e.generateOptionalSignals();null==(i=(r=t.connectSettings).handler)||i.call(r,void 0,_(_({},l),{},{onOpen:function(){n.removeError(),o.isOpen=!0},onResponse:s,onClose:function(){o.isOpen=!1},newUserMessage:o.newUserMessage}))}},{key:"generateOptionalSignals",value:function(){return{onClose:function(){},onOpen:function(){},stopClicked:{listener:function(){}},newUserMessage:{listener:function(){}}}}}])}(),kn=function(){function e(){x(this,e)}return T(e,null,[{key:"request",value:function(){var e=k(y().mark(function e(t,n,r){var i,a,o,s,l,u,c,d,f,p,h,m,v=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=!(v.length>3&&void 0!==v[3])||v[3],l={body:n,headers:null==(a=t.connectSettings)?void 0:a.headers},e.next=4,on.processRequestInterceptor(t.deepChat,l);case 4:if(u=e.sent,c=u.body,d=u.headers,f=u.error,p=t.completionsHandlers.onFinish,!f){e.next=11;break}return e.abrupt("return",on.onInterceptorError(r,f,p));case 11:if(null==(o=t.connectSettings)||!o.handler){e.next=13;break}return e.abrupt("return",bn.request(t,c,r));case 13:if((null==(s=t.connectSettings)?void 0:s.url)!==gn.URL){e.next=15;break}return e.abrupt("return",gn.request(t,r));case 15:h=!0,(m=on.fetch.bind(this,t,d,i))(c).then(function(e){return h=!!e.ok,e}).then(function(e){return on.processResponseByType(e)}).then(function(){var e=k(y().mark(function e(n){var i,a,o,s;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.extractResultData){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,null==(a=(i=t.deepChat).responseInterceptor)?void 0:a.call(i,n);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0=n;case 7:return o=e.t0,e.next=10,t.extractResultData(o,m,c);case 10:if(s=e.sent,h){e.next=13;break}throw n;case 13:if(s&&("object"==w(s)||Array.isArray(s))){e.next=15;break}throw Error(X.INVALID_RESPONSE(n,"response",!!t.deepChat.responseInterceptor,o));case 15:s.makingAnotherRequest||(mn.isSimulatable(t.stream,s)?mn.simulate(r,t.streamHandlers,s):((Array.isArray(s)?s:[s]).forEach(function(e){return r.addNewMessage(e)}),p()));case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){on.displayError(r,e),p()});case 18:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"executePollRequest",value:function(t,n,r,i){var a=t.completionsHandlers.onFinish;fetch(n,r).then(function(e){return e.json()}).then(function(){var o=k(y().mark(function o(s){var l,u,c;return y().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t.extractPollResultData){o.next=2;break}return o.abrupt("return");case 2:return o.t0=t,o.next=5,null==(u=(l=t.deepChat).responseInterceptor)?void 0:u.call(l,s);case 5:if(o.t1=o.sent,o.t1){o.next=8;break}o.t1=s;case 8:return o.t2=o.t1,o.next=11,o.t0.extractPollResultData.call(o.t0,o.t2);case 11:(c=o.sent).timeoutMS?setTimeout(function(){e.executePollRequest(t,n,r,i)},c.timeoutMS):mn.isSimulatable(t.stream,c)?mn.simulate(i,t.streamHandlers,c):(i.addNewMessage(c),a());case 13:case"end":return o.stop()}},o)}));return function(e){return o.apply(this,arguments)}}()).catch(function(e){on.displayError(i,e),a()})}},{key:"poll",value:function(){var t=k(y().mark(function t(n,r,i){var a,o,s,l,u,c,d,f,p,h,m,v,g,b=arguments;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=!(b.length>3&&void 0!==b[3])||b[3],u={body:r,headers:null==(o=n.connectSettings)?void 0:o.headers},t.next=4,on.processRequestInterceptor(n.deepChat,u);case 4:if(c=t.sent,d=c.body,f=c.headers,!(p=c.error)){t.next=10;break}return t.abrupt("return",on.onInterceptorError(i,p));case 10:h=(null==(s=n.connectSettings)?void 0:s.url)||n.url||"",m=(null==(l=n.connectSettings)?void 0:l.method)||"POST",v=a?JSON.stringify(d):d,g={method:m,body:v,headers:f},n.connectSettings.credentials&&(g.credentials=n.connectSettings.credentials),e.executePollRequest(n,h,g,i);case 12:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"verifyKey",value:function(e,t,n,r,i,a,o,s,l){if(""===e)return a(X.INVALID_KEY);o(),fetch(t,{method:r,headers:n,body:l||null}).then(function(e){return on.processResponseByType(e)}).then(function(t){s(t,e,i,a)}).catch(function(e){a(X.CONNECTION_FAILED),console.error(e)})}}])}(),Sn=function(){function e(t,n,r){x(this,e),this._isLoading=!1,this._isPaginationComplete=!1,this._index=0,this._messages=n,r.fetchHistory&&this.fetchHistory(r.fetchHistory),t.loadHistory&&this.setupLoadHistoryOnScroll(t.loadHistory),this.setupInitialHistory(t)}return T(e,[{key:"fetchHistory",value:function(){var t=k(y().mark(function t(n){var r,i,a=this;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=Vt.addMessage(this._messages),t.next=3,n();case 3:i=t.sent,this._messages.removeMessage(r),e.displayIntroMessages(this._messages.messageElementRefs),i.forEach(function(e){return a._messages.addAnyMessage(e,!0)}),setTimeout(function(){return Q.scrollToBottom(a._messages.elementRef)},0);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"processLoadedHistory",value:function(e){var t,n=this,r=this._messages,i=r.messageElementRefs,a=r.messageToElements,o=r.elementRef,s=null==(t=i.find(function(e){return!e.outerContainer.classList.contains(Zt.INTRO_CLASS)}))?void 0:t.outerContainer,l=o.scrollTop;null==e||e.reverse().map(function(e){var t=n._messages.addAnyMessage(_(_({},e),{},{sendUpdate:!0}),!0,!0);if(t){var r=tn.generateMessageBody(t,i,!0);a.unshift([t,r])}return t}).filter(function(e){return!!e}).reverse().forEach(function(e){return n._messages.sendClientUpdate(e,!0)}),s&&(o.scrollTop=l+s.offsetTop-40)}},{key:"populateMessages",value:function(e,t){this._messages.removeMessage(e),this._isPaginationComplete=t.findIndex(function(e){return!e})<0;var n=t.filter(function(e){return!!e});this.processLoadedHistory(n);var r=this._messages,i=r.messageElementRefs,a=r.avatar,o=r.name;tn.resetAllRoleElements(i,a,o)}},{key:"setupLoadHistoryOnScroll",value:function(){var t=k(y().mark(function t(n){var r=this;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this._messages.elementRef.onscroll=k(y().mark(function t(){var i,a;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r._isLoading||r._isPaginationComplete||0!==r._messages.elementRef.scrollTop){t.next=13;break}return r._isLoading=!0,i=Vt.addMessage(r._messages,!1),t.prev=3,t.next=6,n(r._index++);case 6:a=t.sent,r.populateMessages(i,a),r._isLoading=!1,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),r._messages.removeMessage(i),r._isPaginationComplete=!0,r._messages.addNewErrorMessage("service",e.FAILED_ERROR_MESSAGE,!0),console.error(t.t0);case 13:case"end":return t.stop()}},t,null,[[3,10]])}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"populateInitialHistory",value:function(e){var t=this;e.forEach(function(e){ae.processHistoryFile(e),t._messages.addAnyMessage(e,!0)})}},{key:"loadInitialHistory",value:function(){var t=k(y().mark(function t(n){var r,i,a,o=this;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this._isLoading=!0,r=Vt.addMessage(this._messages),t.prev=2,t.next=5,n(this._index++);case 5:i=t.sent,a=this._messages.elementRef.scrollTop,this.populateMessages(r,i),0===a&&setTimeout(function(){return Q.scrollToBottom(o._messages.elementRef)},0),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),this._messages.removeMessage(r),this._isPaginationComplete=!0,this._messages.addNewErrorMessage("service",e.FAILED_ERROR_MESSAGE,!0),console.error(t.t0);case 13:e.displayIntroMessages(this._messages.messageElementRefs),this._isLoading=!1;case 14:case"end":return t.stop()}},t,this,[[2,10]])}));return function(e){return t.apply(this,arguments)}}()},{key:"setupInitialHistory",value:function(){var e=k(y().mark(function e(t){var n,r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.loadHistory&&this.loadInitialHistory(t.loadHistory),(r=t.history||ae.processHistory(t)||(null==(n=this._messages.browserStorage)?void 0:n.get()))&&(this.populateInitialHistory(r),this._index+=1);case 3:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"addErrorPrefix",value:function(t){var n;null!==(n=t.permittedErrorPrefixes)&&void 0!==n||(t.permittedErrorPrefixes=[]),t.permittedErrorPrefixes.push(e.FAILED_ERROR_MESSAGE)}},{key:"displayIntroMessages",value:function(e){for(var t=0;t<e.length;t+=1){var n=e[0];if(!n.outerContainer.classList.contains(Zt.INTRO_CLASS))break;n.outerContainer.style.display=""}}}])}();Sn.FAILED_ERROR_MESSAGE="Failed to load history";var _n=Sn,En=function(){function e(){x(this,e)}return T(e,null,[{key:"getCharacterLimitMessages",value:function(e,t){var n;if(-1===t)return e;for(var r=0,i=e.length-1;i>=0;i-=1){var a=null==(n=e[i])?void 0:n.text;if(void 0!==a&&(r+=a.length)>t){e[i].text=a.substring(0,a.length-(r-t));break}}return e.slice(Math.max(i,0))}},{key:"getMaxMessages",value:function(e,t){return e.slice(Math.max(e.length-t,0))}},{key:"processMessages",value:function(t,n,r){return void 0!==n?n>0&&(t=e.getMaxMessages(t,n)):t=[t[t.length-1]],t=JSON.parse(JSON.stringify(t)),void 0===r?t:e.getCharacterLimitMessages(t,r)}}])}(),wn=function(){function e(){x(this,e)}return T(e,null,[{key:"parseConfig",value:function(e,t,n,r){var i,a={files:t};if("object"==w(r)){ae.processFileConfigConnect(r);var o=r.files,s=r.connect,l=r.button;o&&(o.infoModal&&(a.files.infoModal=o.infoModal,null!=(i=o.infoModal)&&i.textMarkDown&&(a.infoModalTextMarkUp=n.render(o.infoModal.textMarkDown))),o.acceptedFormats&&(a.files.acceptedFormats=o.acceptedFormats),o.maxNumberOfFiles&&(a.files.maxNumberOfFiles=o.maxNumberOfFiles)),a.button=l,s&&(s.headers||s.method||s.url||s.credentials||e.headers||e.method||e.url||e.credentials)&&(a.connect={url:(null==s?void 0:s.url)||e.url,method:(null==s?void 0:s.method)||e.method,headers:(null==s?void 0:s.headers)||e.headers,credentials:(null==s?void 0:s.credentials)||e.credentials})}return a}},{key:"processMixedFiles",value:function(t,n,r){if(r){t.fileTypes.mixedFiles=e.parseConfig(t.connectSettings,{acceptedFormats:""},n,r)}}},{key:"processMicrophone",value:function(t,n,r,i){var a,o,s,l,u,c,d,f,p=_({acceptedFormats:"audio/*"},(null==(s=t.fileTypes.audio)?void 0:s.files)||{});r&&(void 0!==navigator.mediaDevices.getUserMedia?(t.recordAudio=e.parseConfig(t.connectSettings,p,n,r),"object"==w(r)&&r.files&&(null!==(a=(l=t.recordAudio).files)&&void 0!==a||(l.files={}),t.recordAudio.files.format=null==(u=r.files)?void 0:u.format,t.recordAudio.files.maxDurationSeconds=null==(c=r.files)?void 0:c.maxDurationSeconds,null!=(d=t.fileTypes.audio)&&d.files&&(null!==(o=(f=t.fileTypes.audio.files).maxNumberOfFiles)&&void 0!==o||(f.maxNumberOfFiles=r.files.maxNumberOfFiles)))):i||(t.fileTypes.audio=e.parseConfig(t.connectSettings,p,n,r)))}},{key:"processAudioConfig",value:function(t,n,r,i){if(r||i){var a=_({acceptedFormats:"audio/*"},(null==i?void 0:i.files)||{});t.fileTypes.audio=e.parseConfig(t.connectSettings,a,n,r)}}},{key:"processGifConfig",value:function(t,n,r,i){if(r||i){var a=_({acceptedFormats:"image/gif"},(null==i?void 0:i.files)||{});t.fileTypes.gifs=e.parseConfig(t.connectSettings,a,n,r)}}},{key:"processCamera",value:function(t,n,r,i){var a,o,s,l,u,c=_({acceptedFormats:"image/*"},(null==(o=t.fileTypes.images)?void 0:o.files)||{});r&&(void 0!==navigator.mediaDevices.getUserMedia?(t.camera=e.parseConfig(t.connectSettings,c,n,r),"object"==w(r)&&(t.camera.modalContainerStyle=r.modalContainerStyle,r.files&&(null!==(a=(s=t.camera).files)&&void 0!==a||(s.files={}),t.camera.files.format=null==(l=r.files)?void 0:l.format,t.camera.files.dimensions=null==(u=r.files)?void 0:u.dimensions))):i||(t.fileTypes.images=e.parseConfig(t.connectSettings,c,n,r)))}},{key:"processImagesConfig",value:function(t,n,r,i){if(r||i){var a=_({acceptedFormats:"image/*"},(null==i?void 0:i.files)||{});t.fileTypes.images=e.parseConfig(t.connectSettings,a,n,r)}}},{key:"populateDefaultFileIO",value:function(e,t){var n,r,i,a,o;e&&(null!==(n=e.files)&&void 0!==n||(e.files={}),null!==(r=(a=e.files).acceptedFormats)&&void 0!==r||(a.acceptedFormats=t),null!==(i=(o=e.files).maxNumberOfFiles)&&void 0!==i||(o.maxNumberOfFiles=1))}},{key:"set",value:function(t,n,r){e.populateDefaultFileIO(null==r?void 0:r.audio,".4a,.mp3,.webm,.mp4,.mpga,.wav,.mpeg,.m4a"),e.populateDefaultFileIO(null==r?void 0:r.images,".png,.jpg");var i=Ut.createNew(t.remarkable);e.processImagesConfig(n,i,t.images,null==r?void 0:r.images),e.processCamera(n,i,t.camera,t.images),e.processGifConfig(n,i,t.gifs,null==r?void 0:r.gifs),e.processAudioConfig(n,i,t.audio,null==r?void 0:r.audio),e.processMicrophone(n,i,t.microphone,t.audio),e.processMixedFiles(n,i,t.mixedFiles)}}])}(),xn=function(){function e(t,n,r){var i,a,o,s,l,u;x(this,e),this.rawBody={},this.validateKeyProperty=!1,this.canSendMessage=e.canSendMessage,this.connectSettings={},this.fileTypes={},this.completionsHandlers={},this.streamHandlers={},this.deepChat=t,this.demo=r,Object.assign(this.rawBody,null==(a=t.connect)?void 0:a.additionalBodyProps),this.totalMessagesMaxCharLength=null==(o=null==t?void 0:t.requestBodyLimits)?void 0:o.totalMessagesMaxCharLength,this.maxMessages=null==(s=null==t?void 0:t.requestBodyLimits)?void 0:s.maxMessages,wn.set(t,this,n),t.connect&&(this.connectSettings=t.connect),this.demo&&(null!==(i=(l=this.connectSettings).url)&&void 0!==i||(l.url=gn.URL)),this.connectSettings.websocket&&yn.setup(this),this.stream=(null==(u=this.deepChat.connect)?void 0:u.stream)||ae.checkForStream(this.deepChat),t.loadHistory&&_n.addErrorPrefix(this)}return T(e,[{key:"verifyKey",value:function(e,t){}},{key:"getServiceIOByType",value:function(e){if(e.type.startsWith("audio")&&this.fileTypes.audio)return this.fileTypes.audio;if(e.type.startsWith("image")){if(this.fileTypes.gifs&&e.type.endsWith("/gif"))return this.fileTypes.gifs;if(this.fileTypes.images)return this.fileTypes.images;if(this.camera)return this.camera}return this.fileTypes.mixedFiles}},{key:"request",value:function(){var e=k(y().mark(function e(t,n){var r,i=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=!(i.length>2&&void 0!==i[2])||i[2],e.abrupt("return",this.stream&&!mn.isSimulation(this.stream)?mn.request(this,t,n,r):kn.request(this,t,n,r));case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"callAPIWithText",value:function(){var e=k(y().mark(function e(t,n){var r,i,a,o,s,l,u,c;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=_({messages:n},this.rawBody),c=!1,null!=(a=this.connectSettings.headers)&&a["Content-Type"]||(null!==(r=(o=this.connectSettings).headers)&&void 0!==r||(o.headers={}),null!==(i=(s=this.connectSettings.headers)["Content-Type"])&&void 0!==i||(s["Content-Type"]="application/json"),c=!0),e.next=5,this.request(u,t);case 5:c&&(null==(l=this.connectSettings.headers)||delete l["Content-Type"]);case 6:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"callApiWithFiles",value:function(){var t=k(y().mark(function t(n,r,i){var a,o,s;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.createCustomFormDataBody(this.rawBody,r,i),o=this.connectSettings,s=this.getServiceIOByType(i[0]),this.connectSettings=(null==s?void 0:s.connect)||this.connectSettings,t.next=4,this.request(a,n,!1);case 4:this.connectSettings=o;case 5:case"end":return t.stop()}},t,this)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n,r){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r?this.callApiWithFiles(t,n,r):this.callAPIWithText(t,n);case 1:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"callAPI",value:function(){var e=k(y().mark(function e(t,n){var r,i,a;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:i=En.processMessages(n.messageToElements.map(function(e){return l(e,1)[0]}),this.maxMessages,this.totalMessagesMaxCharLength),!this.connectSettings.websocket||this.connectSettings.handler&&this.connectSettings.url===gn.URL?this.callServiceAPI(n,i,t.files):(a=_({messages:i},this.rawBody),t.files&&null!=(r=this.getServiceIOByType(t.files[0]))&&r.connect?this.callApiWithFiles(n,i,t.files):yn.sendWebsocket(this,a,n,!1));case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.result){e.next=2;break}return e.abrupt("return",ae.handleResponseProperty(t));case 2:if(!on.validateResponseFormat(t,!!this.stream)){e.next=4;break}return e.abrupt("return",t);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"isDirectConnection",value:function(){return!1}},{key:"isWebModel",value:function(){return!1}},{key:"isCustomView",value:function(){return!1}}],[{key:"canSendMessage",value:function(e,t,n){return!!n||(!(!e||""===e.trim())||!!(t&&t.length>0))}},{key:"createCustomFormDataBody",value:function(e,t,n){var r=new FormData;n.forEach(function(e){return r.append("files",e)}),Object.keys(e).forEach(function(t){return r.append(t,String(e[t]))});var i=0;t.slice(0,t.length-1).forEach(function(e){r.append("message".concat(i+=1),JSON.stringify(e))});var a=t[t.length-1];return a.text&&(delete a.files,r.append("message".concat(i+=1),JSON.stringify(a))),r}}])}(),Cn=function(e){function t(e,n,r,i,a){var o,s;return x(this,t),(o=f(this,t,[e,a])).insertKeyPlaceholderText="API Key",o.keyHelpUrl="",Object.assign(o.rawBody,null==(s=e.connect)?void 0:s.additionalBodyProps),o._keyVerificationDetails=n,o._buildHeadersFunc=r,i&&o.setApiKeyProperties(i),o.connectSettings=o.buildConnectSettings(o.key||"",e.connect),o}return v(t,e),T(t,[{key:"setApiKeyProperties",value:function(e){this.key=e.key,e.validateKeyProperty&&(this.validateKeyProperty=e.validateKeyProperty)}},{key:"buildConnectSettings",value:function(e,t){var n,r=null!==t&&void 0!==t?t:{};return null!==(n=r.headers)&&void 0!==n||(r.headers={}),Object.assign(r.headers,this._buildHeadersFunc(e)),r}},{key:"keyAuthenticated",value:function(e,t){this.connectSettings=this.buildConnectSettings(t,this.connectSettings),this.key=t,e()}},{key:"verifyKey",value:function(e,t){var n=this._keyVerificationDetails,r=n.url,i=n.method,a=n.handleVerificationResult,o=n.createHeaders,s=n.body,l=(null==o?void 0:o(e))||this._buildHeadersFunc(e);kn.verifyKey(e,r,l,i,this.keyAuthenticated.bind(this,t.onSuccess),t.onFail,t.onLoad,a,s)}},{key:"isDirectConnection",value:function(){return!0}}])}(xn),Tn=function(){function e(){x(this,e)}return T(e,null,[{key:"waitForPropertiesToBeUpdatedBeforeRender",value:function(t){t._propUpdated_=!1,setTimeout(function(){t._propUpdated_?e.waitForPropertiesToBeUpdatedBeforeRender(t):(t._waitingToRender_=!1,t.onRender())})}},{key:"attemptRender",value:function(t){t._propUpdated_=!0,t._waitingToRender_||(t._waitingToRender_=!0,e.waitForPropertiesToBeUpdatedBeforeRender(t))}}])}(),An=function(e){function t(){var e;return x(this,t),(e=f(this,t))._waitingToRender_=!1,e._propUpdated_=!1,Object.keys(t._attributeToProperty_).forEach(function(n){var r=t._attributeToProperty_[n];e.constructPropertyAccessors(r),e.hasOwnProperty(n)||e.constructPropertyAccessors(r,n)}),e}return v(t,e),T(t,[{key:"constructPropertyAccessors",value:function(e,t){var n;Object.defineProperty(this,t||e,{get:function(){return n},set:function(r){n=r,t?this[e]=r:Tn.attemptRender(this)}})}},{key:"attributeChangedCallback",value:function(e,n,r){if(n!==r){var i=t._attributes_[e](r);this[t._attributeToProperty_[e]]=i}}},{key:"onRender",value:function(){}}],[{key:"observedAttributes",get:function(){return Object.keys(t._attributes_)||[]}}])}(s(HTMLElement));An._attributes_={},An._attributeToProperty_={};var Mn=An,Ln=function(){return T(function e(){x(this,e)},null,[{key:"createSVGElement",value:function(e){return(new DOMParser).parseFromString(e,"image/svg+xml").documentElement}}])}(),Rn=function(){function e(){x(this,e)}return T(e,null,[{key:"changeVisibility",value:function(t,n,r,i){i.target.id===e.VISIBLE_ICON_ID?(n.style.display="none",r.style.display="block",t.type="password"):(n.style.display="block",r.style.display="none",t.type="text")}},{key:"createIconElement",value:function(e,t){var n=Ln.createSVGElement(e);return n.id=t,n.classList.add("visibility-icon"),n}},{key:"create",value:function(t){var n=document.createElement("div");n.id="visibility-icon-container";var r=e.createIconElement('<?xml version="1.0" standalone="no"?>\n<svg version="1.1"\n\txmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n\txmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="0.9em" height="0.9em"\n\tviewBox="0 0 1200 1200" enable-background="new 0 0 1200 1200">\n\t\t<path id="path6686" inkscape:connector-curvature="0" d="M779.843,599.925c0,95.331-80.664,172.612-180.169,172.612\n\t\t\tc-99.504,0-180.168-77.281-180.168-172.612c0-95.332,80.664-172.612,180.168-172.612\n\t\t\tC699.179,427.312,779.843,504.594,779.843,599.925z M600,240.521c-103.025,0.457-209.814,25.538-310.904,73.557\n\t\t\tc-75.058,37.122-148.206,89.496-211.702,154.141C46.208,501.218,6.431,549,0,599.981c0.76,44.161,48.13,98.669,77.394,131.763\n\t\t\tc59.543,62.106,130.786,113.018,211.702,154.179c94.271,45.751,198.616,72.092,310.904,73.557\n\t\t\tc103.123-0.464,209.888-25.834,310.866-73.557c75.058-37.122,148.243-89.534,211.74-154.179\n\t\t\tc31.185-32.999,70.962-80.782,77.394-131.763c-0.76-44.161-48.13-98.671-77.394-131.764\n\t\t\tc-59.543-62.106-130.824-112.979-211.74-154.141C816.644,268.36,712.042,242.2,600,240.521z M599.924,329.769\n\t\t\tc156.119,0,282.675,120.994,282.675,270.251c0,149.256-126.556,270.25-282.675,270.25S317.249,749.275,317.249,600.02\n\t\t\tC317.249,450.763,443.805,329.769,599.924,329.769L599.924,329.769z"/>\n</svg>\n',e.VISIBLE_ICON_ID);r.style.display="none",n.appendChild(r);var i=e.createIconElement('<?xml version="1.0" standalone="no"?>\n<svg version="1.1"\n\txmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n\txmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="0.9em" height="0.9em"\n\tviewBox="0 0 1200 1200" enable-background="new 0 0 1200 1200">\n\t\t<path d="\n\t\t\tM669.727,273.516c-22.891-2.476-46.15-3.895-69.727-4.248c-103.025,0.457-209.823,25.517-310.913,73.536\n\t\t\tc-75.058,37.122-148.173,89.529-211.67,154.174C46.232,529.978,6.431,577.76,0,628.74c0.76,44.162,48.153,98.67,77.417,131.764\n\t\t\tc59.543,62.106,130.754,113.013,211.67,154.174c2.75,1.335,5.51,2.654,8.276,3.955l-75.072,131.102l102.005,60.286l551.416-960.033\n\t\t\tl-98.186-60.008L669.727,273.516z M902.563,338.995l-74.927,129.857c34.47,44.782,54.932,100.006,54.932,159.888\n\t\t\tc0,149.257-126.522,270.264-282.642,270.264c-6.749,0-13.29-0.728-19.922-1.172l-49.585,85.84c22.868,2.449,45.99,4.233,69.58,4.541\n\t\t\tc103.123-0.463,209.861-25.812,310.84-73.535c75.058-37.122,148.246-89.529,211.743-154.174\n\t\t\tc31.186-32.999,70.985-80.782,77.417-131.764c-0.76-44.161-48.153-98.669-77.417-131.763\n\t\t\tc-59.543-62.106-130.827-113.013-211.743-154.175C908.108,341.478,905.312,340.287,902.563,338.995L902.563,338.995z\n\t\t\tM599.927,358.478c6.846,0,13.638,0.274,20.361,0.732l-58.081,100.561c-81.514,16.526-142.676,85.88-142.676,168.897\n\t\t\tc0,20.854,3.841,40.819,10.913,59.325c0.008,0.021-0.008,0.053,0,0.074l-58.228,100.854\n\t\t\tc-34.551-44.823-54.932-100.229-54.932-160.182C317.285,479.484,443.808,358.477,599.927,358.478L599.927,358.478z M768.896,570.513\n\t\t\tL638.013,797.271c81.076-16.837,141.797-85.875,141.797-168.603C779.81,608.194,775.724,588.729,768.896,570.513L768.896,570.513z"\n\t\t\t/>\n</svg>\n',"not-visible-icon");return n.appendChild(i),n.onclick=e.changeVisibility.bind(this,t,r,i),n}}])}();Rn.VISIBLE_ICON_ID="visible-icon";var In=Rn,On=function(){function e(){x(this,e)}return T(e,null,[{key:"createCautionText",value:function(){var e=document.createElement("a");return e.classList.add("insert-key-input-help-text"),e.innerText="Please exercise CAUTION when inserting your API key outside of deepchat.dev or localhost!!",e}},{key:"createHelpLink",value:function(e){var t=document.createElement("a");return t.classList.add("insert-key-input-help-text"),t.href=e,t.innerText="Find more info here",t.target="_blank",t}},{key:"createFailText",value:function(){var e=document.createElement("div");return e.id="insert-key-input-invalid-text",e.style.display="none",e}},{key:"createHelpTextContainer",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=document.createElement("div");r.id="insert-key-help-text-container";var i=document.createElement("div");i.id="insert-key-help-text-contents";var a=e.createFailText();if(i.appendChild(a),t){var o=e.createHelpLink(t);i.appendChild(o)}if(!0===n){var s=e.createCautionText();i.appendChild(s)}return r.appendChild(i),{helpTextContainerElement:r,failTextElement:a}}},{key:"onFail",value:function(e,t,n,r){e.classList.replace("insert-key-input-valid","insert-key-input-invalid"),n.innerText=r,n.style.display="block",t.innerText="Start",e.classList.remove("loading")}},{key:"onLoad",value:function(e,t){e.classList.add("loading"),t.innerHTML='<div id="loading-key"></div>'}},{key:"verifyKey",value:function(e,t,n){var r=e.value.trim();n.verifyKey(r,t)}},{key:"addVerificationEvents",value:function(t,n,r,i,a){var o={onSuccess:i,onFail:e.onFail.bind(this,t,n,r),onLoad:e.onLoad.bind(this,t,n)},s=e.verifyKey.bind(this,t,o,a);n.onclick=s,t.onkeydown=function(e){!t.classList.contains("loading")&&e.key===j.ENTER&&s()}}},{key:"createStartButton",value:function(){var e=document.createElement("div");return e.id="start-button",e.innerText="Start",e}},{key:"onInputFocus",value:function(e){e.target.classList.replace("insert-key-input-invalid","insert-key-input-valid")}},{key:"createInput",value:function(t){var n=document.createElement("div");n.id="insert-key-input-container";var r=document.createElement("input");return r.id="insert-key-input",r.placeholder=t||"API Key",r.type="password",r.classList.add("insert-key-input-valid"),r.onfocus=e.onInputFocus,n.appendChild(r),n}},{key:"createContents",value:function(t,n){var r,i=document.createElement("div");i.id="insert-key-contents";var a=e.createInput(n.insertKeyPlaceholderText),o=a.children[0],s=In.create(o);a.appendChild(s),i.appendChild(a);var l=e.createStartButton(),u=e.createHelpTextContainer(n.keyHelpUrl,null==(r=n.deepChat._insertKeyViewStyles)?void 0:r.displayCautionText),c=u.helpTextContainerElement,d=u.failTextElement;return i.appendChild(l),i.appendChild(c),e.addVerificationEvents(o,l,d,t,n),i}},{key:"createElements",value:function(t,n){var r=document.createElement("div");r.id="insert-key-view";var i=e.createContents(t,n);return r.appendChild(i),r}},{key:"render",value:function(t,n,r){var i=e.createElements(n,r);t.replaceChildren(i)}}])}(),Pn=function(){function e(){x(this,e)}return T(e,null,[{key:"enableButtons",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;window.webLLM?(t&&(t.disabled=!1),n&&(n.disabled=!1)):r<4*Fn.MODULE_SEARCH_LIMIT_S&&setTimeout(function(){return e.enableButtons(t,n,r+1)},250)}},{key:"setUpInitial",value:function(t,n,r,i){var a=(null==n?void 0:n.downloadClass)||e.DOWNLOAD_BUTTON_CLASS,o=(null==n?void 0:n.uploadClass)||e.UPLOAD_BUTTON_CLASS,s=(null==n?void 0:n.fileInputClass)||e.FILE_INPUT_CLASS;return setTimeout(function(){var n=null==r?void 0:r.getElementsByClassName(a)[0],i=null==r?void 0:r.getElementsByClassName(s)[0],l=null==r?void 0:r.getElementsByClassName(o)[0];n&&(n.onclick=function(){return t()}),i&&(i.onchange=function(){i.files&&i.files.length>0&&t(i.files)}),l&&(l.onclick=function(){return i.click()}),(n||l)&&e.enableButtons(n,l)}),(null==n?void 0:n.initialHtml)||'<div>\n        Download or upload a web model that will run entirely on your browser: <br/> \n        <button disabled class="'.concat(a,' deep-chat-button deep-chat-web-model-button">Download</button>\n        ').concat(i?"":'<input type="file" class="'.concat(s,'" hidden multiple />\n          <button disabled class="').concat(o,' deep-chat-button deep-chat-web-model-button">Upload</button>'),"\n      </div>")}},{key:"exportFile",value:function(e){for(var t=document.createElement("a"),n=function(n){setTimeout(function(){for(var r=4*n,i=r;i<Math.min(r+4,e.length);i+=1){var a=URL.createObjectURL(e[i]);t.href=a,t.download=e[i].name,document.body.appendChild(t),t.click(),URL.revokeObjectURL(a)}},500*n)},r=0;r<e.length/4;r+=1)n(r)}},{key:"setUpAfterLoad",value:function(t,n,r,i){var a=(null==n?void 0:n.exportFilesClass)||e.EXPORT_BUTTON_CLASS;return setTimeout(function(){var n=null==r?void 0:r.getElementsByClassName(a)[0];n&&(n.onclick=function(){return e.exportFile(t)})}),(null==n?void 0:n.afterLoadHtml)||"<div>\n        Model loaded successfully and has been cached for future requests.\n        ".concat(i?"":'<br/> <button style="margin-top: 5px" class="'.concat(a,' deep-chat-button">Export</button>'),"\n      </div>")}}])}();Pn.DOWNLOAD_BUTTON_CLASS="deep-chat-download-button",Pn.UPLOAD_BUTTON_CLASS="deep-chat-upload-button",Pn.FILE_INPUT_CLASS="deep-chat-file-input",Pn.EXPORT_BUTTON_CLASS="deep-chat-export-button";var Nn=Pn,Dn={model_list:[{model_url:"https://huggingface.co/mlc-ai/Llama-2-7b-chat-hf-q4f32_1-MLC/resolve/main/",local_id:"Llama-2-7b-chat-hf-q4f32_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Llama-2-7b-chat-hf/Llama-2-7b-chat-hf-q4f32_1-ctx4k_cs1k-webgpu.wasm",vram_required_MB:9109.03,low_resource_required:!1},{model_url:"https://huggingface.co/mlc-ai/Llama-2-7b-chat-hf-q4f16_1-MLC/resolve/main/",local_id:"Llama-2-7b-chat-hf-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Llama-2-7b-chat-hf/Llama-2-7b-chat-hf-q4f16_1-ctx4k_cs1k-webgpu.wasm",vram_required_MB:6749.02,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/Llama-2-7b-chat-hf-q4f16_1-MLC/resolve/main/",local_id:"Llama-2-7b-chat-hf-q4f16_1-1k",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Llama-2-7b-chat-hf/Llama-2-7b-chat-hf-q4f16_1-ctx1k-webgpu.wasm",vram_required_MB:4618.52,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/Llama-2-13b-chat-hf-q4f16_1-MLC/resolve/main/",local_id:"Llama-2-13b-chat-hf-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Llama-2-13b-chat-hf/Llama-2-13b-chat-hf-q4f16_1-ctx4k_cs1k-webgpu.wasm",vram_required_MB:11814.09,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/Llama-2-70b-chat-hf-q4f16_1-MLC/resolve/main/",local_id:"Llama-2-70b-chat-hf-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Llama-2-70b-chat-hf/Llama-2-70b-chat-hf-q4f16_1-ctx4k_cs1k-webgpu.wasm",vram_required_MB:43729.05,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/RedPajama-INCITE-Chat-3B-v1-q4f16_1-MLC/resolve/main/",local_id:"RedPajama-INCITE-Chat-3B-v1-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/RedPajama-INCITE-Chat-3B-v1/RedPajama-INCITE-Chat-3B-v1-q4f16_1-ctx2k-webgpu.wasm",vram_required_MB:2972.09,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/RedPajama-INCITE-Chat-3B-v1-q4f32_1-MLC/resolve/main/",local_id:"RedPajama-INCITE-Chat-3B-v1-q4f32_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/RedPajama-INCITE-Chat-3B-v1/RedPajama-INCITE-Chat-3B-v1-q4f32_1-ctx2k-webgpu.wasm",vram_required_MB:3928.09,low_resource_required:!1},{model_url:"https://huggingface.co/mlc-ai/RedPajama-INCITE-Chat-3B-v1-q4f16_1-MLC/resolve/main/",local_id:"RedPajama-INCITE-Chat-3B-v1-q4f16_1-1k",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/RedPajama-INCITE-Chat-3B-v1/RedPajama-INCITE-Chat-3B-v1-q4f16_1-ctx1k-webgpu.wasm",vram_required_MB:2041.09,low_resource_required:!0,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/RedPajama-INCITE-Chat-3B-v1-q4f32_1-MLC/resolve/main/",local_id:"RedPajama-INCITE-Chat-3B-v1-q4f32_1-1k",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/RedPajama-INCITE-Chat-3B-v1/RedPajama-INCITE-Chat-3B-v1-q4f32_1-ctx1k-webgpu.wasm",vram_required_MB:2558.09,low_resource_required:!0},{model_url:"https://huggingface.co/mlc-ai/WizardMath-7B-V1.1-q4f16_1-MLC/resolve/main/",local_id:"WizardMath-7B-V1.1-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Mistral-7B-Instruct-v0.2/Mistral-7B-Instruct-v0.2-q4f16_1-sw4k_cs1k-webgpu.wasm",vram_required_MB:6079.02,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/Mistral-7B-Instruct-v0.2-q4f16_1-MLC/resolve/main/",local_id:"Mistral-7B-Instruct-v0.2-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Mistral-7B-Instruct-v0.2/Mistral-7B-Instruct-v0.2-q4f16_1-sw4k_cs1k-webgpu.wasm",vram_required_MB:6079.02,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/OpenHermes-2.5-Mistral-7B-q4f16_1-MLC/resolve/main/",local_id:"OpenHermes-2.5-Mistral-7B-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Mistral-7B-Instruct-v0.2/Mistral-7B-Instruct-v0.2-q4f16_1-sw4k_cs1k-webgpu.wasm",vram_required_MB:6079.02,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/NeuralHermes-2.5-Mistral-7B-q4f16_1-MLC/resolve/main/",local_id:"NeuralHermes-2.5-Mistral-7B-q4f16_1",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/Mistral-7B-Instruct-v0.2/Mistral-7B-Instruct-v0.2-q4f16_1-sw4k_cs1k-webgpu.wasm",vram_required_MB:6079.02,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/TinyLlama-1.1B-Chat-v0.4-q0f16-MLC/resolve/main/",local_id:"TinyLlama-1.1B-Chat-v0.4-q0f16",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/TinyLlama-1.1B-Chat-v0.4/TinyLlama-1.1B-Chat-v0.4-q0f16-ctx2k-webgpu.wasm",vram_required_MB:5063.52,low_resource_required:!1,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/TinyLlama-1.1B-Chat-v0.4-q0f32-MLC/resolve/main/",local_id:"TinyLlama-1.1B-Chat-v0.4-q0f32",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/TinyLlama-1.1B-Chat-v0.4/TinyLlama-1.1B-Chat-v0.4-q0f32-ctx2k-webgpu.wasm",vram_required_MB:5394.53,low_resource_required:!1},{model_url:"https://huggingface.co/mlc-ai/TinyLlama-1.1B-Chat-v0.4-q4f16_1-MLC/resolve/main/",local_id:"TinyLlama-1.1B-Chat-v0.4-q4f16_1-1k",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/TinyLlama-1.1B-Chat-v0.4/TinyLlama-1.1B-Chat-v0.4-q4f16_1-ctx1k-webgpu.wasm",vram_required_MB:899.11,low_resource_required:!0,required_features:["shader-f16"]},{model_url:"https://huggingface.co/mlc-ai/TinyLlama-1.1B-Chat-v0.4-q4f32_1-MLC/resolve/main/",local_id:"TinyLlama-1.1B-Chat-v0.4-q4f32_1-1k",model_lib_url:"https://raw.githubusercontent.com/mlc-ai/binary-mlc-llm-libs/main/TinyLlama-1.1B-Chat-v0.4/TinyLlama-1.1B-Chat-v0.4-q4f32_1-ctx1k-webgpu.wasm",vram_required_MB:992.11,low_resource_required:!0}],use_web_worker:!0},Bn=function(e){function t(e){var n,r,i;return x(this,t),(n=f(this,t,[e]))._isModelLoaded=!1,n._isModelLoading=!1,n._loadOnFirstMessage=!1,n._webModel={},n.permittedErrorPrefixes=[t.MULTIPLE_MODELS_ERROR,t.WEB_LLM_NOT_FOUND_ERROR,t.GENERIC_ERROR],n._conversationHistory=[],"object"==w(e.webModel)&&(n._webModel=e.webModel),null!=(r=n._webModel.load)&&r.clearCache&&t.clearAllCache(),n.findModelInWindow(e),n.canSendMessage=n.canSubmit.bind(p(n)),n._chatEl=null==(i=e.shadowRoot)?void 0:i.children[0],e.history&&t.setUpHistory(n._conversationHistory,e.history),n}return v(t,e),T(t,[{key:"setUpMessages",value:function(e){var t=this;this._messages=e,this._removeIntro=function(){e.removeIntroductoryMessage(),t._removeIntro=void 0}}},{key:"findModelInWindow",value:function(e){var n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;window.webLLM?this.configureInit(this.shouldAddIntroMessage(e.introMessage)):i>t.MODULE_SEARCH_LIMIT_S?(null==(n=this._messages)||n.addNewErrorMessage("service",t.WEB_LLM_NOT_FOUND_ERROR),console.error("The deep-chat-web-llm module has not been attached to the window object. Please see the following guide:"),console.error("https://deepchat.dev/examples/externalModules")):setTimeout(function(){return r.findModelInWindow(e,i+1)},1e3)}},{key:"shouldAddIntroMessage",value:function(e){var t;return!e&&this._webModel&&!1!==(null==(t=this._webModel.introMessage)?void 0:t.displayed)}},{key:"scrollToTop",value:function(e){var t,n=this;!1!==(null==(t=this._webModel.introMessage)?void 0:t.autoScroll)&&setTimeout(function(){var e,t;null!=(e=n._messages)&&e.elementRef&&Q.scrollToTop(null==(t=n._messages)?void 0:t.elementRef)},e)}},{key:"getIntroMessage",value:function(e){if(this.shouldAddIntroMessage(e)&&this._chatEl){var t=Nn.setUpInitial(this.init.bind(this),this._webModel.introMessage,this._chatEl,!!this._webModel.worker);return this.scrollToTop(1),{role:tn.AI_ROLE,html:t,sendUpdate:!1}}}},{key:"configureInit",value:function(){var e=k(y().mark(function e(t){var n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this._webModel.load)){e.next=8;break}if(!n.onInit){e.next=5;break}return this.init(),e.abrupt("return");case 5:if(!n.onMessage){e.next=8;break}return this._loadOnFirstMessage=!0,e.abrupt("return");case 8:t||this.init();case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=k(y().mark(function e(t){var n,r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(n=this._messages)||n.removeError(),r=this.attemptToCreateChat(),e.t0=r,!e.t0){e.next=6;break}return e.next=6,this.loadModel(r,t);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"attemptToCreateChat",value:function(){var e;if(t.chat)return null==(e=this._messages)||e.addNewErrorMessage("service",t.MULTIPLE_MODELS_ERROR),void console.error(t.MULTIPLE_MODELS_ERROR);if(!this._isModelLoaded&&!this._isModelLoading){var n=this._webModel.worker;return Dn.use_web_worker&&n?new window.webLLM.ChatWorkerClient(n):new window.webLLM.ChatModule}}},{key:"getConfig",value:function(){var e,n=t.DEFAULT_MODEL;this._webModel.model&&(n=this._webModel.model);var r=JSON.parse(JSON.stringify(Dn));if(this._webModel.urls){var i=r.model_list.find(function(e){return e.local_id=n});i&&(this._webModel.urls.model&&(i.model_url=this._webModel.urls.model),this._webModel.urls.wasm&&(i.model_lib_url=this._webModel.urls.wasm))}return null!=(e=this._webModel.load)&&e.skipCache&&(r.use_cache=!1),{model:n,appConfig:r}}},{key:"loadModel",value:function(){var e=k(y().mark(function e(n,r){var i,a,o,s,l,u,c,d,f,p,h,m,v,g,b,k=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.scrollToTop(),t.chat=n,this._isModelLoading=!0,d=!1===(null==(i=this._webModel.introMessage)?void 0:i.displayed),f=function(e){var t;null==(t=k._messages)||t.addNewMessage({html:"<div>".concat(e.text,"</div>"),overwrite:!0,sendUpdate:!1}),d&&(setTimeout(function(){var e;return Q.scrollToBottom(null==(e=k._messages)?void 0:e.elementRef)}),d=!1)},t.chat.setInitProgressCallback(f),e.prev=4,h=this.getConfig(),m=h.model,v=h.appConfig,g={},this._webModel.instruction&&(g.conv_config={system:this._webModel.instruction}),this._conversationHistory.length>0&&(g.conversation_history=this._conversationHistory),e.next=10,t.chat.reload(m,g,v,r);case 10:p=e.sent,e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",this.unloadChat(e.t0));case 16:null==(o=(a=this.deepChat)._validationHandler)||o.call(a),null!=(s=this._webModel.introMessage)&&s.removeAfterLoad?!1===this._webModel.introMessage.displayed?null==(u=this._messages)||u.removeLastMessage():null==(c=this._removeIntro)||c.call(this):(b=Nn.setUpAfterLoad(p,this._webModel.introMessage,this._chatEl,!!this._webModel.worker),null==(l=this._messages)||l.addNewMessage({html:b,overwrite:!0,sendUpdate:!1})),this._isModelLoaded=!0,this._isModelLoading=!1;case 18:case"end":return e.stop()}},e,this,[[4,13]])}));return function(t,n){return e.apply(this,arguments)}}()},{key:"unloadChat",value:function(){var e=k(y().mark(function e(n){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(r=this._messages)||r.addNewErrorMessage("service",t.GENERIC_ERROR),console.error(n),this._isModelLoaded=!1,this._isModelLoading=!1,e.t0=t.chat,!e.t0){e.next=9;break}return e.next=8,t.chat.unload();case 8:t.chat=void 0;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"immediateResp",value:function(){var e=k(y().mark(function e(n,r,i){var a,o;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.generate(r,void 0,0);case 2:return e.t0=e.sent,a={text:e.t0},e.next=6,t.processResponse(this.deepChat,n,a);case 6:(o=e.sent)&&o.forEach(function(e){return n.addNewMessage(e)}),this.completionsHandlers.onFinish();case 8:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"streamResp",value:function(){var e=k(y().mark(function e(n,r,i){var a,o=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.streamHandlers.abortStream.abort=function(){i.interruptGenerate()},this.streamHandlers.onOpen(),a=new rn(n),e.next=4,i.generate(r,function(){var e=k(y().mark(function e(r,i){var s;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.processResponse(o.deepChat,n,{text:i});case 2:(s=e.sent)&&a.upsertStreamedMessage({text:s[0].text,overwrite:!0});case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 4:a.finaliseStreamedMessage(),this.streamHandlers.onClose();case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"generateRespByType",value:function(){var e=k(y().mark(function e(t,n,r,i){var a;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!r){e.next=6;break}return e.next=4,this.streamResp(t,n,i);case 4:e.next=8;break;case 6:return e.next=8,this.immediateResp(t,n,i);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),null==(a=this._messages)||a.addNewErrorMessage("service"),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"generateResp",value:function(){var e=k(y().mark(function e(t,n,r){var i,a,o,s,l,u,c;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n[n.length-1].text,e.next=3,on.processRequestInterceptor(this.deepChat,{body:{text:i}});case 3:a=e.sent,o=a.body,s=a.error,l=!!this.stream;try{s?(on.displayError(t,new Error(s)),(l?this.streamHandlers.onClose:this.completionsHandlers.onFinish)()):o&&o.text?this.generateRespByType(t,o.text,!!this.stream,r):(u=X.INVALID_MODEL_REQUEST({body:o},!1),console.error(u),c=l?this.streamHandlers.onClose:this.completionsHandlers.onFinish,on.onInterceptorError(t,u,c))}catch(u){this.unloadChat(u)}case 8:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(n,r){var i,a;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._isModelLoaded){e.next=7;break}if(!this._loadOnFirstMessage){e.next=6;break}return e.next=4,this.init();case 4:e.next=7;break;case 6:return e.abrupt("return");case 7:!t.chat||this._isModelLoading||(null!=(i=this._webModel.introMessage)&&i.removeAfterMessage&&(null==(a=this._removeIntro)||a.call(this)),n.addLoadingMessage(),this.generateResp(n,r,t.chat));case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"canSubmit",value:function(e){return!(null==e||!e.trim()||this._isModelLoading)&&(!!this._loadOnFirstMessage||!!this._isModelLoaded)}},{key:"isWebModel",value:function(){return!0}}],[{key:"setUpHistory",value:function(e,t){t.forEach(function(n,r){if(n.role===tn.USER_ROLE&&n.text){var i=t[r+1];null!=i&&i.text&&i.role!==tn.USER_ROLE&&e.push([n.text,i.text])}})}},{key:"processResponse",value:function(){var e=k(y().mark(function e(t,n,r){var i,a,o,s,l,u;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==(i=t.responseInterceptor)?void 0:i.call(t,r);case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=r;case 5:if(o=e.t0,!(null!=(a=t.connect)&&a.stream&&Array.isArray(o)&&o.length>1)){e.next=9;break}return console.error(X.INVALID_STREAM_ARRAY_RESPONSE),e.abrupt("return");case 9:if(s=Array.isArray(o)?o:[o],!(l=s.find(function(e){return"string"==typeof e.error}))){e.next=15;break}return on.displayError(n,new Error(l.error)),e.abrupt("return");case 15:if(!s.find(function(e){return!e||!e.text})){e.next=19;break}return u=X.INVALID_MODEL_RESPONSE(r,!!t.responseInterceptor,o),on.displayError(n,new Error(u)),e.abrupt("return");case 19:return e.abrupt("return",s);case 20:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"clearAllCache",value:function(){t.clearCache("webllm/model"),t.clearCache("webllm/wasm")}},{key:"clearCache",value:function(e){caches.open(e).then(function(e){e.keys().then(function(t){t.forEach(function(t){e.delete(t)})})})}}])}(xn);Bn.GENERIC_ERROR="Error, please check the [troubleshooting](https://deepchat.dev/docs/webModel#troubleshooting) section of documentation for help.",Bn.MULTIPLE_MODELS_ERROR="Cannot run multiple web models",Bn.WEB_LLM_NOT_FOUND_ERROR="WebLLM module not found",Bn.DEFAULT_MODEL="Llama-2-7b-chat-hf-q4f32_1",Bn.MODULE_SEARCH_LIMIT_S=5;var Fn=Bn,Un=function(){function e(){x(this,e)}return T(e,null,[{key:"buildHeaders",value:function(e){return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}},{key:"handleVerificationResult",value:function(e,t,n,r){var i=e;Array.isArray(i.error)&&"Error in `parameters`: field required"===i.error[0]?n(t):r(X.INVALID_KEY)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api-inference.huggingface.co/models/gpt2",method:"POST",handleVerificationResult:e.handleVerificationResult}}}])}(),jn=function(e){function t(e,n,r,i,a,o){var s;return x(this,t),(s=f(this,t,[e,Un.buildKeyVerificationDetails(),Un.buildHeaders,a,o])).insertKeyPlaceholderText="Hugging Face Token",s.keyHelpUrl="https://huggingface.co/settings/tokens",s.introPanelMarkUp='\n    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Hugging Face</b></div>\n    <p>First message may take an extented amount of time to complete as the model needs to be initialized.</p>',s.permittedErrorPrefixes=["Authorization header"],s.url="".concat(t.URL_PREFIX).concat(r),s.textInputPlaceholderText=n,"object"==w(i)&&(i.model&&(s.url="".concat(t.URL_PREFIX).concat(i.model)),i.options&&(s.rawBody.options=i.options),i.parameters&&(s.rawBody.parameters=i.parameters)),s}return v(t,e),T(t,[{key:"preprocessBody",value:function(e,t,n){var r,i=JSON.parse(JSON.stringify(e)),a=t[t.length-1].text;if(a)return null!==(r=i.options)&&void 0!==r||(i.options={}),i.options.wait_for_model=!0,_({inputs:a},i)}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n,r){var i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:i=this.preprocessBody(this.rawBody,n,r),kn.request(this,i,t);case 4:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()}])}(Cn);jn.URL_PREFIX="https://api-inference.huggingface.co/models/";var zn=jn,Hn=function(e){function t(e,n,r,i,a,o){var s;return x(this,t),(s=f(this,t,[e,n,r,i,a,o])).isTextInputDisabled=!0,s.canSendMessage=t.canSendFile,s}return v(t,e),T(t,[{key:"preprocessBody",value:function(e,t,n){return n[0]}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n,r){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:if(null!=r&&r[0]){e.next=4;break}throw new Error("No file was added");case 4:kn.poll(this,r[0],t,!1);case 5:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()}],[{key:"canSendFile",value:function(e,t){return!(null==t||!t[0])}}])}(zn),qn=function(e){function t(e){var n,r,i;return x(this,t),f(this,t,[e,"Attach an audio file","ehcalabres/wav2vec2-lg-xlsr-en-speech-emotion-recognition",null==(r=null==(n=e.directConnection)?void 0:n.huggingFace)?void 0:r.audioClassification,null==(i=e.directConnection)?void 0:i.huggingFace,{audio:{}}])}return v(t,e),T(t,[{key:"extractPollResultData",value:function(){var e=k(y().mark(function e(t){var n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.estimated_time){e.next=2;break}return e.abrupt("return",{timeoutMS:1e3*(t.estimated_time+1)});case 2:if(!t.error){e.next=4;break}throw t.error;case 4:return e.abrupt("return",{text:(null==(n=t[0])?void 0:n.label)||""});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(Hn),Vn=function(e){function t(e){var n,r,i;return x(this,t),f(this,t,[e,"Attach an image file","google/vit-base-patch16-224",null==(r=null==(n=e.directConnection)?void 0:n.huggingFace)?void 0:r.imageClassification,null==(i=e.directConnection)?void 0:i.huggingFace,{images:{}}])}return v(t,e),T(t,[{key:"extractPollResultData",value:function(){var e=k(y().mark(function e(t){var n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.estimated_time){e.next=2;break}return e.abrupt("return",{timeoutMS:1e3*(t.estimated_time+1)});case 2:if(!t.error){e.next=4;break}throw t.error;case 4:return e.abrupt("return",{text:(null==(n=t[0])?void 0:n.label)||""});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(Hn),Gn="data:image/png;base64,",Wn=function(){function e(){x(this,e)}return T(e,null,[{key:"buildHeaders",value:function(e){return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}},{key:"handleVerificationResult",value:function(e,t,n,r){e.message?r(X.INVALID_KEY):n(t)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api.stability.ai/v1/engines/list",method:"GET",handleVerificationResult:e.handleVerificationResult}}}])}(),Kn=function(e){function t(e,n,r,i,a){var o;return x(this,t),(o=f(this,t,[e,n,r,i,a])).insertKeyPlaceholderText="Stability AI API Key",o.keyHelpUrl="https://platform.stability.ai/docs/getting-started/authentication",o.permittedErrorPrefixes=["Incorrect","invalid_"],o}return v(t,e),T(t)}(Cn),Jn=function(e){function t(e){var n,r;x(this,t);var i=JSON.parse(JSON.stringify(e.directConnection)),a=null==i?void 0:i.stabilityAI;(n=f(this,t,[e,Wn.buildKeyVerificationDetails(),Wn.buildHeaders,a,{images:{files:{acceptedFormats:".png",maxNumberOfFiles:1}}}])).url="https://api.stability.ai/v1/generation/esrgan-v1-x2plus/image-to-image/upscale",n.textInputPlaceholderText="Describe image changes",n.introPanelMarkUp='\n    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Stability AI</b></div>\n    <div style="width: 100%; text-align: center; margin-left: -10px; margin-top: 5px"><b>Image to Image Upscale</b></div>\n    <p>Upload an image to generate a new one with higher resolution.</p>\n    <p>Click <a href="https://platform.stability.ai/">here</a> for more info.</p>';var o=null==(r=null==i?void 0:i.stabilityAI)?void 0:r.imageToImageUpscale;return"object"==w(o)&&(o.engine_id&&(n.url="https://api.stability.ai/v1/generation/".concat(o.engine_id,"/image-to-image/upscale")),t.cleanConfig(o),Object.assign(n.rawBody,o)),n.canSendMessage=t.canSendFileMessage,n}return v(t,e),T(t,[{key:"createFormDataBody",value:function(e,t){var n=new FormData;return n.append("image",t),Object.keys(e).forEach(function(t){n.append(t,String(e[t]))}),n}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n,r){var i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:if(r){e.next=4;break}throw new Error("Image was not found");case 4:i=this.createFormDataBody(this.rawBody,r[0]),on.tempRemoveContentHeader(this.connectSettings,kn.request.bind(this,this,i,t),!1);case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.message){e.next=2;break}throw t.message;case 2:return e.abrupt("return",{files:t.artifacts.map(function(e){return{src:"".concat(Gn).concat(e.base64),type:"image"}})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"cleanConfig",value:function(e){delete e.engine_id}},{key:"canSendFileMessage",value:function(e,t){return!(null==t||!t[0])}}])}(Kn),$n=function(e){function t(e){var n,r;x(this,t);var i=JSON.parse(JSON.stringify(e.directConnection)),a=null==i?void 0:i.stabilityAI;(n=f(this,t,[e,Wn.buildKeyVerificationDetails(),Wn.buildHeaders,a,{images:{files:{acceptedFormats:".png",maxNumberOfFiles:2}}}])).url="https://api.stability.ai/v1/generation/stable-diffusion-xl-1024-v1-0/image-to-image/masking",n._maskSource="MASK_IMAGE_WHITE",n.textInputPlaceholderText="Describe image changes",n.introPanelMarkUp='\n    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Stability AI</b></div>\n    <div style="width: 100%; text-align: center; margin-left: -10px; margin-top: 5px"><b>Image to Image Masking</b></div>\n    <p>Upload an image, its mask image to create a new one based on the changes you have described for the mask area.</p>\n    <p>Click <a href="https://platform.stability.ai/">here</a> for more info.</p>';var o=null==(r=null==i?void 0:i.stabilityAI)?void 0:r.imageToImageMasking;return"object"==w(o)&&(o.engine_id&&(n.url="https://api.stability.ai/v1/generation/".concat(o.engine_id,"/image-to-image/masking")),void 0!==o.weight&&null!==o.weight&&(n._imageWeight=o.weight),void 0!==o.mask_source&&null!==o.mask_source&&(n._maskSource=o.mask_source),t.cleanConfig(o),Object.assign(n.rawBody,o)),n.canSendMessage=t.canSendFileTextMessage,n}return v(t,e),T(t,[{key:"createFormDataBody",value:function(e,t,n,r){var i=new FormData;return i.append("init_image",t),i.append("mask_source",String(this._maskSource)),i.append("mask_image",n),r&&""!==r&&i.append("text_prompts[0][text]",r),void 0!==this._imageWeight&&null!==this._imageWeight&&i.append("text_prompts[0][weight]",String(this._imageWeight)),Object.keys(e).forEach(function(t){i.append(t,String(e[t]))}),void 0===i.get("weight")&&i.append("weight",String(1)),i}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n,r){var i,a,o,s;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:if(r&&r[0]&&r[1]){e.next=4;break}throw new Error("Image was not found");case 4:o=null==(a=null==(i=n[n.length-1])?void 0:i.text)?void 0:a.trim(),s=this.createFormDataBody(this.rawBody,r[0],r[1],o),on.tempRemoveContentHeader(this.connectSettings,kn.request.bind(this,this,s,t),!1);case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.message){e.next=2;break}throw t.message;case 2:return e.abrupt("return",{files:t.artifacts.map(function(e){return{src:"".concat(Gn).concat(e.base64),type:"image"}})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"cleanConfig",value:function(e){delete e.engine_id,delete e.weight}},{key:"canSendFileTextMessage",value:function(e,t){return!(null==t||!t[0])&&!(!e||""===e.trim())}}])}(Kn),Xn=function(e){function t(e){var n,r,i;return x(this,t),f(this,t,[e,"Attach an audio file","facebook/wav2vec2-large-960h-lv60-self",null==(r=null==(n=e.directConnection)?void 0:n.huggingFace)?void 0:r.audioSpeechRecognition,null==(i=e.directConnection)?void 0:i.huggingFace,{audio:{}}])}return v(t,e),T(t,[{key:"extractPollResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.estimated_time){e.next=2;break}return e.abrupt("return",{timeoutMS:1e3*(t.estimated_time+1)});case 2:if(!t.error){e.next=4;break}throw t.error;case 4:return e.abrupt("return",{text:t.text||""});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(Hn),Yn=function(e){function t(e){var n,r,i;return x(this,t),f(this,t,[e,"Once upon a time","gpt2",null==(r=null==(n=e.directConnection)?void 0:n.huggingFace)?void 0:r.textGeneration,null==(i=e.directConnection)?void 0:i.huggingFace])}return v(t,e),T(t,[{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){var n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}throw t.error;case 2:return e.abrupt("return",{text:(null==(n=t[0])?void 0:n.generated_text)||""});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(zn),Qn=function(e){function t(e){var n,r,i,a;x(this,t);var o=null==(i=null==(r=e.directConnection)?void 0:r.huggingFace)?void 0:i.questionAnswer;return(n=f(this,t,[e,"Ask a question","bert-large-uncased-whole-word-masking-finetuned-squad",o,null==(a=e.directConnection)?void 0:a.huggingFace])).permittedErrorPrefixes=["Authorization header","Error in"],n._context=o.context,n}return v(t,e),T(t,[{key:"preprocessBody",value:function(e,t){var n=t[t.length-1].text;if(n)return{inputs:{question:n,context:this._context,options:{wait_for_model:!0}}}}},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}throw t.error;case 2:return e.abrupt("return",{text:t.answer||""});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(zn),Zn=function(e){function t(e){var n,r,i;return x(this,t),f(this,t,[e,"Insert text to summarize","facebook/bart-large-cnn",null==(r=null==(n=e.directConnection)?void 0:n.huggingFace)?void 0:r.summarization,null==(i=e.directConnection)?void 0:i.huggingFace])}return v(t,e),T(t,[{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){var n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}throw t.error;case 2:return e.abrupt("return",{text:(null==(n=t[0])?void 0:n.summary_text)||""});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(zn),er=function(e){function t(e){var n,r,i,a,o;return x(this,t),null!==(n=(r=f(this,t,[e,"Ask me anything!","facebook/blenderbot-400M-distill",null==(a=null==(i=e.directConnection)?void 0:i.huggingFace)?void 0:a.conversation,null==(o=e.directConnection)?void 0:o.huggingFace])).maxMessages)&&void 0!==n||(r.maxMessages=-1),r}return v(t,e),T(t,[{key:"processMessages",value:function(e){var t=e.filter(function(e){return e.text}),n=t[t.length-1].text,r=t.slice(0,t.length-1);if(n)return{past_user_inputs:r.filter(function(e){return"user"===e.role}).map(function(e){return e.text}),generated_responses:r.filter(function(e){return"ai"===e.role}).map(function(e){return e.text}),mostRecentMessageText:n}}},{key:"preprocessBody",value:function(e,t){var n,r=JSON.parse(JSON.stringify(e)),i=this.processMessages(t);if(i)return null!==(n=r.options)&&void 0!==n||(r.options={}),r.options.wait_for_model=!0,_({inputs:{past_user_inputs:i.past_user_inputs,generated_responses:i.generated_responses,text:i.mostRecentMessageText}},r)}},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}throw t.error;case 2:return e.abrupt("return",{text:t.generated_text||""});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(zn),tr=function(e){function t(e){var n,r;x(this,t);var i=JSON.parse(JSON.stringify(e.directConnection)),a=i.stabilityAI;(n=f(this,t,[e,Wn.buildKeyVerificationDetails(),Wn.buildHeaders,a,{images:{files:{acceptedFormats:".png",maxNumberOfFiles:1}}}])).url="https://api.stability.ai/v1/generation/stable-diffusion-v1-6/image-to-image",n.textInputPlaceholderText="Describe image changes",n.introPanelMarkUp='\n    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Stability AI: Image to Image</b></div>\n    <p>Upload an image to create a new one with the changes you have described.</p>\n    <p>Click <a href="https://platform.stability.ai/">here</a> for more info.</p>';var o=null==(r=i.stabilityAI)?void 0:r.imageToImage;return"object"==w(o)&&(o.engine_id&&(n.url="https://api.stability.ai/v1/generation/".concat(o.engine_id,"/text-to-image")),void 0!==o.weight&&null!==o.weight&&(n._imageWeight=o.weight),t.cleanConfig(o),Object.assign(n.rawBody,o)),n.canSendMessage=t.canSendFileTextMessage,n}return v(t,e),T(t,[{key:"createFormDataBody",value:function(e,t,n){var r=new FormData;return r.append("init_image",t),n&&""!==n&&r.append("text_prompts[0][text]",n),void 0!==this._imageWeight&&null!==this._imageWeight&&r.append("text_prompts[0][weight]",String(this._imageWeight)),Object.keys(e).forEach(function(t){r.append(t,String(e[t]))}),void 0===r.get("weight")&&r.append("weight",String(1)),r}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n,r){var i,a,o,s;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:if(r){e.next=4;break}throw new Error("Image was not found");case 4:o=null==(a=null==(i=n[n.length-1])?void 0:i.text)?void 0:a.trim(),s=this.createFormDataBody(this.rawBody,r[0],o),on.tempRemoveContentHeader(this.connectSettings,kn.request.bind(this,this,s,t),!1);case 6:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.message){e.next=2;break}throw t.message;case 2:return e.abrupt("return",{files:t.artifacts.map(function(e){return{src:"".concat(Gn).concat(e.base64),type:"image"}})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"cleanConfig",value:function(e){delete e.engine_id,delete e.weight}},{key:"canSendFileTextMessage",value:function(e,t){return!(null==t||!t[0])&&!(!e||""===e.trim())}}])}(Kn),nr=function(e){function t(e){var n,r,i;return x(this,t),f(this,t,[e,"Insert text to translate","Helsinki-NLP/opus-tatoeba-en-ja",null==(r=null==(n=e.directConnection)?void 0:n.huggingFace)?void 0:r.translation,null==(i=e.directConnection)?void 0:i.huggingFace])}return v(t,e),T(t,[{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){var n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}throw t.error;case 2:return e.abrupt("return",{text:(null==(n=t[0])?void 0:n.translation_text)||""});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(zn),rr=function(e){function t(e){var n,r;x(this,t);var i=JSON.parse(JSON.stringify(e.directConnection)),a=i.stabilityAI;(n=f(this,t,[e,Wn.buildKeyVerificationDetails(),Wn.buildHeaders,a])).url="https://api.stability.ai/v1/generation/stable-diffusion-v1-6/text-to-image",n.textInputPlaceholderText="Describe an image",n.introPanelMarkUp='\n    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Stability AI: Text to Image</b></div>\n    <p>Insert text to generate an image.</p>\n    <p>Click <a href="https://platform.stability.ai/">here</a> for more info.</p>';var o=null==(r=i.stabilityAI)?void 0:r.textToImage;return"object"==w(o)&&(o.engine_id&&(n.url="https://api.stability.ai/v1/generation/".concat(o.engine_id,"/text-to-image")),void 0!==o.weight&&null!==o.weight&&(n._imageWeight=o.weight),t.cleanConfig(o),Object.assign(n.rawBody,o)),n.canSendMessage=t.canSendTextMessage,n}return v(t,e),T(t,[{key:"preprocessBody",value:function(e,t){var n=JSON.parse(JSON.stringify(e)),r={text:t};return this._imageWeight&&(r.weight=this._imageWeight),n.text_prompts=[r],n}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:r=this.preprocessBody(this.rawBody,n[n.length-1].text),kn.request(this,r,t);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.message){e.next=2;break}throw t.message;case 2:return e.abrupt("return",{files:t.artifacts.map(function(e){return{src:"".concat(Gn).concat(e.base64),type:"image"}})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"cleanConfig",value:function(e){delete e.engine_id,delete e.weight}},{key:"canSendTextMessage",value:function(e){return!(!e||""===e.trim())}}])}(Kn),ir=function(e){function t(e){var n,r,i,a;return x(this,t),(n=f(this,t,[e,"The goal of life is [MASK].","bert-base-uncased",null==(i=null==(r=e.directConnection)?void 0:r.huggingFace)?void 0:i.fillMask,null==(a=e.directConnection)?void 0:a.huggingFace])).introPanelMarkUp='\n    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Hugging Face</b></div>\n    <p>Insert a sentence with the word [MASK] and the model will try to fill it for you. E.g. I want [MASK].</p>\n    <p>First message may take an extented amount of time to complete as the model needs to be initialized.</p>',n.permittedErrorPrefixes=["Authorization header","No mask_token"],n}return v(t,e),T(t,[{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){var n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}throw t.error;case 2:return e.abrupt("return",{text:(null==(n=t[0])?void 0:n.sequence)||""});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(zn),ar=function(){function e(){x(this,e)}return T(e,null,[{key:"buildHeaders",value:function(e){return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}},{key:"handleVerificationResult",value:function(e,t,n,r){var i=e;i.error?"invalid_api_key"===i.error.code?r(X.INVALID_KEY):r(X.CONNECTION_FAILED):n(t)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api.openai.com/v1/models",method:"GET",handleVerificationResult:e.handleVerificationResult}}},{key:"directFetch",value:function(){var e=k(y().mark(function e(t,n,r){var i,a,o=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=!(o.length>3&&void 0!==o[3])||o[3],t.connectSettings.method=r,e.next=4,on.fetch(t,t.connectSettings.headers,i,n).then(function(e){return on.processResponseByType(e)});case 4:if(!(a=e.sent).error){e.next=7;break}throw a.error.message;case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()}])}();ar.FUNCTION_TOOL_RESP_ERROR="Response object must either be {response: string}[] for each individual function or {text: string} for a direct response, see https://deepchat.dev/docs/directConnection/OpenAI#FunctionHandler.",ar.FUNCTION_TOOL_RESP_ARR_ERROR="Arrays are not accepted in handler responses";var or=ar,sr=function(){function e(){x(this,e)}return T(e,null,[{key:"storeFiles",value:function(){var e=k(y().mark(function e(t,n,r,i){var a,o,s,l;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.connectSettings.headers){e.next=3;break}return e.abrupt("return");case 3:return t.url=i,o=a[on.CONTENT_TYPE],delete a[on.CONTENT_TYPE],s=r.map(function(){var e=k(y().mark(function e(n){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new FormData,e.abrupt("return",(r.append("purpose","assistants"),r.append("file",n),new Promise(function(e){e(or.directFetch(t,r,"POST",!1))})));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.prev=7,e.next=10,Promise.all(s);case 10:return l=e.sent.map(function(e){return{id:e.id,name:e.filename}}),e.abrupt("return",(a[on.CONTENT_TYPE]=o,l));case 14:throw e.prev=14,e.t0=e.catch(7),a[on.CONTENT_TYPE]=o,on.displayError(n,e.t0),t.completionsHandlers.onFinish(),e.t0;case 17:case"end":return e.stop()}},e,null,[[7,14]])}));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"getType",value:function(e,t){var n=e[t].path;return!n||n.endsWith("png")?"image":"any"}},{key:"getFiles",value:function(){var t=k(y().mark(function t(n,r,i,a){var o,s;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.map(function(e){var t=e.fileId;return n.url="".concat(i).concat(t).concat(a),new Promise(function(e){e(or.directFetch(n,void 0,"GET",!1))})}),t.next=3,Promise.all(o);case 3:return s=t.sent.map(function(t,n){return new Promise(function(i){var a=new FileReader;a.readAsDataURL(t),a.onload=function(t){i({src:t.target.result,name:r[n].name,type:e.getType(r,n)})}})}),t.next=6,Promise.all(s);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t)}));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"getFileName",value:function(e){var t=e.split("/");return t[t.length-1]}},{key:"getFilesAndNewText",value:function(){var t=k(y().mark(function t(n,r,i,a,o){var s,l,u,c,d;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(c=i.getFilesPrefix,d=i.getFilesPostfix,t.t0=r.length>0,!t.t0){t.next=7;break}return t.next=5,e.getFiles(n,r,c,d);case 5:u=t.sent,null!=(s=null==o?void 0:o.text)&&s.value&&u.forEach(function(e,t){var n;if(e.src){var i=r[t].path;null!=(n=null==o?void 0:o.text)&&n.value&&i&&(o.text.value=o.text.value.replace(i,e.src))}});case 7:return t.abrupt("return",null!=(l=null==o?void 0:o.text)&&l.value?{text:o.text.value,role:a}:{files:u,role:a});case 8:case"end":return t.stop()}},t)}));return function(e,n,r,i,a){return t.apply(this,arguments)}}()},{key:"getFileDetails",value:function(t,n){var r,i=[];return null!=(r=null==n?void 0:n.text)&&r.value&&t.content.forEach(function(t){var n,r;null==(r=null==(n=t.text)?void 0:n.annotations)||r.forEach(function(t){var n;t.text&&t.text.startsWith("sandbox:")&&null!=(n=t.file_path)&&n.file_id&&i.push({path:t.text,fileId:t.file_path.file_id,name:e.getFileName(t.text)})})}),null!=n&&n.image_file&&i.push({fileId:n.image_file.file_id}),i}},{key:"getFilesAndText",value:function(){var t=k(y().mark(function t(n,r,i,a){var o;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.getFileDetails(r,a),t.next=3,e.getFilesAndNewText(n,o,i,r.role,a);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)}));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"parseResult",value:function(e,t){var n=[];if(t)n=e.data;else for(var r=0;r<e.data.length;r+=1){var i=e.data[r];if("assistant"!==i.role)break;n.push(i)}return n.reverse()}},{key:"parseMessages",value:function(t,n,r){var i=[];return n.forEach(function(){var n=k(y().mark(function n(a){return y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a.content.filter(function(e){return!!e.text||!!e.image_file}).sort(function(e){return e.text?-1:e.image_file?1:0}).forEach(function(){var n=k(y().mark(function n(o){return y().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:i.push(e.getFilesAndText(t,a,r,o));case 1:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}());case 1:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()),Promise.all(i)}},{key:"processStreamMessages",value:function(){var t=k(y().mark(function t(n,r,i){return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.parseMessages(n,[{content:r,role:"assistant"}],i));case 1:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"processAPIMessages",value:function(){var t=k(y().mark(function t(n,r,i,a){var o;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.parseResult(r,i),t.abrupt("return",e.parseMessages(n,o,a));case 2:case"end":return t.stop()}},t)}));return function(e,n,r,i){return t.apply(this,arguments)}}()}])}();sr.FILES_WITH_TEXT_ERROR="content with type `text` must have `text` values",sr.FUNCTION_TOOL_RESP_ERROR="Response must contain an array of strings for each individual function/tool_call, see https://deepchat.dev/docs/directConnection/OpenAI/#assistant-functions.";var lr=sr,ur=function(e){function t(e,n,r,i,a,o){var s;if(x(this,t),(s=f(this,t,[e,i,a,o])).insertKeyPlaceholderText="OpenAI API Key",s.keyHelpUrl="https://platform.openai.com/account/api-keys",s.url="",s.permittedErrorPrefixes=["Incorrect","Please send text",_n.FAILED_ERROR_MESSAGE],s.shouldFetchHistory=!1,s._searchedForThreadId=!1,s._config={},s._newAssistantDetails={model:"gpt-4"},s._waitingForStreamResponse=!1,s._isSSEStream=!1,s.urlSegments=r,"object"==w(n)){s._config=n;var l=s._config,u=l.new_assistant,c=l.thread_id,d=l.load_thread_history;Object.assign(s._newAssistantDetails,u),c&&(s.sessionId=c),d&&(s.shouldFetchHistory=!0)}return s.maxMessages=1,s._isSSEStream=!(!s.stream||"object"==w(s.stream)&&s.stream.simulation),s}return v(t,e),T(t,[{key:"fetchHistoryFunc",value:function(){var e=k(y().mark(function e(){var t,n=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return setTimeout(function(){return n.deepChat.disableSubmitButton()},2),e.prev=1,e.next=4,this.getThreadMessages(this.sessionId,!0);case 4:return t=e.sent,e.abrupt("return",(this.deepChat.disableSubmitButton(!1),t));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",[{error:"Failed to fetch history"}]);case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"processMessage",value:function(e,n){var r=this.totalMessagesMaxCharLength||-1,i=En.getCharacterLimitMessages(e,r)[0];if(n&&n.length>0){var a=this.filesToolType;if("function"==typeof this.filesToolType){var o=this.filesToolType(n.map(function(e){return e.name}));"code_interpreter"===o||"file_search"===o||"images"===o?a=o:(console.error('Tool type "'.concat(o,'" is not valid')),console.error('Expected "code_interpreter" or "file_search" or "images". Going to default to "images"'))}if("file_search"===a)return t.processAttachmentsMessage(i,n,"file_search");if("code_interpreter"===a)return t.processAttachmentsMessage(i,n,"code_interpreter");if(n.find(function(e){var t=e.name;return!ie.isImageFileExtension(t)}))console.error("The uploaded files contained a non-image file"),console.error('Make sure only images can be uploaded or define a "code_interpreter" or "file_search" value in the "files_tool_type" property'),console.warn('Make sure your existing assistant supports these "tools" or specify them in the "new_assistant" property');else{var s=t.processImageMessage(i,n);if(s)return s}}return{content:i.text||"",role:"user"}}},{key:"createNewThreadMessages",value:function(e,t,n){var r=JSON.parse(JSON.stringify(e)),i=this.processMessage(t,n);return r.thread={messages:[i]},r}},{key:"callService",value:function(e,t,n){if(this._messages=e,this.sessionId){this.url="".concat(this.urlSegments.threadsPrefix,"/").concat(this.sessionId,"/messages").concat(this.urlSegments.createMessagePostfix);var r=this.processMessage(t,n);kn.request(this,r,e)}else{this.url="".concat(this.urlSegments.threadsPrefix,"/runs").concat(this.urlSegments.threadsPosfix);var i=this.createNewThreadMessages(this.rawBody,t,n);this._isSSEStream?this.createStreamRun(i):kn.request(this,i,e)}}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n,r){var i,a,o;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._waitingForStreamResponse=!1,this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:if(null===(i=(a=this.rawBody).assistant_id)||void 0===i){e.next=6;break}e.next=12;break;case 6:if(e.t0=this._config.assistant_id,e.t0){e.next=11;break}return e.next=10,this.createNewAssistant();case 10:e.t0=e.sent;case 11:a.assistant_id=e.t0;case 12:if(this._searchedForThreadId||this.searchPreviousMessagesForThreadId(t.messageToElements),!r){e.next=19;break}return e.next=16,lr.storeFiles(this,t,r,this.urlSegments.storeFiles);case 16:e.t1=e.sent,e.next=20;break;case 19:e.t1=void 0;case 20:o=e.t1,this.connectSettings.method="POST",this.callService(t,n,o);case 22:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createNewAssistant",value:function(){var e=k(y().mark(function e(){var t;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.url=this.urlSegments.newAssistantUrl,e.next=4,or.directFetch(this,JSON.parse(JSON.stringify(this._newAssistantDetails)),"POST");case 4:return t=e.sent,e.abrupt("return",(this._config.assistant_id=t.id,this._config.assistant_id));case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),console.error("Failed to create a new assistant");case 11:case"end":return e.stop()}},e,this,[[0,8]])}));return function(){return e.apply(this,arguments)}}()},{key:"searchPreviousMessagesForThreadId",value:function(e){var t=e.find(function(e){return l(e,1)[0]._sessionId});t&&(this.sessionId=t[0]._sessionId),this._searchedForThreadId=!0}},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){var n,r,i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._waitingForStreamResponse||this._isSSEStream&&this.sessionId)){e.next=4;break}return e.next=3,this.handleStream(t);case 3:return e.abrupt("return",e.sent);case 4:if(!t.error){e.next=6;break}throw t.error.message.startsWith(lr.FILES_WITH_TEXT_ERROR)?Error("Please send text with your file(s)"):t.error.message;case 6:return e.next=8,this.assignThreadAndRun(t);case 8:return r="".concat(this.urlSegments.threadsPrefix,"/").concat(this.sessionId,"/runs/").concat(this.run_id).concat(this.urlSegments.threadsPosfix),i={method:"GET",headers:null==(n=this.connectSettings)?void 0:n.headers},e.abrupt("return",(kn.executePollRequest(this,r,i,this._messages),{makingAnotherRequest:!0}));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"assignThreadAndRun",value:function(){var e=k(y().mark(function e(t){var n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.sessionId){e.next=8;break}return this.url="".concat(this.urlSegments.threadsPrefix,"/").concat(this.sessionId,"/runs").concat(this.urlSegments.threadsPosfix),e.next=4,or.directFetch(this,JSON.parse(JSON.stringify(this.rawBody)),"POST");case 4:n=e.sent,this.run_id=n.id,e.next=9;break;case 8:this.sessionId=t.thread_id,this.run_id=t.id,this._messages&&this._messages.messageToElements.length>0&&(this._messages.messageToElements[this._messages.messageToElements.length-1][0]._sessionId=this.sessionId);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getThreadMessages",value:function(){var e=k(y().mark(function e(t){var n,r,i,a,o=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],this.url="".concat(this.urlSegments.threadsPrefix,"/").concat(t,"/messages?").concat(this.urlSegments.listMessagesPostfix),e.next=4,or.directFetch(this,{},"GET");case 4:if(a=e.sent,e.t0=!n&&this.deepChat.responseInterceptor,!e.t0){e.next=10;break}return e.next=9,null==(i=(r=this.deepChat).responseInterceptor)?void 0:i.call(r,a);case 9:a=e.sent;case 10:return e.abrupt("return",lr.processAPIMessages(this,a,n,this.urlSegments));case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"extractPollResultData",value:function(){var e=k(y().mark(function e(n){var r,i,a,o,s,l,u,c,d=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.status,a=n.required_action,"queued"!==i&&"in_progress"!==i){e.next=3;break}return e.abrupt("return",{timeoutMS:t.POLLING_TIMEOUT_MS});case 3:if("completed"!==i||!this._messages){e.next=11;break}return e.next=6,this.getThreadMessages(n.thread_id);case 6:return o=e.sent,s=o.shift(),l=s.text,u=s.files,e.abrupt("return",(setTimeout(function(){o.forEach(function(e){return d.deepChat.addMessage(e)})}),{text:l,_sessionId:this.sessionId,files:u}));case 11:if(c=null==(r=null==a?void 0:a.submit_tool_outputs)?void 0:r.tool_calls,"requires_action"!==i||!c){e.next=16;break}return e.next=15,this.handleTools(c);case 15:return e.abrupt("return",e.sent);case 16:throw Error("Thread run status: ".concat(i));case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleTools",value:function(){var e=k(y().mark(function e(n){var r,i,a,o,s,l;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.functionHandler){e.next=2;break}throw Error("Please define the `function_handler` property inside the [openAI](https://deepchat.dev/docs/directConnection/openAI#Assistant) object.");case 2:return r=n.map(function(e){return{name:e.function.name,arguments:e.function.arguments}}),e.next=5,this.functionHandler(r);case 5:if(i=e.sent,Array.isArray(i)&&n.length===i.length){e.next=8;break}throw Error(lr.FUNCTION_TOOL_RESP_ERROR);case 8:return e.next=10,Promise.all(i);case 10:if(!(a=e.sent).find(function(e){return"string"!=typeof e})){e.next=13;break}throw Error(lr.FUNCTION_TOOL_RESP_ERROR);case 13:if(o=a.map(function(e,t){return{tool_call_id:n[t].id,output:e}}),s="".concat(this.urlSegments.threadsPrefix,"/").concat(this.sessionId),l="/runs/".concat(this.run_id,"/submit_tool_outputs").concat(this.urlSegments.threadsPosfix),this.url="".concat(s).concat(l),!this._isSSEStream){e.next=20;break}return e.next=18,this.createStreamRun({tool_outputs:o});case 18:e.next=22;break;case 20:return e.next=22,or.directFetch(this,{tool_outputs:o},"POST");case 22:return e.abrupt("return",{timeoutMS:t.POLLING_TIMEOUT_MS});case 23:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleStream",value:function(){var e=k(y().mark(function e(t){var n,r,i,a;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null==(r=null==(n=t.required_action)?void 0:n.submit_tool_outputs)?void 0:r.tool_calls,"requires_action"!==t.status||!i){e.next=6;break}return this.run_id=t.id,e.next=5,this.handleTools(i);case 5:return e.abrupt("return",e.sent);case 6:if(!this._waitingForStreamResponse){e.next=8;break}return e.abrupt("return",this.parseStreamResult(t));case 8:return this._isSSEStream&&this.sessionId&&(this.url="".concat(this.urlSegments.threadsPrefix,"/").concat(this.sessionId,"/runs").concat(this.urlSegments.threadsPosfix),a=JSON.parse(JSON.stringify(this.rawBody)),this.createStreamRun(a)),e.abrupt("return",{makingAnotherRequest:!0});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"parseStreamResult",value:function(){var e=k(y().mark(function e(t){var n,r,i,a,o,s,l,u,c,d;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.content&&t.content.length>0&&this._messages)){e.next=5;break}if(s=t.content.find(function(e){return e.text}),!(null!=(n=null==s?void 0:s.text)&&n.annotations&&s.text.annotations.length>0)){e.next=5;break}return l=t.content.find(function(e){return!!e.text})||t.content[0],u=lr.getFilesAndText.bind(this,this,{role:"assistant",content:t.content},this.urlSegments,l),e.abrupt("return",(null==(r=this._messageStream)||r.endStreamAfterFileDownloaded(this._messages,u),{text:""}));case 5:if(null==(i=t.delta)||!i.content){e.next=14;break}if(!(t.delta.content.length>1)){e.next=13;break}if(c=t.delta.content.find(function(e){return e.text}),null==(a=null==c?void 0:c.text)||!a.annotations||0!==c.text.annotations.length){e.next=13;break}return e.next=11,lr.processStreamMessages(this,t.delta.content,this.urlSegments);case 11:return d=e.sent,e.abrupt("return",{text:d[0].text,files:d[1].files});case 13:return e.abrupt("return",{text:null==(o=t.delta.content[0].text)?void 0:o.value});case 14:return e.abrupt("return",(!this.sessionId&&t.thread_id&&(this.sessionId=t.thread_id),{makingAnotherRequest:!0}));case 15:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"createStreamRun",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.stream=!0,this._waitingForStreamResponse=!0,e.next=4,mn.request(this,t,this._messages,!0,!0);case 4:this._messageStream=e.sent;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"processImageMessage",value:function(e,t){var n=null==t?void 0:t.filter(function(e){return ie.isImageFileExtension(e.name)}).map(function(e){return{type:"image_file",image_file:{file_id:e.id}}});if(n&&n.length>0)return e.text&&e.text.length>0&&n.push({type:"text",text:e.text}),{content:n,role:"user"}}},{key:"processAttachmentsMessage",value:function(e,t,n){return{attachments:t.map(function(e){return{tools:[{type:n}],file_id:e.id}}),content:[{type:"text",text:e.text}],role:"user"}}}])}(Cn);ur.POLLING_TIMEOUT_MS=500;var cr=ur,dr=function(e){function t(e){var n,r,i,a,o,s,l,u;x(this,t);var c=JSON.parse(JSON.stringify(e.directConnection)),d=c.openAI,h=null==(a=c.openAI)?void 0:a.assistant,m=t.buildUrlSegments(h);if(null!==(n=(o=(i=f(this,t,[e,h,m,or.buildKeyVerificationDetails(),or.buildHeaders,d])).connectSettings).headers)&&void 0!==n||(o.headers={}),null!==(r=(s=i.connectSettings.headers)["OpenAI-Beta"])&&void 0!==r||(s["OpenAI-Beta"]="assistants=v2"),i.shouldFetchHistory&&i.sessionId&&(i.fetchHistory=i.fetchHistoryFunc.bind(p(i))),"object"==w(h)){var v=null==(u=null==(l=e.directConnection)?void 0:l.openAI)?void 0:u.assistant,g=v.function_handler,y=v.files_tool_type;g&&(i.functionHandler=g),y&&(i.filesToolType=y)}return i}return v(t,e),T(t,null,[{key:"buildUrlSegments",value:function(e){var t="object"==w(e)&&e.custom_base_url||"https://api.openai.com/v1";return{threadsPrefix:"".concat(t,"/threads"),threadsPosfix:"",newAssistantUrl:"".concat(t,"/assistants"),createMessagePostfix:"",listMessagesPostfix:"order=desc",storeFiles:"".concat(t,"/files"),getFilesPrefix:"".concat(t,"/files/"),getFilesPostfix:"/content"}}}])}(cr),fr=function(){function e(){x(this,e)}return T(e,null,[{key:"buildHeaders",value:function(e){return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json",accept:"application/json"}}},{key:"handleVerificationResult",value:function(e,t,n,r){var i;null!=(i=e.message)&&i.includes("invalid request: prompt must be at least 1 token long")?n(t):r(X.INVALID_KEY)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api.cohere.ai/v1/generate",method:"POST",handleVerificationResult:e.handleVerificationResult,body:JSON.stringify({prompt:""})}}}])}(),pr=function(e){function t(e,n,r,i,a){var o;return x(this,t),(o=f(this,t,[e,fr.buildKeyVerificationDetails(),fr.buildHeaders,a])).insertKeyPlaceholderText="Cohere API Key",o.keyHelpUrl="https://dashboard.cohere.ai/api-keys",o.permittedErrorPrefixes=["invalid"],o.url=n,o.textInputPlaceholderText=r,i&&"object"==w(i)&&Object.assign(o.rawBody,i),o}return v(t,e),T(t)}(Cn),hr=function(e){function t(e){var n,r,i;return x(this,t),f(this,t,[e,"https://api.cohere.ai/v1/generate","Once upon a time",null==(r=null==(n=e.directConnection)?void 0:n.cohere)?void 0:r.textGeneration,null==(i=e.directConnection)?void 0:i.cohere])}return v(t,e),T(t,[{key:"preprocessBody",value:function(e,t){var n=JSON.parse(JSON.stringify(e)),r=t[t.length-1].text;if(r)return _({prompt:r},n)}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:r=this.preprocessBody(this.rawBody,n),kn.request(this,r,t);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){var n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.message){e.next=2;break}throw t.message;case 2:return e.abrupt("return",{text:(null==(n=t.generations)?void 0:n[0].text)||""});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(pr),mr=function(){return T(function e(){x(this,e)},null,[{key:"buildHeaders",value:function(e){return{"api-key":e,"Content-Type":"application/json"}}},{key:"buildKeyVerificationDetails",value:function(e){return{url:"".concat(e.endpoint,"/openai/models?api-version=").concat(e.version),method:"GET",handleVerificationResult:or.handleVerificationResult}}},{key:"validateURLDetails",value:function(e){var t=e.endpoint,n=e.version,r=e.deploymentId;return t&&n&&r}}])}();mr.URL_DETAILS_ERROR_MESSAGE="Please define the Azure URL Details. [More Information](https://deepchat.dev/docs/directConnection/Azure)";var vr=mr,gr=function(e){function t(e){var n,r,i,a,o,s,l,u,c,d;x(this,t);var p=JSON.parse(JSON.stringify(e.directConnection)),h=p.azure,m=null==(i=p.azure)?void 0:i.openAI,v=(null==m?void 0:m.urlDetails)||{},g="".concat(null==(a=null==m?void 0:m.urlDetails)?void 0:a.endpoint,"/openai/"),y="?api-version=".concat(null==(o=null==m?void 0:m.urlDetails)?void 0:o.version),b={threadsPrefix:"".concat(g).concat(t.THREAD_RESOURCE),threadsPosfix:y,newAssistantUrl:"".concat(g).concat(t.NEW_ASSISTANT_RESOURCE).concat(y),createMessagePostfix:y,listMessagesPostfix:"order=desc&api-version=".concat(null==(s=null==m?void 0:m.urlDetails)?void 0:s.version),storeFiles:"".concat(g,"files").concat(y),getFilesPrefix:"".concat(g,"files/"),getFilesPostfix:"/content".concat(y)};if((r=f(this,t,[e,null==m?void 0:m.assistant,b,vr.buildKeyVerificationDetails(v),vr.buildHeaders,h])).permittedErrorPrefixes=[vr.URL_DETAILS_ERROR_MESSAGE],r.insertKeyPlaceholderText="Azure OpenAI API Key",r.keyHelpUrl="https://learn.microsoft.com/en-us/answers/questions/1193991/how-to-get-the-value-of-openai-api-key",r.isTextInputDisabled=!1,"object"==w(null==m?void 0:m.assistant)){var k=null==(c=null==(u=null==(l=e.directConnection)?void 0:l.azure)?void 0:u.openAI)?void 0:c.assistant,S=k.function_handler,_=k.files_tool_type;S&&(r.functionHandler=S),_&&(r.filesToolType=_)}return vr.validateURLDetails(v)?null!==(n=(d=r.connectSettings).headers)&&void 0!==n||(d.headers={}):(r.isTextInputDisabled=!0,r.canSendMessage=function(){return!1},setTimeout(function(){e.addMessage({error:vr.URL_DETAILS_ERROR_MESSAGE})})),r}return v(t,e),T(t)}(cr);gr.THREAD_RESOURCE="threads",gr.NEW_ASSISTANT_RESOURCE="assistants";var yr=gr,br=function(e){function t(e){var n,r,i;return x(this,t),f(this,t,[e,"https://api.cohere.ai/v1/summarize","Insert text to summarize",null==(r=null==(n=e.directConnection)?void 0:n.cohere)?void 0:r.summarization,null==(i=e.directConnection)?void 0:i.cohere])}return v(t,e),T(t,[{key:"preprocessBody",value:function(e,t){var n=JSON.parse(JSON.stringify(e)),r=t[t.length-1].text;if(r)return _({text:r},n)}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:r=this.preprocessBody(this.rawBody,n),kn.request(this,r,t);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.message){e.next=2;break}throw t.message;case 2:return e.abrupt("return",{text:t.summary||""});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(pr),kr=function(){function e(){x(this,e)}return T(e,null,[{key:"addAttributes",value:function(e){e.role="button",e.setAttribute("tabindex","0")}},{key:"addAriaBusy",value:function(e){e.setAttribute("aria-busy","true")}},{key:"removeAriaBusy",value:function(e){e.removeAttribute("aria-busy")}},{key:"addAriaDisabled",value:function(e){e.setAttribute("aria-disabled","true")}},{key:"removeAriaDisabled",value:function(e){e.removeAttribute("aria-disabled")}},{key:"removeAriaAttributes",value:function(t){e.removeAriaBusy(t),e.removeAriaDisabled(t)}}])}(),Sr='<?xml version="1.0" encoding="iso-8859-1"?>\n<svg height="1.4em" width="1.4em" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n\t viewBox="0 0 490.9 490.9" xml:space="preserve">\n\t<g>\n\t\t<g>\n\t\t\t<path d="M245.5,322.9c53,0,96.2-43.2,96.2-96.2V96.2c0-53-43.2-96.2-96.2-96.2s-96.2,43.2-96.2,96.2v130.5\n\t\t\t\tC149.3,279.8,192.5,322.9,245.5,322.9z M173.8,96.2c0-39.5,32.2-71.7,71.7-71.7s71.7,32.2,71.7,71.7v130.5\n\t\t\t\tc0,39.5-32.2,71.7-71.7,71.7s-71.7-32.2-71.7-71.7V96.2z"/>\n\t\t\t<path d="M94.4,214.5c-6.8,0-12.3,5.5-12.3,12.3c0,85.9,66.7,156.6,151.1,162.8v76.7h-63.9c-6.8,0-12.3,5.5-12.3,12.3\n\t\t\t\ts5.5,12.3,12.3,12.3h152.3c6.8,0,12.3-5.5,12.3-12.3s-5.5-12.3-12.3-12.3h-63.9v-76.7c84.4-6.3,151.1-76.9,151.1-162.8\n\t\t\t\tc0-6.8-5.5-12.3-12.3-12.3s-12.3,5.5-12.3,12.3c0,76.6-62.3,138.9-138.9,138.9s-138.9-62.3-138.9-138.9\n\t\t\t\tC106.6,220,101.2,214.5,94.4,214.5z"/>\n\t\t</g>\n\t</g>\n</svg>\n',_r=function(){function e(){x(this,e)}return T(e,null,[{key:"createTextElement",value:function(t){var n=document.createElement("div");return n.classList.add(e.INPUT_BUTTON_INNER_TEXT_CLASS),n.innerText=t,n}},{key:"tryAddSVGElement",value:function(e,t,n,r){n?e.push(Ln.createSVGElement(n)):""!==n&&r&&e.push(t)}},{key:"createCustomElements",value:function(t,n,r){var i,a,o=null==r?void 0:r[t],s=null==(i=null==o?void 0:o.text)?void 0:i.content,l=null==(a=null==o?void 0:o.svg)?void 0:a.content,u=[];return e.tryAddSVGElement(u,n,l,s),s&&u.push(e.createTextElement(s)),u.length>0?u:void 0}},{key:"reassignClassBasedOnChildren",value:function(t,n){t.classList.remove(e.INPUT_BUTTON_SVG_CLASS,e.INPUT_BUTTON_SVG_TEXT_CLASS),n.find(function(t){return t.classList.contains(e.INPUT_BUTTON_INNER_TEXT_CLASS)})?n.length>1&&t.classList.add(e.INPUT_BUTTON_SVG_TEXT_CLASS):t.classList.add(e.INPUT_BUTTON_SVG_CLASS)}}])}();_r.INPUT_BUTTON_SVG_TEXT_CLASS="input-button-svg-text",_r.INPUT_BUTTON_INNER_TEXT_CLASS="text-button",_r.INPUT_BUTTON_SVG_CLASS="input-button-svg";var Er=_r,wr=function(){return T(function e(){x(this,e)},null,[{key:"parseSVGTextElements",value:function(e){return{svg:e.find(function(e){return"svg"===e.tagName.toLowerCase()}),text:e.find(function(e){return"div"===e.tagName.toLowerCase()})}}}])}(),xr=function(){function e(){x(this,e)}return T(e,null,[{key:"unsetAllCSS",value:function(e,t){var n,r;t.container&&R.unsetAllCSSMouseStates(e,t.container);var i=wr.parseSVGTextElements(Array.from(e.children)),a=i.svg,o=i.text;null!=(n=t.svg)&&n.styles&&a&&R.unsetAllCSSMouseStates(a,t.svg.styles),null!=(r=t.text)&&r.styles&&o&&R.unsetAllCSSMouseStates(o,t.text.styles)}},{key:"unsetActionCSS",value:function(e,t){var n,r;t.container&&R.unsetActivityCSSMouseStates(e,t.container);var i=wr.parseSVGTextElements(Array.from(e.children)),a=i.svg,o=i.text;null!=(n=t.svg)&&n.styles&&a&&R.unsetActivityCSSMouseStates(a,t.svg.styles),null!=(r=t.text)&&r.styles&&o&&R.unsetActivityCSSMouseStates(o,t.text.styles)}},{key:"setElementsCSS",value:function(e,t,n){var r,i,a,o,s;Object.assign(e.style,null==(r=t.container)?void 0:r[n]);var l=wr.parseSVGTextElements(Array.from(e.children)),u=l.svg,c=l.text;u&&Object.assign(u.style,null==(a=null==(i=t.svg)?void 0:i.styles)?void 0:a[n]),c&&Object.assign(c.style,null==(s=null==(o=t.text)?void 0:o.styles)?void 0:s[n])}},{key:"setElementCssUpToState",value:function(t,n,r){e.setElementsCSS(t,n,"default"),"default"!==r&&(e.setElementsCSS(t,n,"hover"),"hover"!==r&&e.setElementsCSS(t,n,"click"))}}])}(),Cr=function(){return T(function e(t,n,r,i,a,o){x(this,e),this._mouseState={state:"default"},this.isCustom=!1,kr.addAttributes(t),this.elementRef=t,this.svg=Ln.createSVGElement(n),this.customStyles=a,this.position=r,this._tooltipSettings=i,this.dropupText=o},[{key:"buttonMouseLeave",value:function(e){var t;this._mouseState.state="default","visible"===(null==(t=this._activeTooltip)?void 0:t.element.style.visibility)&&this._tooltipSettings&&B.hide(this._activeTooltip,this._tooltipSettings),e&&(xr.unsetAllCSS(this.elementRef,e),xr.setElementsCSS(this.elementRef,e,"default"))}},{key:"buttonMouseEnter",value:function(e){var t;this._mouseState.state="hover",this._tooltipSettings&&(this._activeTooltip=B.display(this.elementRef,this._tooltipSettings,null==(t=this._activeTooltip)?void 0:t.element)),e&&xr.setElementsCSS(this.elementRef,e,"hover")}},{key:"buttonMouseUp",value:function(e){e&&xr.unsetActionCSS(this.elementRef,e),this.buttonMouseEnter(e)}},{key:"buttonMouseDown",value:function(e){this._mouseState.state="click",e&&xr.setElementsCSS(this.elementRef,e,"click")}},{key:"setEvents",value:function(e){this.elementRef.onmousedown=this.buttonMouseDown.bind(this,e),this.elementRef.onmouseup=this.buttonMouseUp.bind(this,e),this.elementRef.onmouseenter=this.buttonMouseEnter.bind(this,e),this.elementRef.onmouseleave=this.buttonMouseLeave.bind(this,e)}},{key:"unsetCustomStateStyles",value:function(e){if(this.customStyles)for(var t=0;t<e.length;t+=1){var n=e[t],r=n&&this.customStyles[n];r&&xr.unsetActionCSS(this.elementRef,r)}}},{key:"reapplyStateStyle",value:function(e,t){if(this.customStyles){t&&this.unsetCustomStateStyles(t);var n=this.customStyles[e];n&&xr.setElementCssUpToState(this.elementRef,n,this._mouseState.state),this.setEvents(n)}}},{key:"changeElementsByState",value:function(e){var t;(t=this.elementRef).replaceChildren.apply(t,u(e)),Er.reassignClassBasedOnChildren(this.elementRef,e)}},{key:"buildDefaultIconElement",value:function(e){var t=this.svg.cloneNode(!0);return t.id=e,[t]}},{key:"createInnerElements",value:function(e,t,n){var r=Er.createCustomElements(t,this.svg,n);if(r&&r.length>0){if("dropup-menu"===this.position){var i=this.svg.cloneNode(!0);i.id=r[0]===this.svg?e:"dropup-menu-item-icon-element-custom",r[0]=i}return r}return this.buildDefaultIconElement(e)}}])}(),Tr=function(e){function t(e){var n,r,i;x(this,t);var a=(null==(i=null==(r=null==e?void 0:e.default)?void 0:r.svg)?void 0:i.content)||t.EMPTY_SVG;return(n=f(this,t,[document.createElement("div"),a,void 0,void 0,e])).isActive=!1,n._innerElements=n.createInnerElementsForStates(n.customStyles),n.changeToDefault(),n}return v(t,e),T(t,[{key:"createInnerElementsForStates",value:function(e){return{default:this.createInnerButtonElements("default",e),active:this.createInnerButtonElements("active",e),unavailable:this.createInnerButtonElements("unavailable",e)}}},{key:"createInnerButtonElements",value:function(e,t){return Er.createCustomElements(e,this.svg,t)||[this.svg]}},{key:"changeState",value:function(e){this.changeElementsByState(e),this.elementRef.classList.replace(Er.INPUT_BUTTON_SVG_CLASS,"deep-chat-openai-realtime-button")}},{key:"changeToActive",value:function(){this.changeState(this._innerElements.active),this.reapplyStateStyle("active",["unavailable","default"]),this.isActive=!0}},{key:"changeToDefault",value:function(){var e,t,n,r;this.changeState(this._innerElements.default),null!=(e=this.customStyles)&&e.active&&xr.unsetAllCSS(this.elementRef,null==(t=this.customStyles)?void 0:t.active),null!=(n=this.customStyles)&&n.unavailable&&xr.unsetAllCSS(this.elementRef,null==(r=this.customStyles)?void 0:r.unavailable),this.reapplyStateStyle("default",["active","unavailable"]),this.isActive=!1}},{key:"changeToUnavailable",value:function(){var e,t,n,r;this.changeState(this._innerElements.unavailable),null!=(e=this.customStyles)&&e.active&&xr.unsetAllCSS(this.elementRef,null==(t=this.customStyles)?void 0:t.active),null!=(n=this.customStyles)&&n.default&&xr.unsetAllCSS(this.elementRef,null==(r=this.customStyles)?void 0:r.default),this.reapplyStateStyle("unavailable",["default","active"]),this.isActive=!1}}])}(Cr);Tr.EMPTY_SVG='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"></svg>';var Ar=Tr,Mr=function(){function e(){x(this,e)}return T(e,null,[{key:"setPropertyValueIfDoesNotExist",value:function(t,n,r){var i,a,o=n[0];1===n.length?null!==(i=t[o])&&void 0!==i||(t[o]=r):(null!==(a=t[o])&&void 0!==a||(t[o]={}),n.shift(),e.setPropertyValueIfDoesNotExist(t[o],n,r))}},{key:"setPropertyValue",value:function(t,n,r){var i,a=n[0];1===n.length?t[a]=r:(null!==(i=t[a])&&void 0!==i||(t[a]={}),n.shift(),e.setPropertyValue(t[a],n,r))}},{key:"getObjectValue",value:function(t,n){var r=t[n[0]];return void 0===r||1===n.length?r:e.getObjectValue(r,n.slice(1))}},{key:"overwritePropertyObjectFromAnother",value:function(t,n,r){var i=e.getObjectValue(n,r);if(i){var a=_(_({},i),e.getObjectValue(t,r)||{});e.setPropertyValue(t,r,a)}}},{key:"isJson",value:function(e){try{return JSON.stringify(e),!0}catch(t){return!1}}},{key:"assignPropertyFromOneToAnother",value:function(e,t,n){var r;null!==(r=t[e])&&void 0!==r||(t[e]={}),Object.assign(t[e],null==n?void 0:n[e])}}])}(),Lr=T(function e(){x(this,e)});Lr.SESSION_STARTED="sts-session-started",Lr.SESSION_STOPPED="sts-session-stopped";var Rr=Lr,Ir='<?xml version="1.0" encoding="utf-8"?>\n<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">\n  <path d="M5.92 24.096q0 1.088 0.928 1.728 0.512 0.288 1.088 0.288 0.448 0 0.896-0.224l16.16-8.064q0.48-0.256 0.8-0.736t0.288-1.088-0.288-1.056-0.8-0.736l-16.16-8.064q-0.448-0.224-0.896-0.224-0.544 0-1.088 0.288-0.928 0.608-0.928 1.728v16.16z"></path>\n</svg>',Or='<?xml version="1.0" encoding="utf-8"?>\n<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">\n<path d="M5.92 24.096q0 0.832 0.576 1.408t1.44 0.608h16.128q0.832 0 1.44-0.608t0.576-1.408v-16.16q0-0.832-0.576-1.44t-1.44-0.576h-16.128q-0.832 0-1.44 0.576t-0.576 1.44v16.16z"></path>\n</svg>',Pr=function(e){function t(e){var n,r,i,a,o,s;x(this,t);var l=JSON.parse(JSON.stringify(e.directConnection)),u=t.getKey(e);(r=f(this,t,[e,or.buildKeyVerificationDetails(),or.buildHeaders,{key:u}])).insertKeyPlaceholderText="OpenAI API Key",r.keyHelpUrl="https://platform.openai.com/account/api-keys",r._microphoneButton=null,r._toggleButton=null,r._errorElement=null,r._loadingElement=null,r._pc=null,r._mediaStream=null,r._isMuted=!1;var c=null==(i=l.openAI)?void 0:i.realtime;if("object"==w(c)){r._avatarConfig=c.avatar,r._ephemeralKey=c.ephemeralKey,r._errorConfig=c.error,r._loadingConfig=c.loading,Object.assign(r.rawBody,c.config);var d=null==(o=null==(a=e.directConnection)?void 0:a.openAI)?void 0:o.realtime,p=(d.config||{}).function_handler;p&&(r._functionHandler=p),r._events=c.events,d.methods=r.generateMethods()}return null!==(n=(s=r.rawBody).model)&&void 0!==n||(s.model="gpt-4o-realtime-preview-2024-12-17"),r._avatarConfig=t.buildAvatarConfig(c),r._buttonsConfig=t.buildButtonsConfig(c),r._avatarEl=t.createAvatar(r._avatarConfig),r._containerEl=r.createContainer(),r._deepChat=e,r}return v(t,e),T(t,[{key:"setUpView",value:function(e,t){e.style.display="none",t.appendChild(this._containerEl),this.setup()}},{key:"setup",value:function(){var e=k(y().mark(function e(){var t,n,r,i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null==(t=this._deepChat.directConnection)?void 0:t.openAI){e.next=3;break}return e.abrupt("return");case 3:if("object"==w(r=null==n?void 0:n.realtime)&&(r.autoStart||r.autoFetchEphemeralKey)){e.next=6;break}return e.abrupt("return");case 6:i=this.key||n.key,(r.fetchEphemeralKey||i)&&r.autoStart&&(this.changeToUnavailable(),this.displayLoading()),this.fetchEphemeralKey(r.autoStart);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"fetchEphemeralKey",value:function(){var e=k(y().mark(function e(t){var n,r,i,a,o,s;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null==(n=this._deepChat.directConnection)?void 0:n.openAI,i="object"==w(null==r?void 0:r.realtime)?null==r?void 0:r.realtime.fetchEphemeralKey:void 0,a=null==r?void 0:r.realtime,o=this.key||r.key,"object"!=w(a)){e.next=26;break}if(this._ephemeralKey){e.next=23;break}if(e.prev=3,!i){e.next=12;break}return(s=i()).then&&(this._retrievingEphemeralKey=s),e.next=9,s;case 9:this._ephemeralKey=e.sent,e.next=18;break;case 12:if(e.t0=o,!e.t0){e.next=18;break}return this._retrievingEphemeralKey=this.getEphemeralKey(o),e.next=17,this._retrievingEphemeralKey;case 17:this._ephemeralKey=e.sent;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(3),this.displayFailedToRetrieveEphemeralKey(e.t1);case 23:this._ephemeralKey&&(t?this.init(this._ephemeralKey):this.changeToAvailable()),e.next=38;break;case 26:if(!o){e.next=38;break}return e.prev=27,this._retrievingEphemeralKey=this.getEphemeralKey(o),e.next=31,this._retrievingEphemeralKey;case 31:this._ephemeralKey=e.sent,t&&this.init(this._ephemeralKey),e.next=38;break;case 35:e.prev=35,e.t2=e.catch(27),this.displayFailedToRetrieveEphemeralKey(e.t2);case 38:case"end":return e.stop()}},e,this,[[3,20],[27,35]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getEphemeralKey",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openai.com/v1/realtime/sessions",{method:"POST",body:JSON.stringify(this.rawBody),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 2:return e.next=4,e.sent.json();case 4:return e.abrupt("return",e.sent.client_secret.value);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"generateMethods",value:function(){var e=this;return{updateConfig:function(t){var n;null==(n=e._dc)||n.send(JSON.stringify({type:"session.update",session:t}))},sendMessage:function(t,n){var r=n||"system",i={role:r,type:"message",content:[{type:"system"===r||"user"===r?"input_text":"text",text:t}]};e.sendMessage(i)}}}},{key:"createContainer",value:function(){var e=document.createElement("div");return e.id="deep-chat-openai-realtime-container",e.appendChild(this.createAvatarContainer()),e.appendChild(this.createButtonsContainer()),e.appendChild(this.createError()),e}},{key:"createAvatarContainer",value:function(){var e,t,n=document.createElement("div");return n.id="deep-chat-openai-realtime-avatar-container",Object.assign(n.style,null==(t=null==(e=this._avatarConfig)?void 0:e.styles)?void 0:t.container),n.appendChild(this._avatarEl),n}},{key:"createButtonsContainer",value:function(){var e,n=document.createElement("div");n.id="deep-chat-openai-realtime-buttons-container",Object.assign(n.style,null==(e=this._buttonsConfig)?void 0:e.container),this._microphoneButton=this.createMicophoneButton();var r=t.createButtonContainer(this._microphoneButton.elementRef);this._toggleButton=this.createToggleButton();var i=t.createButtonContainer(this._toggleButton.elementRef);return n.appendChild(r),n.appendChild(i),n.appendChild(this.createLoading()),n}},{key:"createMicophoneButton",value:function(){var e,n=this,r=new Ar(null==(e=this._buttonsConfig)?void 0:e.microphone);return r.elementRef.classList.add(t.BUTTON_DEFAULT,"deep-chat-openai-realtime-microphone"),r.elementRef.onclick=function(){r.isActive?(n.toggleMicorphone(!0),r.elementRef.classList.replace(t.MICROPHONE_ACTIVE,t.BUTTON_DEFAULT),r.changeToDefault(),n._isMuted=!1):(n.toggleMicorphone(!1),r.elementRef.classList.replace(t.BUTTON_DEFAULT,t.MICROPHONE_ACTIVE),kr.removeAriaAttributes(r.elementRef),r.changeToActive(),n._isMuted=!0)},r}},{key:"toggleMicorphone",value:function(e){var t;null==(t=this._mediaStream)||t.getAudioTracks().forEach(function(t){return t.enabled=e})}},{key:"createToggleButton",value:function(){var e,n=this,r=new Ar(null==(e=this._buttonsConfig)?void 0:e.toggle);return r.elementRef.classList.add(t.BUTTON_DEFAULT,"deep-chat-openai-realtime-toggle"),r.elementRef.onclick=k(y().mark(function e(){var t,i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isActive){e.next=4;break}r.changeToDefault(),n.stop(),e.next=30;break;case 4:if(e.prev=4,!n._ephemeralKey){e.next=11;break}return n.displayLoading(),e.next=9,n.init(n._ephemeralKey);case 9:e.next=25;break;case 11:if(!n._retrievingEphemeralKey){e.next=22;break}return n.displayLoading(),e.next=15,n._retrievingEphemeralKey;case 15:if(i=e.sent,e.t0=null!=(t=n._toggleButton)&&t.isActive,!e.t0){e.next=20;break}return e.next=20,n.init(i);case 20:e.next=25;break;case 22:return n.displayLoading(),e.next=25,n.fetchEphemeralKey(!0);case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(4),console.error("Failed to start conversation:",e.t1),n.displayError(),n.hideLoading();case 30:case"end":return e.stop()}},e,null,[[4,27]])})),r}},{key:"init",value:function(){var e=k(y().mark(function e(t){var n,r,i,a,o,s,l,u,c=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new RTCPeerConnection,this._pc=n,(r=document.createElement("audio")).autoplay=!0,i=new AudioContext,(a=i.createAnalyser()).fftSize=256,o=new Uint8Array(a.frequencyBinCount),this._pc.ontrack=function(){var e=k(y().mark(function e(t){var n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.streams[0]){e.next=11;break}if(r.srcObject=t.streams[0],n=i.createMediaStreamSource(t.streams[0]),e.t0="suspended"===i.state,!e.t0){e.next=7;break}return e.next=7,i.resume();case 7:n.connect(a),c.monitorFrequencies(a,o),e.next=12;break;case 11:console.error("No streams found in the ontrack event."),c.displayError();case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e.next=10,navigator.mediaDevices.getUserMedia({audio:!0}).then(function(e){var t;n===c._pc&&(c._mediaStream=e,null==(t=c._pc)||t.addTrack(c._mediaStream.getTracks()[0]),c._isMuted&&c.toggleMicorphone(!1))}).catch(function(e){console.error("Error accessing microphone:",e),c.displayError()});case 10:return this._dc=this._pc.createDataChannel("oai-events"),this._dc.addEventListener("message",function(){var e=k(y().mark(function e(t){var n,r,i,a,o,s,l;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("session.created"!==(a=JSON.parse(t.data)).type){e.next=5;break}c.removeUnavailable(),c._toggleButton&&(kr.removeAriaAttributes(c._toggleButton.elementRef),c._toggleButton.changeToActive()),null==(r=null==(n=c._events)?void 0:n.started)||r.call(n),c._deepChat.dispatchEvent(new CustomEvent(Rr.SESSION_STARTED)),c.hideLoading(),e.next=20;break;case 5:if("response.done"!==a.type){e.next=19;break}if("function_call"!==(null==(o=null==(i=JSON.parse(t.data).response.output)?void 0:i[0])?void 0:o.type)){e.next=17;break}return s=o.name,l=o.call_id,e.prev=9,e.next=12,c.handleTool(s,o.arguments,l);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(9),c.stopOnError(e.t0);case 17:e.next=20;break;case 19:"error"===a.type?c.stopOnError(a.error.message):"invalid_request_error"===a.type?c.stopOnError(a.message):a.type;case 20:case"end":return e.stop()}},e,null,[[9,14]])}));return function(t){return e.apply(this,arguments)}}()),e.prev=12,e.next=15,this._pc.createOffer();case 15:if(s=e.sent,e.t0=n!==this._pc,e.t0){e.next=21;break}return e.next=20,this._pc.setLocalDescription(s);case 20:e.t0=n!==this._pc;case 21:if(!e.t0){e.next=23;break}return e.abrupt("return");case 23:return e.next=25,fetch("https://api.openai.com/v1/realtime",{method:"POST",body:s.sdp,headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/sdp"}});case 25:if(l=e.sent,n===this._pc){e.next=28;break}return e.abrupt("return");case 28:return e.next=30,l.text();case 30:if(e.t1=e.sent,u={type:"answer",sdp:e.t1},e.t2=n!==this._pc,e.t2){e.next=37;break}return e.next=36,this._pc.setRemoteDescription(u);case 36:e.t2=n!==this._pc;case 37:if(!e.t2){e.next=39;break}return e.abrupt("return");case 39:e.next=44;break;case 41:e.prev=41,e.t3=e.catch(12),console.error(e.t3),this.displayError();case 44:case"end":return e.stop()}},e,this,[[12,41]])}));return function(t){return e.apply(this,arguments)}}()},{key:"monitorFrequencies",value:function(e,t){var n=this,r=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var i;e.getByteFrequencyData(t);var a=1+t.reduce(function(e,t){return e+t},0)/(255*t.length)*100/100*((null==(i=n._avatarConfig)?void 0:i.maxScale)-1);n._avatarEl.style.transform="scale(".concat(a,")"),requestAnimationFrame(r)});r()}},{key:"stopOnError",value:function(e){this.stop(),console.error(e),this.displayError()}},{key:"stop",value:function(){var e,t,n;null==(e=this._mediaStream)||e.getTracks().forEach(function(e){return e.stop()}),this._mediaStream=null,this._pc&&(this._pc.close(),this._pc=null,null==(n=null==(t=this._events)?void 0:t.stopped)||n.call(t),this._deepChat.dispatchEvent(new CustomEvent(Rr.SESSION_STOPPED)),this._dc=void 0)}},{key:"changeToUnavailable",value:function(){this._microphoneButton&&t.changeButtonToUnavailable(this._microphoneButton),this._toggleButton&&t.changeButtonToUnavailable(this._toggleButton)}},{key:"changeToAvailable",value:function(){this._microphoneButton&&t.changeButtonToAvailable(this._microphoneButton),this._toggleButton&&t.changeButtonToAvailable(this._toggleButton)}},{key:"removeUnavailable",value:function(){this._microphoneButton&&t.removeButtonUnavailable(this._microphoneButton),this._toggleButton&&t.removeButtonUnavailable(this._toggleButton)}},{key:"createError",value:function(){var e,t=document.createElement("div");return t.id="deep-chat-openai-realtime-error",Object.assign(t.style,null==(e=this._errorConfig)?void 0:e.style),this._errorElement=t,t}},{key:"displayFailedToRetrieveEphemeralKey",value:function(e){console.error("Failed to retrieve ephemeral key"),console.error(e),this.displayError()}},{key:"displayError",value:function(){var e;this._errorElement&&(this._errorElement.style.display="block",this._errorElement.textContent=(null==(e=this._errorConfig)?void 0:e.text)||"Error",this.changeToUnavailable()),this.hideLoading()}},{key:"createLoading",value:function(){var e,t,n=document.createElement("div");return n.id="deep-chat-openai-realtime-loading",this._loadingElement=n,null!=(e=this._loadingConfig)&&e.html&&(this._loadingElement.innerHTML=this._loadingConfig.html),Object.assign(n.style,null==(t=this._loadingConfig)?void 0:t.style),n.style.display="none",n}},{key:"displayLoading",value:function(){var e,n,r;this._toggleButton&&(this._toggleButton.changeToActive(),this._toggleButton.elementRef.classList.add(t.BUTTON_LOADING),kr.removeAriaDisabled(this._toggleButton.elementRef),kr.addAriaBusy(this._toggleButton.elementRef)),("boolean"!=typeof(null==(e=this._loadingConfig)?void 0:e.display)||this._loadingConfig.display)&&this._loadingElement&&(this._loadingElement.style.display="block",null!=(n=this._loadingConfig)&&n.html||(this._loadingElement.textContent=(null==(r=this._loadingConfig)?void 0:r.text)||"Loading"))}},{key:"hideLoading",value:function(){this._toggleButton&&(this._toggleButton.elementRef.classList.remove(t.BUTTON_LOADING),kr.removeAriaBusy(this._toggleButton.elementRef)),this._loadingElement&&(this._loadingElement.style.display="none")}},{key:"handleTool",value:function(){var e=k(y().mark(function e(t,n,r){var i,a;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._functionHandler){e.next=2;break}throw Error("Please define the `function_handler` property inside the [openAI](https://deepchat.dev/docs/directConnection/OpenAI/OpenAIRealtime#OpenAIRealtimeFunction) object.");case 2:return e.next=4,this._functionHandler({name:t,arguments:n});case 4:if("object"==w(i=e.sent)&&Mr.isJson(i)){e.next=7;break}throw Error('The `function_handler` response must be a JSON object, e.g. {response: "My response"}');case 7:a={type:"function_call_output",call_id:r,output:JSON.stringify(i)},this.sendMessage(a);case 9:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(e){if(this._dc){var t=JSON.stringify({type:"conversation.item.create",item:e});this._dc.send(t);this._dc.send(JSON.stringify({type:"response.create"}))}}},{key:"isCustomView",value:function(){return!0}}],[{key:"getKey",value:function(e){var t=e.directConnection.openAI;if(null!=t&&t.key)return t.key;var n=null==t?void 0:t.realtime;return"object"==w(n)&&(n.ephemeralKey||n.fetchEphemeralKey)?"placeholder":void 0}},{key:"buildAvatarConfig",value:function(e){var t="object"==w(e)&&e.avatar?JSON.parse(JSON.stringify(e.avatar)):{};return t.maxScale=t.maxScale&&t.maxScale>=1?t.maxScale:2.5,t}},{key:"buildButtonsConfig",value:function(e){var t,n,r,i,a,o,s,l,u,c,d,f,p,h,m,v,g,y,b,k,S,_,E,x,C,T,A="object"==w(e)&&e.buttons?JSON.parse(JSON.stringify(e.buttons)):{};return null!=(h=null==(p=null==(f=A.microphone)?void 0:f.default)?void 0:p.text)&&h.content||(null!==(t=A.microphone)&&void 0!==t||(A.microphone={}),null!==(n=(m=A.microphone).default)&&void 0!==n||(m.default={}),null!==(r=(v=A.microphone.default).svg)&&void 0!==r||(v.svg={}),null!==(i=(g=A.microphone.default.svg).content)&&void 0!==i||(g.content=Sr)),null!=(k=null==(b=null==(y=A.toggle)?void 0:y.default)?void 0:b.text)&&k.content||(null!==(a=A.toggle)&&void 0!==a||(A.toggle={}),null!==(o=(S=A.toggle).default)&&void 0!==o||(S.default={}),null!==(s=(_=A.toggle.default).svg)&&void 0!==s||(_.svg={}),null!==(l=(E=A.toggle.default.svg).content)&&void 0!==l||(E.content=Ir),null!==(u=(x=A.toggle).active)&&void 0!==u||(x.active={}),null!==(c=(C=A.toggle.active).svg)&&void 0!==c||(C.svg={}),null!==(d=(T=A.toggle.active.svg).content)&&void 0!==d||(T.content=Or)),A}},{key:"createAvatar",value:function(e){var t,n=document.createElement("img");return n.id="deep-chat-openai-realtime-avatar",Object.assign(n.style,null==(t=null==e?void 0:e.styles)?void 0:t.image),n.src=(null==e?void 0:e.src)||Jt,n}},{key:"createButtonContainer",value:function(e){var t=document.createElement("div");return t.classList.add("deep-chat-openai-realtime-button-container"),t.appendChild(e),t}},{key:"changeButtonToUnavailable",value:function(e){e.elementRef.classList.add(t.UNAVAILABLE),kr.removeAriaBusy(e.elementRef),kr.addAriaDisabled(e.elementRef),e.changeToUnavailable()}},{key:"changeButtonToAvailable",value:function(e){t.removeButtonUnavailable(e),e.changeToDefault()}},{key:"removeButtonUnavailable",value:function(e){kr.removeAriaDisabled(e.elementRef),e.elementRef.classList.remove(t.UNAVAILABLE)}}])}(Cn);Pr.BUTTON_DEFAULT="deep-chat-openai-realtime-button-default",Pr.BUTTON_LOADING="deep-chat-openai-realtime-button-loading",Pr.MICROPHONE_ACTIVE="deep-chat-openai-realtime-microphone-active",Pr.UNAVAILABLE="deep-chat-openai-realtime-button-unavailable";var Nr=Pr,Dr=function(e){function t(e){var n,r,i,a,o,s;x(this,t);var l=JSON.parse(JSON.stringify(e.directConnection)),u=null==l?void 0:l.openAI;(i=f(this,t,[e,or.buildKeyVerificationDetails(),or.buildHeaders,u])).insertKeyPlaceholderText="OpenAI API Key",i.keyHelpUrl="https://platform.openai.com/account/api-keys",i.url="https://api.openai.com/v1/audio/speech",i.permittedErrorPrefixes=["Invalid"],i.introPanelMarkUp='\n    <div style="width: 100%; text-align: center; margin-left: -10px"><b>OpenAI : Text To Speech</b></div>\n    <p>Generate an audio file based on your text input.</p>\n    <p>Click <a href="https://platform.openai.com/docs/guides/text-to-speech">here</a> for more information.</p>';var c=null==(a=null==l?void 0:l.openAI)?void 0:a.textToSpeech;return"object"==w(c)&&Object.assign(i.rawBody,c),null!==(n=(o=i.rawBody).model)&&void 0!==n||(o.model=t.DEFAULT_MODEL),null!==(r=(s=i.rawBody).voice)&&void 0!==r||(s.voice=t.DEFAULT_VOIDE),i.textInputPlaceholderText="Insert text to generate audio",i.rawBody.response_format="mp3",i}return v(t,e),T(t,[{key:"preprocessBody",value:function(e,t){var n,r,i=JSON.parse(JSON.stringify(e)),a=null==(r=null==(n=t[t.length-1])?void 0:n.text)?void 0:r.trim();return a&&""!==a&&(i.input=a),i}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n){var r,i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(r=this.connectSettings)&&r.headers){e.next=2;break}throw new Error("Request settings have not been set up");case 2:this.url=this.connectSettings.url||this.url,i=this.preprocessBody(this.rawBody,n),kn.request(this,i,t);case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Blob)){e.next=2;break}return e.abrupt("return",new Promise(function(e){var n=new FileReader;n.readAsDataURL(t),n.onload=function(t){e({files:[{src:t.target.result,type:"audio"}]})}}));case 2:if(!t.error){e.next=4;break}throw t.error.message;case 4:return e.abrupt("return",{error:"error"});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(Cn);Dr.DEFAULT_MODEL="tts-1",Dr.DEFAULT_VOIDE="alloy";var Br=Dr,Fr=function(e){function t(e){var n,r,i,a;x(this,t);var o=JSON.parse(JSON.stringify(e.directConnection)),s=null==o?void 0:o.openAI;(r=f(this,t,[e,or.buildKeyVerificationDetails(),or.buildHeaders,s,{audio:{}}])).insertKeyPlaceholderText="OpenAI API Key",r.keyHelpUrl="https://platform.openai.com/account/api-keys",r.introPanelMarkUp='\n    <div style="width: 100%; text-align: center; margin-left: -10px"><b>OpenAI : Speech To Text</b></div>\n    <p><b>Upload an audio file</b> to transcribe it into text. You can optionally provide text to guide the audio\n      processing.\n    <p>Click <a href="https://platform.openai.com/docs/guides/speech-to-text">here</a> for more info.</p>',r.url="",r.permittedErrorPrefixes=["Invalid"],r.textInputPlaceholderText="Upload an audio file",r._service_url=t.AUDIO_TRANSCRIPTIONS_URL;var l=null==(i=null==o?void 0:o.openAI)?void 0:i.audio;return"object"==w(l)&&(r.processConfig(l),t.cleanConfig(l),Object.assign(r.rawBody,l)),null!==(n=(a=r.rawBody).model)&&void 0!==n||(a.model=t.DEFAULT_MODEL),r.rawBody.response_format="json",r.canSendMessage=t.canSendFileMessage,r}return v(t,e),T(t,[{key:"processConfig",value:function(e){null!=e&&e.type&&"translation"===e.type&&(this._service_url=t.AUDIO_TRANSLATIONS_URL,delete e.language)}},{key:"preprocessBody",value:function(e,t){var n,r,i=JSON.parse(JSON.stringify(e)),a=null==(r=null==(n=t[t.length-1])?void 0:n.text)?void 0:r.trim();return a&&""!==a&&(i.prompt=a),i}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(n,r,i){var a,o,s;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(a=this.connectSettings)&&a.headers){e.next=2;break}throw new Error("Request settings have not been set up");case 2:if(null!=i&&i[0]){e.next=4;break}throw new Error("No file was added");case 4:this.url=this.connectSettings.url||this._service_url,o=this.preprocessBody(this.rawBody,r),s=t.createFormDataBody(o,i[0]),on.tempRemoveContentHeader(this.connectSettings,kn.request.bind(this,this,s,n),!1);case 7:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}throw t.error.message;case 2:return e.abrupt("return",{text:t.text});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"canSendFileMessage",value:function(e,t){return!(null==t||!t[0])}},{key:"cleanConfig",value:function(e){delete e.type}},{key:"createFormDataBody",value:function(e,t){var n=new FormData;return n.append("file",t),Object.keys(e).forEach(function(t){n.append(t,String(e[t]))}),n}}])}(Cn);Fr.AUDIO_TRANSCRIPTIONS_URL="https://api.openai.com/v1/audio/transcriptions",Fr.AUDIO_TRANSLATIONS_URL="https://api.openai.com/v1/audio/translations",Fr.DEFAULT_MODEL="whisper-1";var Ur=Fr,jr=function(){function e(){x(this,e)}return T(e,null,[{key:"buildTextToSpeechHeaders",value:function(e,t){return{"Ocp-Apim-Subscription-Key":t,"Content-Type":"application/ssml+xml","X-Microsoft-OutputFormat":e}}},{key:"buildSpeechToTextHeaders",value:function(e){return{"Ocp-Apim-Subscription-Key":e,Accept:"application/json"}}},{key:"handleSpeechVerificationResult",value:function(e,t,n,r){e.error?r(X.INVALID_KEY):n(t)}},{key:"buildSpeechKeyVerificationDetails",value:function(t){return{url:"https://".concat(t,".api.cognitive.microsoft.com/sts/v1.0/issuetoken"),method:"POST",createHeaders:function(e){return{"Ocp-Apim-Subscription-Key":"".concat(e)}},handleVerificationResult:e.handleSpeechVerificationResult}}},{key:"buildSummarizationHeader",value:function(e){return{"Ocp-Apim-Subscription-Key":e,"Content-Type":"application/json"}}},{key:"handleLanguageVerificationResult",value:function(e,t,n,r){var i;"401"===(null==(i=e.error)?void 0:i.code)?r(X.INVALID_KEY):n(t)}},{key:"buildLanguageKeyVerificationDetails",value:function(t){return{url:"".concat(t,"/language/analyze-text/jobs?api-version=2022-10-01-preview"),method:"POST",createHeaders:function(e){return{"Ocp-Apim-Subscription-Key":"".concat(e)}},handleVerificationResult:e.handleLanguageVerificationResult}}},{key:"handleTranslationVerificationResult",value:function(e,t,n,r){e.json().then(function(e){Array.isArray(e)||401e3!==e.error.code?n(t):r(X.INVALID_KEY)})}},{key:"buildTranslationKeyVerificationDetails",value:function(t){return{url:"https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=es",method:"POST",createHeaders:function(n){return e.buildTranslationHeaders(t,n)},handleVerificationResult:e.handleTranslationVerificationResult}}},{key:"buildTranslationHeaders",value:function(e,t){var n={"Ocp-Apim-Subscription-Key":t,"Content-Type":"application/json"};return e&&(n["Ocp-Apim-Subscription-Region"]=e),n}}])}(),zr=function(e){function t(e,n,r,i,a){var o;return x(this,t),(o=f(this,t,[e,jr.buildLanguageKeyVerificationDetails(r),n,i,a])).insertKeyPlaceholderText="Azure Language Subscription Key",o.keyHelpUrl="https://learn.microsoft.com/en-us/azure/api-management/api-management-subscriptions#create-and-manage-subscriptions-in-azure-portal",o.permittedErrorPrefixes=["Access"],o}return v(t,e),T(t)}(Cn),Hr=function(e){function t(e){var n,r,i,a,o,s;x(this,t);var l=null==(a=null==(i=e.directConnection)?void 0:i.azure)?void 0:a.summarization,u=null==(o=e.directConnection)?void 0:o.azure;return(r=f(this,t,[e,jr.buildSummarizationHeader,l.endpoint,u])).permittedErrorPrefixes=[t.ENDPOINT_ERROR_MESSAGE],r.url="",r.textInputPlaceholderText="Insert text to summarize",r.isTextInputDisabled=!1,l.endpoint?(null!==(n=(s=r.rawBody).language)&&void 0!==n||(s.language="en"),Object.assign(r.rawBody,l),r.url="".concat(l.endpoint,"/language/analyze-text/jobs?api-version=2022-10-01-preview")):(r.isTextInputDisabled=!0,r.canSendMessage=function(){return!1},setTimeout(function(){e.addMessage({error:t.ENDPOINT_ERROR_MESSAGE})})),r}return v(t,e),T(t,[{key:"preprocessBody",value:function(e,t){var n=t[t.length-1].text;if(n)return{analysisInput:{documents:[{id:"1",language:e.language,text:n}]},tasks:[{kind:"ExtractiveSummarization"}]}}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:r=this.preprocessBody(this.rawBody,n),kn.request(this,r,t),this.messages=t;case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){var n,r,i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}throw t.error.message;case 2:return this.messages&&this.completionsHandlers&&(r=t.headers.get("operation-location"),i={method:"GET",headers:null==(n=this.connectSettings)?void 0:n.headers},kn.executePollRequest(this,r,i,this.messages)),e.abrupt("return",{makingAnotherRequest:!0});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"extractPollResultData",value:function(){var e=k(y().mark(function e(t){var n,r,i,a;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}throw t.error;case 2:if("running"!==t.status){e.next=4;break}return e.abrupt("return",{timeoutMS:2e3});case 4:if(!(t.errors.length>0)){e.next=6;break}throw t.errors[0];case 6:if(!(t.tasks.items[0].results.errors.length>0)){e.next=8;break}throw t.tasks.items[0].results.errors[0];case 8:n="",r=o(t.tasks.items[0].results.documents[0].sentences);try{for(r.s();!(i=r.n()).done;)a=i.value,n+=a.text}catch(s){r.e(s)}finally{r.f()}return e.abrupt("return",{text:n||""});case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(zr);Hr.ENDPOINT_ERROR_MESSAGE="Please define the azure endpoint. [More Information](https://deepchat.dev/docs/directConnection/Azure#Summarization)";var qr=Hr,Vr=function(){function e(){x(this,e)}return T(e,null,[{key:"poll",value:function(){var e=k(y().mark(function e(t,n){var r,i,a,o;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={authorization:t,"content-type":"application/json"},e.t0="https://api.assemblyai.com/v2/transcript/",e.next=4,fetch("https://api.assemblyai.com/v2/transcript",{method:"POST",body:JSON.stringify({audio_url:n}),headers:r});case 4:return e.next=6,e.sent.json();case 6:e.t1=e.sent.id,i=e.t0.concat.call(e.t0,e.t1);case 8:if(a){e.next=24;break}return e.next=11,fetch(i,{headers:r});case 11:return e.next=13,e.sent.json();case 13:if("completed"!==(o=e.sent).status){e.next=18;break}a=o,e.next=22;break;case 18:if("error"!==o.status){e.next=20;break}throw new Error("Transcription failed: ".concat(o.error));case 20:return e.next=22,new Promise(function(e){return setTimeout(e,3e3)});case 22:e.next=8;break;case 24:return e.abrupt("return",a);case 25:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"buildHeaders",value:function(e){return{Authorization:e,"Content-Type":"application/octet-stream"}}},{key:"handleVerificationResult",value:function(e,t,n,r){var i=e;i.error?"invalid_api_key"===i.error.code?r(X.INVALID_KEY):r(X.CONNECTION_FAILED):n(t)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api.assemblyai.com/v2/upload",method:"POST",handleVerificationResult:e.handleVerificationResult}}}])}(),Gr=function(e){function t(e){var n,r;x(this,t);var i=null==(r=e.directConnection)?void 0:r.assemblyAI;return(n=f(this,t,[e,Vr.buildKeyVerificationDetails(),Vr.buildHeaders,i,{audio:{}}])).insertKeyPlaceholderText="AssemblyAI API Key",n.keyHelpUrl="https://www.assemblyai.com/app/account",n.introPanelMarkUp='\n    <div style="width: 100%; text-align: center; margin-left: -10px"><b>AssemblyAI Audio</b></div>\n    <p><b>Upload an audio file</b> to transcribe it into text.\n    <p>\n      Click <a href="https://www.assemblyai.com/docs/Guides/transcribing_an_audio_file#get-started">here</a> for more info.\n    </p>',n.url="https://api.assemblyai.com/v2/upload",n.isTextInputDisabled=!0,n.textInputPlaceholderText="Upload an audio file",n.permittedErrorPrefixes=["Authentication","Invalid"],n.canSendMessage=t.canFileSendMessage,n}return v(t,e),T(t,[{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n,r){var i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(i=this.connectSettings)&&i.headers){e.next=2;break}throw new Error("Request settings have not been set up");case 2:if(null!=r&&r[0]){e.next=4;break}throw new Error("No file was added");case 4:kn.request(this,r[0],t,!1);case 5:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){var n,r,i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}throw t.error;case 2:return i=null==(r=null==(n=this.connectSettings)?void 0:n.headers)?void 0:r.Authorization,e.next=5,Vr.poll(i,t.upload_url);case 5:return e.t0=e.sent.text,e.abrupt("return",{text:e.t0});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"canFileSendMessage",value:function(e,t){return!(null==t||!t[0])}}])}(Cn),Wr=function(e){function t(e,n,r,i,a){var o;return x(this,t),(o=f(this,t,[e,jr.buildSpeechKeyVerificationDetails(r),n,i,a])).insertKeyPlaceholderText="Azure Speech Subscription Key",o.keyHelpUrl="https://learn.microsoft.com/en-us/azure/api-management/api-management-subscriptions#create-and-manage-subscriptions-in-azure-portal",o}return v(t,e),T(t)}(Cn),Kr=function(e){function t(e){var n,r,i,a,o,s,l,u,c,d;x(this,t);var p=null==(s=null==(o=e.directConnection)?void 0:o.azure)?void 0:s.textToSpeech,h=null==(l=e.directConnection)?void 0:l.azure;return(a=f(this,t,[e,jr.buildTextToSpeechHeaders.bind({},(null==p?void 0:p.outputFormat)||"audio-16khz-128kbitrate-mono-mp3"),p.region,h])).permittedErrorPrefixes=[t.REGION_ERROR_MESSAGE],a.introPanelMarkUp='\n    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Azure Text To Speech</b></div>\n    <p>Insert text to synthesize it to audio.\n    <p>\n      Click <a href="'.concat(t.HELP_LINK,'">here</a> for more info.\n    </p>'),a.isTextInputDisabled=!1,a.url="",p.region?(Object.assign(a.rawBody,p),null!==(n=(u=a.rawBody).lang)&&void 0!==n||(u.lang="en-US"),null!==(r=(c=a.rawBody).name)&&void 0!==r||(c.name="en-US-JennyNeural"),null!==(i=(d=a.rawBody).gender)&&void 0!==i||(d.gender="Female"),a.url="https://".concat(p.region,".tts.speech.microsoft.com/cognitiveservices/v1")):(a.isTextInputDisabled=!0,a.canSendMessage=function(){return!1},setTimeout(function(){e.addMessage({error:t.REGION_ERROR_MESSAGE})})),a}return v(t,e),T(t,[{key:"preprocessBody",value:function(e,t){var n=t[t.length-1].text;if(n)return"<speak version='1.0' xml:lang='".concat(e.lang,"'>\n      <voice xml:lang='").concat(e.lang,"' xml:gender='").concat(e.gender,"' name='").concat(e.name,"'>\n        ").concat(n,"\n      </voice>\n    </speak>")}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:r=this.preprocessBody(this.rawBody,n),kn.request(this,r,t,!1);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){var n=new FileReader;n.readAsDataURL(t),n.onload=function(t){e({files:[{src:t.target.result,type:"audio"}]})}}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(Wr);Kr.HELP_LINK="https://learn.microsoft.com/en-GB/azure/cognitive-services/speech-service/get-started-text-to-speech?tabs=windows%2Cterminal&pivots=programming-language-rest",Kr.REGION_ERROR_MESSAGE="Please define a region config property. [More Information](https://deepchat.dev/docs/directConnection/Azure#TextToSpeech)";var Jr=Kr,$r=function(e){function t(e){var n,r,i,a;x(this,t);var o=null==(i=null==(r=e.directConnection)?void 0:r.azure)?void 0:i.speechToText,s=null==(a=e.directConnection)?void 0:a.azure;if((n=f(this,t,[e,jr.buildSpeechToTextHeaders,o.region,s,{audio:{files:{acceptedFormats:".wav,.ogg"}}}])).permittedErrorPrefixes=[t.REGION_ERROR_MESSAGE],n.introPanelMarkUp='\n    <div style="width: 100%; text-align: center; margin-left: -10px"><b>Azure Speech To Text</b></div>\n    <p><b>Upload a .wav or .ogg audio file</b> to transcribe it into text.\n    <p>\n      Click <a href="'.concat(t.HELP_LINK,'">here</a> for more info.\n    </p>'),n.url="",n.isTextInputDisabled=!0,n.textInputPlaceholderText="Upload an audio file",o.region){n.canSendMessage=t.canFileSendMessage;var l=o.lang||"en-US";n.url="https://".concat(o.region,".stt.speech.microsoft.com/speech/recognition/conversation/cognitiveservices/v1?language=").concat(l,"&format=detailed"),n.recordAudio=void 0}else n.isTextInputDisabled=!0,n.canSendMessage=function(){return!1},setTimeout(function(){e.addMessage({error:t.REGION_ERROR_MESSAGE})});return n}return v(t,e),T(t,[{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n,r){var i,a;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(i=this.connectSettings)&&i.headers){e.next=2;break}throw new Error("Request settings have not been set up");case 2:if(null!=r&&r[0]){e.next=4;break}throw new Error("No file was added");case 4:null!=(a=this.connectSettings)&&a.headers&&(this.connectSettings.headers["Content-Type"]=r[0].name.toLocaleLowerCase().endsWith(".wav")?"audio/wav; codecs=audio/pcm; samplerate=16000":"audio/ogg; codecs=opus"),kn.request(this,r[0],t,!1);case 5:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}throw t.error;case 2:return e.abrupt("return",{text:t.DisplayText||""});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"canFileSendMessage",value:function(e,t){return!(null==t||!t[0])}}])}(Wr);$r.HELP_LINK="https://learn.microsoft.com/en-GB/azure/cognitive-services/speech-service/get-started-text-to-speech?tabs=windows%2Cterminal&pivots=programming-language-rest",$r.REGION_ERROR_MESSAGE="Please define a region config property. [More Information](https://deepchat.dev/docs/directConnection/Azure#SpeechToText)";var Xr=$r,Yr=function(e){function t(e){var n,r,i,a;x(this,t);var o=null==(i=null==(r=e.directConnection)?void 0:r.azure)?void 0:i.translation,s=null==(a=e.directConnection)?void 0:a.azure;return(n=f(this,t,[e,jr.buildTranslationKeyVerificationDetails(o.region),jr.buildTranslationHeaders.bind({},null==o?void 0:o.region),s])).insertKeyPlaceholderText="Azure Translate Subscription Key",n.keyHelpUrl="https://learn.microsoft.com/en-us/azure/api-management/api-management-subscriptions#create-and-manage-subscriptions-in-azure-portal",n.url="",n.url="https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=".concat(o.language||"es"),n}return v(t,e),T(t,[{key:"preprocessBody",value:function(e){var t=e[e.length-1].text;if(t)return[{Text:t}]}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:r=this.preprocessBody(n),kn.request(this,r,t);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){var n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)){e.next=2;break}return e.abrupt("return",{text:(null==(n=t[0].translations)?void 0:n[0].text)||""});case 2:throw t.error;case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(Cn),Qr=function(e){function t(e,n,r,i,a){var o,s,l,u,c,d,p,h;x(this,t);var m=JSON.parse(JSON.stringify(e.directConnection));(l=f(this,t,[e,n||or.buildKeyVerificationDetails(),r||or.buildHeaders,i||m.openAI])).insertKeyPlaceholderText="OpenAI API Key",l.keyHelpUrl="https://platform.openai.com/account/api-keys",l.url="https://api.openai.com/v1/chat/completions",l.permittedErrorPrefixes=["Incorrect"],l.asyncCallInProgress=!1,l._systemMessage=t.generateSystemMessage("You are a helpful assistant.");var v=a||(null==(u=m.openAI)?void 0:u.chat);if("object"==w(v)){v.system_prompt&&(l._systemMessage=t.generateSystemMessage(v.system_prompt));var g=null==(p=null==(d=null==(c=e.directConnection)?void 0:c.openAI)?void 0:d.chat)?void 0:p.function_handler;g&&(l._functionHandler=g),l.cleanConfig(v),Object.assign(l.rawBody,v)}return null!==(o=l.maxMessages)&&void 0!==o||(l.maxMessages=-1),null!==(s=(h=l.rawBody).model)&&void 0!==s||(h.model="gpt-4o"),l}return v(t,e),T(t,[{key:"cleanConfig",value:function(e){delete e.system_prompt,delete e.function_handler}},{key:"preprocessBody",value:function(e,n){var r,i=JSON.parse(JSON.stringify(e)),a=En.getCharacterLimitMessages(n,this.totalMessagesMaxCharLength?this.totalMessagesMaxCharLength-this._systemMessage.content.length:-1).map(function(e){return{content:t.getContent(e),role:e.role===tn.USER_ROLE?"user":"assistant"}});return n.find(function(e){return e.files&&e.files.length>0})&&(null!==(r=i.max_tokens)&&void 0!==r||(i.max_tokens=300)),i.messages=[this._systemMessage].concat(u(a)),i}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n){var r,i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:r=this.preprocessBody(this.rawBody,n),(i=this.stream)&&("object"!=w(i)||!i.simulation)||r.stream?(r.stream=!0,mn.request(this,r,t)):kn.request(this,r,t);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t,n,r){var i,a,o,s;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}throw t.error.message;case 2:return e.abrupt("return",null!=(a=null==(i=t.choices)?void 0:i[0])&&a.delta?this.extractStreamResult(t.choices[0],n,r):null!=(s=null==(o=t.choices)?void 0:o[0])&&s.message?t.choices[0].message.tool_calls?this.handleTools(t.choices[0].message,n,r):{text:t.choices[0].message.content}:{text:""});case 3:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"extractStreamResult",value:function(){var e=k(y().mark(function e(t,n,r){var i,a,o=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.delta,"tool_calls"!==t.finish_reason){e.next=7;break}return this.asyncCallInProgress=!0,a={tool_calls:this._streamToolCalls},e.abrupt("return",(this._streamToolCalls=void 0,this.handleTools(a,n,r)));case 7:null!=i&&i.tool_calls&&(this._streamToolCalls?i.tool_calls.forEach(function(e,t){o._streamToolCalls&&(o._streamToolCalls[t].function.arguments+=e.function.arguments)}):this._streamToolCalls=i.tool_calls);case 8:return e.abrupt("return",{text:(null==i?void 0:i.content)||""});case 9:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"handleTools",value:function(){var e=k(y().mark(function e(t,n,r){var i,a,o,s,l,u,c,d,f,p,h,m;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.tool_calls&&n&&r&&this._functionHandler){e.next=2;break}throw Error("Please define the `function_handler` property inside the [openAI](https://deepchat.dev/docs/directConnection/openAI#Chat) object.");case 2:return u=JSON.parse(JSON.stringify(r)),c=t.tool_calls.map(function(e){return{name:e.function.name,arguments:e.function.arguments}}),e.next=6,null==(i=this._functionHandler)?void 0:i.call(this,c);case 6:if(d=e.sent,Array.isArray(d)){e.next=20;break}if(!d.text){e.next=19;break}return f={text:d.text},e.next=12,null==(o=(a=this.deepChat).responseInterceptor)?void 0:o.call(a,f);case 12:if(e.t0=e.sent,e.t0){e.next=15;break}e.t0=f;case 15:if(p=e.t0,!Array.isArray(p)){e.next=18;break}throw Error(or.FUNCTION_TOOL_RESP_ARR_ERROR);case 18:return e.abrupt("return",p);case 19:throw Error(or.FUNCTION_TOOL_RESP_ERROR);case 20:return e.next=22,Promise.all(d);case 22:if(h=e.sent,u.messages.push({tool_calls:t.tool_calls,role:"assistant",content:null}),h.find(function(e){return"string"!=typeof e.response})||c.length!==h.length){e.next=43;break}return h.forEach(function(e,n){var r,i=null==(r=t.tool_calls)?void 0:r[n];null==u||u.messages.push({role:"tool",tool_call_id:null==i?void 0:i.id,name:null==i?void 0:i.function.name,content:e.response})}),delete u.tools,delete u.tool_choice,delete u.stream,e.prev=25,e.next=28,null==n?void 0:n(u).then(function(e){return on.processResponseByType(e)});case 28:return m=e.sent,e.next=31,null==(l=(s=this.deepChat).responseInterceptor)?void 0:l.call(s,m);case 31:if(e.t1=e.sent,e.t1){e.next=34;break}e.t1=m;case 34:if(!(m=e.t1).error){e.next=37;break}throw m.error.message;case 37:return e.abrupt("return",{text:m.choices[0].message.content||""});case 40:throw e.prev=40,e.t2=e.catch(25),this.asyncCallInProgress=!1,e.t2;case 43:throw Error(or.FUNCTION_TOOL_RESP_ERROR);case 44:case"end":return e.stop()}},e,this,[[25,40]])}));return function(t,n,r){return e.apply(this,arguments)}}()}],[{key:"generateSystemMessage",value:function(e){return{role:"system",content:e}}},{key:"getContent",value:function(e){if(e.files&&e.files.length>0){var t=e.files.map(function(e){return{type:"image_url",image_url:{url:e.src}}});return e.text&&e.text.trim().length>0&&t.unshift({type:"text",text:e.text}),t}return e.text}}])}(Cn),Zr=function(e){function t(e){var n,r,i,a,o,s,l,u;x(this,t);var c=JSON.parse(JSON.stringify(e.directConnection)),d=c.azure,p=(null==(i=null==(r=c.azure)?void 0:r.openAI)?void 0:i.urlDetails)||{},h=null==(o=null==(a=c.azure)?void 0:a.openAI)?void 0:o.chat;if((n=f(this,t,[e,vr.buildKeyVerificationDetails(p),vr.buildHeaders,d,h])).permittedErrorPrefixes=[vr.URL_DETAILS_ERROR_MESSAGE],n.isTextInputDisabled=!1,"object"==w(h)){var m=(null==(u=null==(l=null==(s=e.directConnection)?void 0:s.azure)?void 0:l.openAI)?void 0:u.chat).function_handler;m&&(n._functionHandler=m)}return vr.validateURLDetails(p)?n.url=t.buildURL(p):(n.isTextInputDisabled=!0,n.canSendMessage=function(){return!1},setTimeout(function(){e.addMessage({error:vr.URL_DETAILS_ERROR_MESSAGE})})),n}return v(t,e),T(t,null,[{key:"buildURL",value:function(e){var t=e.endpoint,n=e.deploymentId,r=e.version;return"".concat(t,"/openai/deployments/").concat(n,"/chat/completions?api-version=").concat(r)}}])}(Qr),ei=function(e){function t(e){var n,r;x(this,t);var i=e.directConnection,a=null==i?void 0:i.openAI;(n=f(this,t,[e,or.buildKeyVerificationDetails(),or.buildHeaders,a,{images:{files:{acceptedFormats:".png",maxNumberOfFiles:2}}}])).insertKeyPlaceholderText="OpenAI API Key",n.keyHelpUrl="https://platform.openai.com/account/api-keys",n.introPanelMarkUp='\n    <div style="width: 100%; text-align: center; margin-left: -10px"><b>OpenAI DALL\xb7E</b></div>\n    <p><b>Insert text</b> to generate an image.</p>\n    <p><b>Upload 1</b> PNG image to generate its variation and optionally insert text to specify the change.</p>\n    <p><b>Upload 2</b> PNG images where the second is a copy of the first with a transparent area where the edit should\n      take place and text to specify the edit.</p>\n    <p>Click <a href="https://platform.openai.com/docs/guides/images/introduction">here</a> for more info.</p>',n.url="",n.permittedErrorPrefixes=["Incorrect","Invalid input image"];var o=null==(r=null==i?void 0:i.openAI)?void 0:r.images;if(n.camera){var s="object"==w(o)&&o.size?Number.parseInt(o.size):1024;n.camera.files={dimensions:{width:s,height:s}}}return"object"==w(o)&&Object.assign(n.rawBody,o),n.canSendMessage=t.canFileSendMessage,n}return v(t,e),T(t,[{key:"preprocessBody",value:function(e,t){var n=JSON.parse(JSON.stringify(e));return t&&""!==t&&(n.prompt=t),n}},{key:"callApiWithImage",value:function(e,n,r){var i,a,o,s=null==(a=null==(i=n[n.length-1])?void 0:i.text)?void 0:a.trim();if(r[1]||s&&""!==s){this.url=t.IMAGE_EDIT_URL;var l=this.preprocessBody(this.rawBody,s);o=t.createFormDataBody(l,r[0],r[1])}else this.url=t.IMAGE_VARIATIONS_URL,o=t.createFormDataBody(this.rawBody,r[0]);on.tempRemoveContentHeader(this.connectSettings,kn.request.bind(this,this,o,e),!1)}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(n,r,i){var a,o;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=(a=this.connectSettings)&&a.headers){e.next=2;break}throw new Error("Request settings have not been set up");case 2:if(null==i||!i[0]){e.next=6;break}this.callApiWithImage(n,r,i),e.next=11;break;case 6:if(this.connectSettings){e.next=8;break}throw new Error("Request settings have not been set up");case 8:this.url=t.IMAGE_GENERATION_URL,o=this.preprocessBody(this.rawBody,r[r.length-1].text),kn.request(this,o,n);case 11:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}throw t.error.message;case 2:return e.abrupt("return",{files:t.data.map(function(e){return e.url?{src:e.url,type:"image"}:{src:"".concat(Gn).concat(e.b64_json),type:"image"}})});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"canFileSendMessage",value:function(e,t){return!(null==t||!t[0])||!(!e||""===e.trim())}},{key:"createFormDataBody",value:function(e,t,n){var r=new FormData;return r.append("image",t),n&&r.append("mask",n),Object.keys(e).forEach(function(t){r.append(t,String(e[t]))}),r}}])}(Cn);ei.IMAGE_GENERATION_URL="https://api.openai.com/v1/images/generations",ei.IMAGE_VARIATIONS_URL="https://api.openai.com/v1/images/variations",ei.IMAGE_EDIT_URL="https://api.openai.com/v1/images/edits";var ti=ei,ni=function(e){function t(e){var n,r,i;x(this,t);var a=JSON.parse(JSON.stringify(e.directConnection)),o=null==(i=a.cohere)?void 0:i.chat;return r=f(this,t,[e,"https://api.cohere.ai/v1/chat","Ask me anything!",o,a.cohere]),"object"==w(o)&&Object.assign(r.rawBody,o),null!==(n=r.maxMessages)&&void 0!==n||(r.maxMessages=-1),r}return v(t,e),T(t,[{key:"preprocessBody",value:function(e,t){var n=JSON.parse(JSON.stringify(e)),r=t.filter(function(e){return e.text});return n.query=r[r.length-1].text,n.chat_history=r.slice(0,r.length-1).map(function(e){return{text:e.text,user_name:"ai"===e.role?"CHATBOT":"USER"}}),n}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:r=this.preprocessBody(this.rawBody,n),kn.request(this,r,t);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.message){e.next=2;break}throw t.message;case 2:return e.abrupt("return",{text:t.text});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(pr),ri=function(){function e(){x(this,e)}return T(e,null,[{key:"buildHeaders",value:function(e){return{Authorization:"Bearer ".concat(e),"Content-Type":"application/json",accept:"application/json"}}},{key:"handleVerificationResult",value:function(e,t,n,r){var i;null!=(i=e.message)&&i.includes("invalid request: prompt must be at least 1 token long")?n(t):r(X.INVALID_KEY)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://api.mistral.ai/v1/models",method:"GET",handleVerificationResult:e.handleVerificationResult}}}])}(),ii=function(e){function t(e){var n,r,i,a;x(this,t);var o=JSON.parse(JSON.stringify(e.directConnection)).mistral;return(i=f(this,t,[e,ri.buildKeyVerificationDetails(),ri.buildHeaders,o])).insertKeyPlaceholderText="Mistral API Key",i.keyHelpUrl="https://console.mistral.ai/api-keys/",i.url="https://api.mistral.ai/v1/chat/completions",i.permittedErrorPrefixes=["invalid"],o&&(i.cleanConfig(o),Object.assign(i.rawBody,o)),null!==(n=i.maxMessages)&&void 0!==n||(i.maxMessages=-1),null!==(r=(a=i.rawBody).model)&&void 0!==r||(a.model="open-mistral-7b"),i}return v(t,e),T(t,[{key:"cleanConfig",value:function(e){delete e.key}},{key:"preprocessBody",value:function(e,t){var n=JSON.parse(JSON.stringify(e)),r=t.filter(function(e){return e.text});return n.messages=r.slice(0,r.length-1).map(function(e){return{text:e.text,user_name:"ai"===e.role?"system":"user"}}),n}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n){var r;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:r=this.preprocessBody(this.rawBody,n),kn.request(this,r,t);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.message){e.next=2;break}throw t.message;case 2:return e.abrupt("return",{text:t.text});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}])}(Cn),ai=function(){function e(){x(this,e)}return T(e,null,[{key:"buildHeaders",value:function(){return{"Content-Type":"application/json"}}},{key:"handleVerificationResult",value:function(e,t,n,r){var i,a=e;a.error?403===a.error.code||null!=(i=a.error.message)&&i.includes("API key")?r(X.INVALID_KEY):r(X.CONNECTION_FAILED):n(t)}},{key:"buildKeyVerificationDetails",value:function(){return{url:"https://generativelanguage.googleapis.com/v1beta/models?key=",method:"GET",handleVerificationResult:e.handleVerificationResult}}},{key:"directFetch",value:function(){var e=k(y().mark(function e(t,n,r){var i,a,o=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=!(o.length>3&&void 0!==o[3])||o[3],t.connectSettings.method=r,e.next=4,on.fetch(t,t.connectSettings.headers,i,n).then(function(e){return on.processResponseByType(e)});case 4:if(!(a=e.sent).error){e.next=7;break}throw a.error.message;case 7:return e.abrupt("return",a);case 8:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}()}])}(),oi=function(e){function t(e){var n,r,i;x(this,t);var a,o=JSON.parse(JSON.stringify(e.directConnection)),s=o.gemini,l=null==(i=o.gemini)?void 0:i.chat;(r=f(this,t,[e,ai.buildKeyVerificationDetails(),ai.buildHeaders,s])).insertKeyPlaceholderText="Gemini API Key",r.keyHelpUrl="https://aistudio.google.com/app/apikey",r.url="https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent",r.permittedErrorPrefixes=["API_KEY_INVALID"],"object"==w(l)&&(l.systemInstruction&&(a=l.systemInstruction),l.model&&(r.url="https://generativelanguage.googleapis.com/v1beta/models/".concat(l.model,":generateContent")));var u="".concat(r.url,"?key=").concat(null==s?void 0:s.key);return r.url=u,Object.defineProperty(r,"_systemInstruction",{value:a,writable:!1}),"object"==w(l)&&(r.cleanConfig(l),Object.assign(r.rawBody,l)),null!==(n=r.maxMessages)&&void 0!==n||(r.maxMessages=-1),r}return v(t,e),T(t,[{key:"cleanConfig",value:function(e){delete e.systemInstruction,delete e.model}},{key:"preprocessBody",value:function(e,n){var r,i=JSON.parse(JSON.stringify(e)),a=En.getCharacterLimitMessages(n,this.totalMessagesMaxCharLength?this.totalMessagesMaxCharLength-((null==(r=this._systemInstruction)?void 0:r.length)||0):-1).map(function(e){return t.getContent(e)});return i.contents=a,this._systemInstruction&&(i.systemInstruction={parts:[{text:this._systemInstruction}]}),i}},{key:"callServiceAPI",value:function(){var e=k(y().mark(function e(t,n){var r,i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectSettings){e.next=2;break}throw new Error("Request settings have not been set up");case 2:r=this.preprocessBody(this.rawBody,n),(i=this.stream)&&("object"!=w(i)||!i.simulation)||r.stream?(r.stream=!0,mn.request(this,r,t)):kn.request(this,r,t);case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"extractResultData",value:function(){var e=k(y().mark(function e(t){var n,r,i,a,o;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.error){e.next=2;break}throw t.error.message||"Gemini API Error";case 2:return e.abrupt("return",null!=(o=null==(a=null==(i=null==(r=null==(n=t.candidates)?void 0:n[0])?void 0:r.content)?void 0:i.parts)?void 0:a[0])&&o.text?{text:t.candidates[0].content.parts[0].text}:{text:""});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}],[{key:"getContent",value:function(e){var t=[];return e.text&&e.text.trim().length>0&&t.push({text:e.text}),e.files&&e.files.length>0&&e.files.forEach(function(e){if(e.src&&e.src.includes("data:")){var n=l(e.src.split(","),2),r=n[0],i=n[1];t.push({inlineData:{mimeType:r.replace("data:","").replace(";base64",""),data:i}})}}),{parts:t,role:e.role===tn.USER_ROLE?"user":"model"}}}])}(Cn),si=function(){return T(function e(){x(this,e)},null,[{key:"create",value:function(e){var t=e.directConnection,n=e.connect,r=e.demo;if(e.webModel)return new Fn(e);if(t){if(t.openAI)return t.openAI.images?new ti(e):t.openAI.speechToText?new Ur(e):t.openAI.textToSpeech?new Br(e):t.openAI.assistant?new dr(e):t.openAI.realtime?new Nr(e):new Qr(e);if(t.assemblyAI)return new Gr(e);if(t.cohere)return t.cohere.textGeneration?new hr(e):t.cohere.summarization?new br(e):new ni(e);if(t.huggingFace)return t.huggingFace.textGeneration?new Yn(e):t.huggingFace.summarization?new Zn(e):t.huggingFace.translation?new nr(e):t.huggingFace.fillMask?new ir(e):t.huggingFace.questionAnswer?new Qn(e):t.huggingFace.audioSpeechRecognition?new Xn(e):t.huggingFace.audioClassification?new qn(e):t.huggingFace.imageClassification?new Vn(e):new er(e);if(t.azure){if(t.azure.openAI){if(t.azure.openAI.chat)return new Zr(e);if(t.azure.openAI.assistant)return new yr(e)}if(t.azure.speechToText)return new Xr(e);if(t.azure.textToSpeech)return new Jr(e);if(t.azure.summarization)return new qr(e);if(t.azure.translation)return new Yr(e)}if(t.stabilityAI)return t.stabilityAI.imageToImage?new tr(e):t.stabilityAI.imageToImageUpscale?new Jn(e):t.stabilityAI.imageToImageMasking?new $n(e):new rr(e);if(t.mistral)return new ii(e);if(t.gemini)return new oi(e)}return n&&Object.keys(n).length>0&&!r?new xn(e):new xn(e,void 0,r||!0)}}])}(),li=T(function e(){x(this,e)});li.attibutes={string:function(e){return e},number:function(e){return parseFloat(e)},boolean:function(e){return"true"===e},object:function(e){return JSON.parse(e)},array:function(e){return JSON.parse(e)},function:function(e){return new Function("return ".concat(e))()}};var ui=li;function ci(e){return function(t,n){Object.defineProperty(t,n,{});var r=t.constructor,i=n.toLocaleLowerCase();r._attributes_[i]=ui.attibutes[e],r._attributeToProperty_[i]=n}}var di=function(){function e(t,n,r){x(this,e),this._isDisplayed=!1,t?(this._elementRef=this.createIntroPanelWithChild(t,r),this._isDisplayed=!0):n&&(this._elementRef=this.createInternalIntroPanel(n,r),this._isDisplayed=!0)}return T(e,[{key:"createIntroPanelWithChild",value:function(t,n){var r=e.createIntroPanel(n);return"none"===t.style.display&&(t.style.display="block"),r.appendChild(t),r}},{key:"createInternalIntroPanel",value:function(t,n){var r=e.createIntroPanel(n);return r.id="internal-intro-panel",r.innerHTML=t,r}},{key:"hide",value:function(){this._isDisplayed&&this._elementRef&&(this._elementRef.style.display="none",this._isDisplayed=!1)}},{key:"display",value:function(){!this._isDisplayed&&this._elementRef&&(this._elementRef.style.display="",this._isDisplayed=!0)}}],[{key:"createIntroPanel",value:function(e){var t=document.createElement("div");return t.classList.add("intro-panel"),Object.assign(t.style,e),t}}])}(),fi=function(){function e(){x(this,e)}return T(e,null,[{key:"createImage",value:function(e,t,n){var r=new Image;return r.src=e.src,n&&ie.scrollDownOnImageLoad(r.src,t),ie.processContent("image",r,r.src,e.name)}},{key:"createImageMessage",value:function(t,n,r,i){var a=e.createImage(n,t.elementRef,!i&&!t.focusMode),o=t.createNewMessageElement("",r);return o.bubbleElement.appendChild(a),o.bubbleElement.classList.add(e.IMAGE_BUBBLE_CLASS),{type:"image",elements:o}}},{key:"createAudioElement",value:function(e,t){var n=document.createElement("audio");return n.src=e.src,n.classList.add("audio-player"),n.controls=!0,U.IS_SAFARI&&(n.classList.add("audio-player-safari"),n.classList.add(t===tn.USER_ROLE?"audio-player-safari-right":"audio-player-safari-left")),n}},{key:"createNewAudioMessage",value:function(t,n,r,i){var a=e.createAudioElement(n,r),o=t.createMessageElementsOnOrientation("",r,i);return o.bubbleElement.appendChild(a),o.bubbleElement.classList.add(e.AUDIO_BUBBLE_CLASS),{type:"audio",elements:o}}},{key:"createAnyFile",value:function(e){var t=document.createElement("div");t.classList.add("any-file-message-contents");var n=document.createElement("div");n.classList.add("any-file-message-icon-container");var r=Ln.createSVGElement('<?xml version="1.0" encoding="iso-8859-1"?>\n<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" \n\t viewBox="50 30 420 450" xml:space="preserve">\n<g filter="brightness(0) saturate(100%) invert(16%) sepia(0%) saturate(1942%) hue-rotate(215deg) brightness(99%) contrast(93%)">\n\t<g>\n\t\t<path d="M447.933,103.629c-0.034-3.076-1.224-6.09-3.485-8.352L352.683,3.511c-0.004-0.004-0.007-0.005-0.011-0.008\n\t\t\tC350.505,1.338,347.511,0,344.206,0H89.278C75.361,0,64.04,11.32,64.04,25.237v461.525c0,13.916,11.32,25.237,25.237,25.237\n\t\t\th333.444c13.916,0,25.237-11.32,25.237-25.237V103.753C447.96,103.709,447.937,103.672,447.933,103.629z M356.194,40.931\n\t\t\tl50.834,50.834h-49.572c-0.695,0-1.262-0.567-1.262-1.262V40.931z M423.983,486.763c0,0.695-0.566,1.261-1.261,1.261H89.278\n\t\t\tc-0.695,0-1.261-0.566-1.261-1.261V25.237c0-0.695,0.566-1.261,1.261-1.261h242.94v66.527c0,13.916,11.322,25.239,25.239,25.239\n\t\t\th66.527V486.763z"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d="M362.088,164.014H149.912c-6.62,0-11.988,5.367-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175\n\t\t\tc6.62,0,11.988-5.368,11.988-11.988C374.076,169.381,368.707,164.014,362.088,164.014z"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d="M362.088,236.353H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.62,5.368,11.988,11.988,11.988h212.175\n\t\t\tc6.62,0,11.988-5.368,11.988-11.988C374.076,241.721,368.707,236.353,362.088,236.353z"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d="M362.088,308.691H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988h212.175\n\t\t\tc6.62,0,11.988-5.367,11.988-11.988C374.076,314.06,368.707,308.691,362.088,308.691z"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path d="M256,381.031H149.912c-6.62,0-11.988,5.368-11.988,11.988c0,6.621,5.368,11.988,11.988,11.988H256\n\t\t\tc6.62,0,11.988-5.367,11.988-11.988C267.988,386.398,262.62,381.031,256,381.031z"/>\n\t</g>\n</g>\n</svg>');r.classList.add("any-file-message-icon"),n.appendChild(r);var i=document.createElement("div");return i.classList.add("any-file-message-text"),i.textContent=e.name||ie.DEFAULT_FILE_NAME,t.appendChild(n),t.appendChild(i),ie.processContent("any",t,e.src,i.textContent)}},{key:"createNewAnyFileMessage",value:function(t,n,r,i){var a=t.createMessageElementsOnOrientation("",r,i),o=e.createAnyFile(n);return a.bubbleElement.classList.add(e.ANY_FILE_BUBBLE_CLASS),a.bubbleElement.appendChild(o),{type:"file",elements:a}}},{key:"createMessages",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return n.map(function(n){return n.ref&&(n=ie.removeFileRef(n)),ie.isAudioFile(n)?e.createNewAudioMessage(t,n,r,i):ie.isImageFile(n)?e.createImageMessage(t,n,r,i):e.createNewAnyFileMessage(t,n,r,i)})}},{key:"addMessages",value:function(t,n,r,i){e.createMessages(t,n,r,i).forEach(function(e){var n=e.type,a=e.elements;ie.addMessage(t,a,n,r,i)})}}])}();fi.IMAGE_BUBBLE_CLASS="image-message",fi.AUDIO_BUBBLE_CLASS="audio-message",fi.ANY_FILE_BUBBLE_CLASS="any-file-message";var pi=fi,hi=function(){function e(){x(this,e)}return T(e,null,[{key:"removeElements",value:function(e,t){if(t){var n=e.findIndex(function(e){return e===t});e.splice(n,1),null==t||t.outerContainer.remove()}}},{key:"removeFilesMessages",value:function(t,n){var r;null==(r=n[1].files)||r.forEach(function(n){e.removeElements(t.messageElementRefs,n)}),delete n[0].files,delete n[1].files}},{key:"removeTextHTMLMessage",value:function(t,n,r){var i=n[1][r];e.removeElements(t.messageElementRefs,i),delete n[0][r],delete n[1][r]}},{key:"updateHTMLMessage",value:function(e,t,n){var r,i,a;if(t[1].html)pe.overwriteElements(e,n,t[1].html);else{var o=pe.create(e,n,t[0].role),s=(null==(i=t[1].files)?void 0:i[(null==(r=t[1].files)?void 0:r.length)-1])||t[1].text,l=s.outerContainer.nextSibling;null==(a=null==l?void 0:l.parentElement)||a.insertBefore(o.outerContainer,l),e.messageElementRefs.splice(e.messageElementRefs.length-1,1);var u=e.messageElementRefs.findIndex(function(e){return e===s});e.messageElementRefs.splice(u+1,0,o),t[1].html=o}t[0].html=n}},{key:"updateFileMessages",value:function(t,n,r){var i,a,o=n[0].role,s=pi.createMessages(t,r,o),l=n[1].html,u=(null==(a=n[1].files)?void 0:a[(null==(i=n[1].files)?void 0:i.length)-1])||n[1].text,c=l||u,d=t.messageElementRefs.findIndex(function(e){return e===c});u&&(d+=1);var f=(null==l?void 0:l.outerContainer)||(null==u?void 0:u.outerContainer.nextSibling);s.forEach(function(e,n){var r,i=e.type,a=e.elements;ie.setElementProps(t,a,i,o),null==(r=f.parentElement)||r.insertBefore(a.outerContainer,f),t.messageElementRefs.splice(t.messageElementRefs.length-1,1),t.messageElementRefs.splice(d+n,0,a)}),e.removeFilesMessages(t,n),n[1].files=s.map(function(e){return e.elements}),n[0].files=r}},{key:"updateTextMessage",value:function(e,t,n){var r,i;if(t[1].text)e.renderText(t[1].text.bubbleElement,n);else{var a=e.createElements(n,t[0].role),o=(null==(r=t[1].files)?void 0:r[0])||t[1].html;null==(i=o.outerContainer.parentElement)||i.insertBefore(a.outerContainer,o.outerContainer);var s=e.messageElementRefs.findIndex(function(e){return e===o});e.messageElementRefs.splice(s,0,a),t[1].text=a}t[0].text=n}},{key:"isElementActive",value:function(e){var t,n;return vi.isActiveElement(null==(t=e.text)?void 0:t.bubbleElement.classList)||vi.isActiveElement(null==(n=e.html)?void 0:n.bubbleElement.classList)}},{key:"update",value:function(t,n,r){var i=t.messageToElements[r];if(i){if(e.isElementActive(i[1]))return console.error("Cannot update a message that is being streamed");n.text&&e.updateTextMessage(t,i,n.text),n.files?e.updateFileMessages(t,i,n.files):e.removeFilesMessages(t,i),n.html&&e.updateHTMLMessage(t,i,n.html),!n.text&&i[1].text&&e.removeTextHTMLMessage(t,i,"text"),!n.html&&i[1].html&&e.removeTextHTMLMessage(t,i,"html");var a=t.messageElementRefs,o=t.avatar,s=t.name;tn.classifyRoleMessages(a),tn.resetAllRoleElements(a,o,s)}else console.error("Message index not found. Please use the `getMessages` method to find the correct index")}}])}(),mi=function(){return T(function e(){x(this,e)},null,[{key:"getText",value:function(e,t){var n;if(!e.directConnection&&!e.connect&&!e.webModel&&!e.demo)return"Connect to any API using the [connect](https://deepchat.dev/docs/connect#connect-1) property or a popular service via [directConnection](https://deepchat.dev/docs/directConnection/#directConnection).\n Host AI entirely on your browser via a [webModel](https://deepchat.dev/docs/webModel).\n To get started checkout the [Start](https://deepchat.dev/start) page and live code [examples](https://deepchat.dev/examples/frameworks).\n To remove this message set the [demo](https://deepchat.dev/docs/modes#demo) property to true.";if(e.directConnection){if(!t.isDirectConnection())return"Please define a valid service inside\n          the [directConnection](https://deepchat.dev/docs/directConnection/#directConnection) object.";var r=null==(n=e.directConnection.openAI)?void 0:n.chat;if("object"==w(r)&&r.tools&&!r.function_handler)return"Please define the `function_handler` property inside the openAI [chat](https://deepchat.dev/docs/directConnection/openAI#Chat) object."}else if(e.connect&&!e.connect.url&&!e.connect.handler)return"Please define a `url` or a `handler` property inside the [connect](https://deepchat.dev/docs/connect#connect-1) object.";return null}}])}(),vi=function(e){function t(e,n,r){var i,a,o;x(this,t),i=f(this,t,[e]);var s=n.permittedErrorPrefixes,u=n.introPanelMarkUp,c=n.demo;return i._errorMessageOverrides=null==(a=e.errorMessages)?void 0:a.overrides,i._onClearMessages=Ht.onClearMessages.bind(i,e),i._onError=Ht.onError.bind(i,e),i._isLoadingMessageAllowed=t.getDefaultDisplayLoadingMessage(e,n),"object"==w(e.displayLoadingBubble)&&e.displayLoadingBubble.toggle&&(e.displayLoadingBubble.toggle=i.setLoadingToggle.bind(i)),i._permittedErrorPrefixes=s,i.addSetupMessageIfNeeded(e,n)||i.populateIntroPanel(r,u,e.introPanelStyle),c&&i.prepareDemo(ae.processDemo(c),e.loadHistory),i.addIntroductoryMessages(e,n),new _n(e,i,n),i._displayServiceErrorMessages=null==(o=e.errorMessages)?void 0:o.displayServiceErrorMessages,e.getMessages=function(){return tn.deepCloneMessagesWithReferences(i.messageToElements.map(function(e){return l(e,1)[0]}))},e.clearMessages=i.clearMessages.bind(i,n),e.refreshMessages=i.refreshTextMessages.bind(i,e.remarkable),e.scrollToBottom=Q.scrollToBottom.bind(i,i.elementRef),e.addMessage=function(e,t){i.addAnyMessage(_(_({},e),{},{sendUpdate:!!t}),!t)},e.updateMessage=function(e,t){return hi.update(i,e,t)},n.isWebModel()&&n.setUpMessages(i),e.textToSpeech&&ee.processConfig(e.textToSpeech,function(e){i.textToSpeech=e}),i}return v(t,e),T(t,[{key:"setLoadingToggle",value:function(){var e=this.messageElementRefs[this.messageElementRefs.length-1];Zt.isLoadingMessage(e)?this.removeLastMessage():this.addLoadingMessage(!0)}},{key:"prepareDemo",value:function(e,t){var n;if("object"==w(e)){if(!t&&e.displayLoading){var r=e.displayLoading.history;null!=r&&r.small&&Vt.addMessage(this,!1),null!=r&&r.full&&Vt.addMessage(this)}e.displayErrors&&(e.displayErrors.default&&this.addNewErrorMessage("",""),e.displayErrors.service&&this.addNewErrorMessage("service",""),e.displayErrors.speechToText&&this.addNewErrorMessage("speechToText","")),null!=(n=e.displayLoading)&&n.message&&this.addLoadingMessage(),e.response&&(this.customDemoResponse=e.response)}}},{key:"addSetupMessageIfNeeded",value:function(e,t){var n=mi.getText(e,t);if(n){var r=this.createAndAppendNewMessageElement(n,tn.AI_ROLE);this.applyCustomStyles(r,tn.AI_ROLE,!1)}return!!n}},{key:"addIntroductoryMessages",value:function(e,t){var n=this;null!=e&&e.shadowRoot&&(this._introMessage=e.introMessage);var r=this._introMessage;null!=t&&t.isWebModel()&&(null!==r&&void 0!==r||(r=t.getIntroMessage(r)));var i=!(null!=e&&e.history)&&!!(null!=e&&e.loadHistory||null!=t&&t.fetchHistory);r&&(Array.isArray(r)?r.forEach(function(e,t){if(0!==t){var r=n.messageElementRefs[n.messageElementRefs.length-1].innerContainer;tn.hideRoleElements(r,n.avatar,n.name)}n.addIntroductoryMessage(e,i)}):this.addIntroductoryMessage(r,i))}},{key:"addIntroductoryMessage",value:function(e,t){var n,r;return null!=e&&e.text?r=this.createAndAppendNewMessageElement(e.text,tn.AI_ROLE):null!=e&&e.html&&(r=pe.add(this,e.html,tn.AI_ROLE)),r&&(this.applyCustomStyles(r,tn.AI_ROLE,!1,null==(n=this.messageStyles)?void 0:n.intro),r.outerContainer.classList.add(Zt.INTRO_CLASS),t&&(r.outerContainer.style.display="none")),r}},{key:"removeIntroductoryMessage",value:function(){var e=this.messageElementRefs[0];e.outerContainer.classList.contains(Zt.INTRO_CLASS)&&(e.outerContainer.remove(),this.messageElementRefs.shift())}},{key:"addAnyMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.error?this.addNewErrorMessage("service",e.error,n):this.addNewMessage(e,t,n)}},{key:"tryAddTextMessage",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];!n.ignoreText&&void 0!==e.text&&null!==n.text&&(this.addNewTextMessage(e.text,e.role,t,i),!r&&this.textToSpeech&&e.role!==tn.USER_ROLE&&ee.speak(e.text,this.textToSpeech))}},{key:"tryAddFileMessages",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.files&&Array.isArray(e.files)&&pi.addMessages(this,e.files,e.role,t)}},{key:"tryAddHTMLMessage",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==e.html&&null!==e.html){var r=pe.add(this,e.html,e.role,t,n);!n&&ue.isElementTemporary(r)&&delete e.html}}},{key:"addNewMessage",value:function(e){var n,r,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.role!==tn.USER_ROLE&&(null==(n=this._hiddenAttachments)||n.removeHiddenFiles());var o=t.createMessageContent(e),s={status:e.overwrite};return a?(this.tryAddHTMLMessage(o,s,a),this.tryAddFileMessages(o,a),this.tryAddTextMessage(o,s,e,i,a)):(this.tryAddTextMessage(o,s,e,i,a),this.tryAddFileMessages(o,a),this.tryAddHTMLMessage(o,s,a)),this.isValidMessageContent(o)&&!a&&(this.updateStateOnMessage(o,e.overwrite,e.sendUpdate,i),i||null==(r=this.browserStorage)||r.addMessages(this.messageToElements.map(function(e){return l(e,1)[0]}))),o}},{key:"isValidMessageContent",value:function(e){return e.text||e.html||e.files&&e.files.length>0}},{key:"updateStateOnMessage",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t){var i=tn.generateMessageBody(e,this.messageElementRefs);this.messageToElements.push([e,i])}n&&this.sendClientUpdate(e,r)}},{key:"removeMessageOnError",value:function(){var e=this.messageElementRefs[this.messageElementRefs.length-1],n=null==e?void 0:e.bubbleElement;(null!=n&&n.classList.contains(rn.MESSAGE_CLASS)&&""===n.textContent||t.isTemporaryElement(e))&&this.removeLastMessage()}},{key:"addNewErrorMessage",value:function(e,t){var n,r,i,a,o,s,l=this,u=arguments.length>2&&void 0!==arguments[2]&&arguments[2];null==(n=this._hiddenAttachments)||n.readdHiddenFiles(),this.removeMessageOnError();var c=this.getPermittedMessage(t)||(null==(r=this._errorMessageOverrides)?void 0:r[e])||(null==(i=this._errorMessageOverrides)?void 0:i.default)||"Error, please try again.",d=this.createMessageElementsOnOrientation(c,"error",u);tn.hideRoleElements(d.innerContainer,this.avatar,this.name);var f=d.bubbleElement,p=d.outerContainer;f.classList.add(tn.ERROR_MESSAGE_TEXT_CLASS),this.renderText(f,c);var h=zt.extractParticularSharedStyles(["fontSize","fontFamily"],null==(a=this.messageStyles)?void 0:a.default);zt.applyCustomStylesToElements(d,!1,h),zt.applyCustomStylesToElements(d,!1,null==(o=this.messageStyles)?void 0:o.error),u||this.appendOuterContainerElemet(p),this.textToSpeech&&ee.speak(c,this.textToSpeech),null==(s=this._onError)||s.call(this,c),setTimeout(function(){return Q.scrollToBottom(l.elementRef)})}},{key:"getPermittedMessage",value:function(e){if(e)for(var n=t.extractErrorMessages(e),r=0;r<n.length;r+=1){var i=n[r];if("string"==typeof i){if(this._displayServiceErrorMessages)return i;if(this._permittedErrorPrefixes){var a=t.checkPermittedErrorPrefixes(this._permittedErrorPrefixes,i);if(a)return a}}}}},{key:"removeError",value:function(){this.isLastMessageError()&&tn.getLastMessageElement(this.elementRef).remove()}},{key:"addDefaultLoadingMessage",value:function(){var e=this.createMessageElements("",tn.AI_ROLE),t=e.bubbleElement;e.bubbleElement.classList.add(ne.DOTS_CONTAINER_CLASS);var n=document.createElement("div");return n.classList.add("loading-message-dots"),t.appendChild(n),ne.setDots(t,this.messageStyles),e}},{key:"addLoadingMessage",value:function(){var e,t,n,r,i,a,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=this.messageElementRefs[this.messageElementRefs.length-1];if(!Zt.isLoadingMessage(s)&&(o||this._isLoadingMessageAllowed)){var l=null==(n=null==(t=null==(e=this.messageStyles)?void 0:e.loading)?void 0:t.message)?void 0:n.html,u=l?pe.createElements(this,l,tn.AI_ROLE,!1):this.addDefaultLoadingMessage();this.appendOuterContainerElemet(u.outerContainer),u.bubbleElement.classList.add(ne.BUBBLE_CLASS),this.applyCustomStyles(u,tn.AI_ROLE,!1,null==(a=null==(i=null==(r=this.messageStyles)?void 0:r.loading)?void 0:i.message)?void 0:a.styles),this.focusMode||Q.scrollToBottom(this.elementRef)}}},{key:"populateIntroPanel",value:function(e,t,n){(e||t)&&(this._introPanel=new di(e,t,n),this._introPanel._elementRef&&(ce.apply(this,this._introPanel._elementRef),this.elementRef.appendChild(this._introPanel._elementRef)))}},{key:"addMultipleFiles",value:function(){var e=k(y().mark(function e(t,n){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(this._hiddenAttachments=n,Promise.all((t||[]).map(function(e){return new Promise(function(t){if(e.type&&"any"!==e.type){var n=new FileReader;n.readAsDataURL(e.file),n.onload=function(){t({src:n.result,type:e.type,ref:e.file})}}else{var r=e.file.name||ie.DEFAULT_FILE_NAME;t({name:r,type:"any",ref:e.file})}})}))));case 1:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"clearMessages",value:function(e,n){var r,i,a,o,s=[];this.messageElementRefs.forEach(function(e){t.isActiveElement(e.bubbleElement.classList)?s.push(e):e.outerContainer.remove()}),Array.from(this.elementRef.children).forEach(function(e){var t,n=null==(t=e.children[0])?void 0:t.children[0];null!=n&&n.classList.contains(tn.ERROR_MESSAGE_TEXT_CLASS)&&e.remove()}),this.messageElementRefs=s;var l=this.messageToElements.filter(function(e){return e[1].text&&t.isActiveElement(e[1].text.bubbleElement.classList)||e[1].html&&t.isActiveElement(e[1].html.bubbleElement.classList)});(r=this.messageToElements).splice.apply(r,[0,this.messageToElements.length].concat(u(l))),!1!==n&&(null!=(i=this._introPanel)&&i._elementRef&&this._introPanel.display(),this.addIntroductoryMessages()),null==(a=this.browserStorage)||a.clear(),null==(o=this._onClearMessages)||o.call(this),delete e.sessionId}}],[{key:"getDefaultDisplayLoadingMessage",value:function(e,t){var n;return t.websocket?!!e.displayLoadingBubble:null===(n="object"==w(e.displayLoadingBubble)||e.displayLoadingBubble)||void 0===n||n}},{key:"checkPermittedErrorPrefixes",value:function(e,t){for(var n=0;n<e.length;n+=1)if(t.startsWith(e[n]))return t}},{key:"extractErrorMessages",value:function(e){return Array.isArray(e)?e:e instanceof Error?[e.message]:"string"==typeof e?[e]:"object"==w(e)&&e.error?[e.error]:[]}},{key:"isActiveElement",value:function(e){return!!e&&(e.contains(ne.BUBBLE_CLASS)||e.contains(Vt.CLASS)||e.contains(rn.MESSAGE_CLASS))}}])}(Zt),gi=function(){function e(){x(this,e)}return T(e,null,[{key:"adjustInputPadding",value:function(e,t){t["inside-left"].length>0&&e.classList.add("text-input-inner-left-adjustment"),t["inside-right"].length>0&&e.classList.add("text-input-inner-right-adjustment")}},{key:"adjustForOutsideButton",value:function(t,n,r){0===r["outside-right"].length&&r["outside-left"].length>0?(t[0].classList.add(e.INPUT_OUTSIDE_LEFT_SMALL_ADJUSTMENT_CLASS),n.classList.add(e.INPUT_OUTSIDE_LEFT_SMALL_ADJUSTMENT_CLASS)):0===r["outside-left"].length&&r["outside-right"].length>0&&(t[3].classList.add(e.INPUT_OUTSIDE_RIGHT_SMALL_ADJUSTMENT_CLASS),n.classList.add(e.INPUT_OUTSIDE_RIGHT_SMALL_ADJUSTMENT_CLASS))}},{key:"adjustOutsideSubmit",value:function(t,n,r){if(!(r["inside-left"].length>0||r["inside-right"].length>0)){if(0===r["outside-right"].length&&r["outside-left"].length>0)return t[0].classList.add(e.INPUT_OUTSIDE_LEFT_ADJUSTMENT_CLASS),n.classList.add(e.INPUT_OUTSIDE_LEFT_ADJUSTMENT_CLASS),r["outside-left"].map(function(e){return e.button.elementRef.classList.add("submit-button-enlarged")});if(0===r["outside-left"].length&&r["outside-right"].length>0)return t[3].classList.add(e.INPUT_OUTSIDE_RIGHT_ADJUSTMENT_CLASS),n.classList.add(e.INPUT_OUTSIDE_RIGHT_ADJUSTMENT_CLASS),r["outside-right"].map(function(e){return e.button.elementRef.classList.add("submit-button-enlarged")})}}},{key:"set",value:function(t,n,r,i){!!e.adjustOutsideSubmit(n,r,i)||e.adjustForOutsideButton(n,r,i),e.adjustInputPadding(t,i)}}])}();gi.INPUT_OUTSIDE_LEFT_ADJUSTMENT_CLASS="text-input-container-left-adjustment",gi.INPUT_OUTSIDE_RIGHT_ADJUSTMENT_CLASS="text-input-container-right-adjustment",gi.INPUT_OUTSIDE_LEFT_SMALL_ADJUSTMENT_CLASS="text-input-container-left-small-adjustment",gi.INPUT_OUTSIDE_RIGHT_SMALL_ADJUSTMENT_CLASS="text-input-container-right-small-adjustment";var yi=gi,bi=function(){function e(){x(this,e)}return T(e,null,[{key:"create",value:function(){return Array.from({length:4}).map(function(e,t){var n=document.createElement("div");return n.classList.add("input-button-container"),(0===t||3===t)&&n.classList.add("outer-button-container"),(1===t||2===t)&&n.classList.add("inner-button-container"),n})}},{key:"add",value:function(e,t){e.insertBefore(t[1],e.firstChild),e.insertBefore(t[0],e.firstChild),e.appendChild(t[2]),e.appendChild(t[3])}},{key:"getContainerIndex",value:function(e){return"outside-left"===e?0:"inside-left"===e?1:"inside-right"===e?2:3}},{key:"addButton",value:function(t,n,r){n.classList.add(r);var i=e.getContainerIndex(r);t[i].appendChild(n),3===i&&n.classList.add("outside-right")}}])}(),ki=["camera","gifs","images","audio","mixedFiles","submit","microphone"],Si=function(){function e(){x(this,e)}return T(e,null,[{key:"addItemEvents",value:function(e,t,n,r){oe.add(t,r),t.addEventListener("click",function(){n.click()}),t.addEventListener("mouseenter",function(t){e.highlightedItem=t.target}),t.addEventListener("mouseleave",function(){e.highlightedItem=void 0})}},{key:"createItemText",value:function(t,n){var r=document.createElement("div");return Object.assign(r.style,n),r.classList.add(e.TEXT_CLASS),r.textContent=t||"File",r}},{key:"createItemIcon",value:function(t,n){var r=document.createElement("div");return Object.assign(r.style,n),r.classList.add(e.ICON_CLASS),r.appendChild(t),r}},{key:"populateItem",value:function(t,n,r){var i=t.elementRef,a=t.dropupText,o=t.svg,s=t.customStyles,l=i.children[0],u=s&&Object.values(s).find(function(e){var t;return""===(null==(t=e.svg)?void 0:t.content)});l.classList.contains(Er.INPUT_BUTTON_INNER_TEXT_CLASS)?(u||n.appendChild(e.createItemIcon(o,null==r?void 0:r.iconContainer)),n.appendChild(e.createItemText(l.textContent,null==r?void 0:r.text))):(u||n.appendChild(e.createItemIcon(i.children[0],null==r?void 0:r.iconContainer)),n.appendChild(e.createItemText(a,null==r?void 0:r.text)))}},{key:"createItem",value:function(t,n,r){var i,a=document.createElement("div");Object.assign(a.style,null==(i=null==r?void 0:r.item)?void 0:i.default),e.populateItem(n,a,r),a.classList.add(e.MENU_ITEM_CLASS);var o=n.elementRef;if(n.isCustom)n.setDropupItem(a);else{var s=R.processStateful((null==r?void 0:r.item)||{});e.addItemEvents(t,a,o,s)}return a}}])}();Si.MENU_ITEM_CLASS="dropup-menu-item",Si.TEXT_CLASS="dropup-menu-item-text",Si.ICON_CLASS="dropup-menu-item-icon";var _i=Si,Ei=function(e){function t(e,n,r,i){var a,o,s,l,u,c,d;x(this,t);var p=(null==(u=null==(l=null==(s=null==(o=null==e?void 0:e.styles)?void 0:o.button)?void 0:s.default)?void 0:l.text)?void 0:u.content)||"Custom ".concat(n),h=B.tryCreateConfig("Custom ".concat(n),null==e?void 0:e.tooltip);return(a=f(this,t,[t.createButtonElement(),'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" fill="none">\n  <rect x="2.5" y="2.5" width="17" height="17" rx="2" stroke="#000000" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>\n',null==e?void 0:e.position,h,(null==(c=null==e?void 0:e.styles)?void 0:c.button)||h&&{},p]))._state="default",a.isCustom=!0,a._innerElements=a.createInnerElementsForStates(a.customStyles),a._menuStyles=i,a._onClick=e.onClick,a._dropupStyles=null==(d=e.styles)?void 0:d.dropup,a.setSetState(e),a.addClickListener(r),a.changeState(e.initialState,!0),a}return v(t,e),T(t,[{key:"createInnerElementsForStates",value:function(e){var t="custom-icon",n=this.createInnerElements(t,"default",e);return{default:n,active:this.genStateInnerElements(t,"active",n,e),disabled:this.genStateInnerElements(t,"disabled",n,e)}}},{key:"setSetState",value:function(e){var t=this;e.setState=function(e){"default"===e&&t.changeToDefault(),"active"===e&&t.changeToActive(),"disabled"===e&&t.changeToDisabled()}}},{key:"addClickListener",value:function(e){var t=this;this.elementRef.addEventListener("click",function(){var n,r=null==(n=t._onClick)?void 0:n.call(t,t._state);null==e||e(),("default"===r||"active"===r||"disabled"===r)&&t.changeState(r)})}},{key:"changeState",value:function(e,t){"disabled"===e?this.changeToDisabled(t):"active"===e?this.changeToActive(t):this.changeToDefault(t)}},{key:"applyDropupContentStyles",value:function(e){var t=Array.from(this.elementRef.children);if(null!=e&&e.text){var n=t.find(function(e){return e.classList.contains(_i.TEXT_CLASS)});n&&Object.assign(n.style,e.text)}if(null!=e&&e.iconContainer){var r=t.find(function(e){return e.classList.contains(_i.ICON_CLASS)});r&&Object.assign(r.style,e.iconContainer)}}},{key:"resetDropupItem",value:function(e){var t,n,r;this.elementRef=ce.replaceElementWithNewClone(this.elementRef,this._originalElementRef),this.elementRef.innerHTML="",""===(null==(t=null==e?void 0:e.svg)?void 0:t.content)||this.elementRef.appendChild(_i.createItemIcon(this.svg,null==(n=this._menuStyles)?void 0:n.iconContainer)),this.elementRef.appendChild(_i.createItemText(this.dropupText,null==(r=this._menuStyles)?void 0:r.text))}},{key:"assignDropupItemStyle",value:function(e,t){var n;this.elementRef.parentElement&&this._originalElementRef&&this.resetDropupItem(t),this.applyDropupContentStyles(e),Object.assign(this.elementRef.style,null==(n=null==e?void 0:e.item)?void 0:n.default);var r=R.processStateful((null==e?void 0:e.item)||{});oe.add(this.elementRef,r),this.addClickListener()}},{key:"changeToDefault",value:function(e){var n,r,i,a,o,s;!e&&"default"===this._state||(this.elementRef.classList.contains(_i.MENU_ITEM_CLASS)?this.assignDropupItemStyle(null==(n=this._dropupStyles)?void 0:n.default,null==(r=this.customStyles)?void 0:r.default):(this.changeElementsByState(this._innerElements.default),null!=(i=this.customStyles)&&i.active&&xr.unsetAllCSS(this.elementRef,null==(a=this.customStyles)?void 0:a.active),null!=(o=this.customStyles)&&o.disabled&&xr.unsetAllCSS(this.elementRef,null==(s=this.customStyles)?void 0:s.disabled),this.reapplyStateStyle("default",["active","disabled"])),this.elementRef.classList.remove(t.DISABLED_CONTAINER_CLASS,t.ACTIVE_CONTAINER_CLASS),this.elementRef.classList.add(t.DEFAULT_CONTAINER_CLASS),kr.removeAriaDisabled(this.elementRef),this._state="default")}},{key:"changeToActive",value:function(e){var n,r;!e&&"active"===this._state||(this.elementRef.classList.contains(_i.MENU_ITEM_CLASS)?this.assignDropupItemStyle(null==(n=this._dropupStyles)?void 0:n.active,null==(r=this.customStyles)?void 0:r.active):(this.changeElementsByState(this._innerElements.active),this.reapplyStateStyle("active",["disabled","default"])),this.elementRef.classList.remove(t.DISABLED_CONTAINER_CLASS,t.DEFAULT_CONTAINER_CLASS),this.elementRef.classList.add(t.ACTIVE_CONTAINER_CLASS),kr.removeAriaDisabled(this.elementRef),this._state="active")}},{key:"changeToDisabled",value:function(e){var n,r,i,a,o,s;!e&&"disabled"===this._state||(this.elementRef.classList.contains(_i.MENU_ITEM_CLASS)?this.assignDropupItemStyle(null==(n=this._dropupStyles)?void 0:n.disabled,null==(r=this.customStyles)?void 0:r.disabled):(this.changeElementsByState(this._innerElements.disabled),null!=(i=this.customStyles)&&i.active&&xr.unsetAllCSS(this.elementRef,null==(a=this.customStyles)?void 0:a.active),null!=(o=this.customStyles)&&o.default&&xr.unsetAllCSS(this.elementRef,null==(s=this.customStyles)?void 0:s.default),this.reapplyStateStyle("disabled",["default","active"])),this.elementRef.classList.remove(t.ACTIVE_CONTAINER_CLASS,t.DEFAULT_CONTAINER_CLASS),this.elementRef.classList.add(t.DISABLED_CONTAINER_CLASS),kr.addAriaDisabled(this.elementRef),this._state="disabled")}},{key:"setDropupItem",value:function(e){this.elementRef=e,this._originalElementRef=e.cloneNode(!0),this.changeState(this._state,!0)}},{key:"genStateInnerElements",value:function(e,n,r,i){var a,o,s,l,u=this.createInnerElements(e,n,i),c=null==(o=null==(a=null==i?void 0:i[n])?void 0:a.svg)?void 0:o.content,d=null==(l=null==(s=null==i?void 0:i[n])?void 0:s.text)?void 0:l.content;if(void 0===c||void 0===d){var f=wr.parseSVGTextElements(r),p=f.svg,h=f.text,m=wr.parseSVGTextElements(u),v=m.svg,g=m.text,y=[];t.addToInnerElements(y,c,p,v),t.addToInnerElements(y,d,h,g),u=y}return u}}],[{key:"createButtonElement",value:function(){var e=document.createElement("div");return e.classList.add("input-button",t.BUTTON_CLASS),e}},{key:"addToInnerElements",value:function(e,t,n,r){void 0===t&&n?e.push(n.cloneNode(!0)):r&&e.push(r)}},{key:"add",value:function(e,n){var r=e.customButtons,i=e.focusInput,a=e.dropupStyles;null==r||r.forEach(function(e,r){var o={button:new t(e,r+1,i,null==a?void 0:a.menu)};n["".concat(t.INDICATOR_PREFIX).concat(r+1)]=o})}}])}(Cr);Ei.INDICATOR_PREFIX="custom",Ei.BUTTON_CLASS="custom-button",Ei.DISABLED_CONTAINER_CLASS="custom-button-container-disabled",Ei.DEFAULT_CONTAINER_CLASS="custom-button-container-default",Ei.ACTIVE_CONTAINER_CLASS="custom-button-container-active";var wi=Ei,xi=function(){function e(){x(this,e)}return T(e,null,[{key:"focusItemWhenOnEdge",value:function(t,n){var r=n?t.children[0]:t.children[t.children.length-1];e.focusSiblingItem(r,t,n,!0)}},{key:"focusSiblingItem",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3]?t:t[r?"nextSibling":"previousSibling"];i?(t.dispatchEvent(new MouseEvent("mouseleave")),i.dispatchEvent(new MouseEvent("mouseenter"))):(t.dispatchEvent(new MouseEvent("mouseleave")),e.focusItemWhenOnEdge(n,r))}}])}(),Ci=function(){return T(function e(t,n){var r,i=this;x(this,e),this._isOpen=!0,this._styles=n,this.elementRef=e.createElement(null==(r=this._styles)?void 0:r.container),this.close(),setTimeout(function(){return i.addWindowEvents(t)})},[{key:"open",value:function(){this.elementRef.style.display="block",this._isOpen=!0}},{key:"close",value:function(){this._isOpen&&(this.elementRef.style.display="none",this._isOpen=!1)}},{key:"toggle",value:function(){this._isOpen?this.close():this.open()}},{key:"addItem",value:function(e){var t=_i.createItem(this,e,this._styles);this.elementRef.appendChild(t)}},{key:"addWindowEvents",value:function(e){this.clickEvent=this.windowClick.bind(this,e),window.addEventListener("click",this.clickEvent),this.keyDownEvent=this.windowKeyDown.bind(this,e),window.addEventListener("keydown",this.keyDownEvent)}},{key:"windowClick",value:function(e,t){var n;!e.isConnected&&this.clickEvent?window.removeEventListener("click",this.clickEvent):e.parentElement!==(null==(n=t.target.shadowRoot)?void 0:n.children[0])&&this.close()}},{key:"windowKeyDown",value:function(e,t){var n,r,i;!e.isConnected&&this.keyDownEvent?window.removeEventListener("keydown",this.keyDownEvent):this._isOpen&&(t.key===j.ESCAPE?(this.close(),null==(n=this.highlightedItem)||n.dispatchEvent(new MouseEvent("mouseleave"))):t.key===j.ENTER?(null==(r=this.highlightedItem)||r.click(),null==(i=this.highlightedItem)||i.dispatchEvent(new MouseEvent("mouseleave"))):t.key===j.ARROW_DOWN?xi.focusSiblingItem(this.highlightedItem||this.elementRef.children[this.elementRef.children.length-1],this.elementRef,!0):t.key===j.ARROW_UP&&xi.focusSiblingItem(this.highlightedItem||this.elementRef.children[0],this.elementRef,!1))}}],[{key:"createElement",value:function(e){var t=document.createElement("div");return t.id="dropup-menu",Object.assign(t.style,e),t}}])}(),Ti=function(e){function t(e,n){var r,i,a;x(this,t);var o=B.tryCreateConfig("Options",null==(i=null==n?void 0:n.button)?void 0:i.tooltip),s=(r=f(this,t,[t.createButtonElement(),'<?xml version="1.0" encoding="utf-8"?>\n<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">\n    <path d="M16 0c-8.836 0-16 7.163-16 16s7.163 16 16 16c8.837 0 16-7.163 16-16s-7.163-16-16-16zM16 30.032c-7.72 0-14-6.312-14-14.032s6.28-14 14-14 14 6.28 14 14-6.28 14.032-14 14.032zM23 15h-6v-6c0-0.552-0.448-1-1-1s-1 0.448-1 1v6h-6c-0.552 0-1 0.448-1 1s0.448 1 1 1h6v6c0 0.552 0.448 1 1 1s1-0.448 1-1v-6h6c0.552 0 1-0.448 1-1s-0.448-1-1-1z"></path>\n</svg>',void 0,o,{styles:null==(a=null==n?void 0:n.button)?void 0:a.styles}])).createInnerElementsForStates(r.customStyles);return r._menu=new Ci(e,null==n?void 0:n.menu),r.addClickEvent(),r.buttonContainer=t.createButtonContainer(),r.changeElementsByState(s.styles),r.buttonContainer.appendChild(r.elementRef),r.elementRef.classList.add(t.BUTTON_ICON_CLASS),r.buttonContainer.appendChild(r._menu.elementRef),r.reapplyStateStyle("styles"),r.addContainerEvents(e),r}return v(t,e),T(t,[{key:"createInnerElementsForStates",value:function(e){return{styles:this.createInnerElements("dropup-icon","styles",e)}}},{key:"addClickEvent",value:function(){this.elementRef.onclick=this._menu.toggle.bind(this._menu)}},{key:"addItem",value:function(e){this._menu.addItem(e)}},{key:"addContainerEvents",value:function(e){var n=this;e.addEventListener("click",function(e){var r=e.target.classList;!r.contains(t.BUTTON_ICON_CLASS)&&!r.contains(wi.DISABLED_CONTAINER_CLASS)&&n._menu.close()})}}],[{key:"createButtonElement",value:function(){var e=document.createElement("div");return e.classList.add("input-button"),e}},{key:"createButtonContainer",value:function(){var e=document.createElement("div");return e.id="dropup-container",e}},{key:"getPosition",value:function(e,t){var n,r;return null!=(n=null==t?void 0:t.button)&&n.position?null==(r=null==t?void 0:t.button)?void 0:r.position:e["outside-left"].length>0&&0===e["outside-right"].length?"outside-right":"outside-left"}}])}(Cr);Ti.BUTTON_ICON_CLASS="dropup-button";var Ai=Ti,Mi=function(){function e(){x(this,e)}return T(e,null,[{key:"addToDropup",value:function(e,t,n,r){var i=new Ai(n,r);ki.forEach(function(e){var n=t["dropup-menu"].findIndex(function(t){return t.buttonType===e}),r=t["dropup-menu"][n];r&&(i.addItem(r.button),t["dropup-menu"].splice(n,1))}),t["dropup-menu"].forEach(function(e){var t=e.button;return i.addItem(t)});var a=Ai.getPosition(t,r);bi.addButton(e,i.buttonContainer,a),t[a].push({})}},{key:"addToSideContainer",value:function(e,t){["inside-left","inside-right","outside-left","outside-right"].forEach(function(n){var r=n;t[r].forEach(function(t){bi.addButton(e,t.button.elementRef,r)})})}},{key:"setPosition",value:function(e,t,n){var r=_(_({},e[t]),{},{buttonType:t});n.push(r),delete e[t]}},{key:"createPositionsToButtonsObj",value:function(){return{"dropup-menu":[],"outside-left":[],"inside-left":[],"inside-right":[],"outside-right":[]}}},{key:"generatePositionToButtons",value:function(t){var n=e.createPositionsToButtonsObj();Object.keys(t).forEach(function(r){var i,a=null==(i=t[r])?void 0:i.button.position;a&&e.setPosition(t,r,n[a])}),0===n["inside-right"].length&&t.submit&&e.setPosition(t,"submit",n["inside-right"]),0===n["outside-right"].length&&(t.submit?e.setPosition(t,"submit",n["outside-right"]):t.microphone?e.setPosition(t,"microphone",n["outside-right"]):t.camera?e.setPosition(t,"camera",n["outside-right"]):t["".concat(wi.INDICATOR_PREFIX,"1")]&&e.setPosition(t,"".concat(wi.INDICATOR_PREFIX,"1"),n["outside-right"])),t.submit&&e.setPosition(t,"submit",0===n["outside-left"].length?n["outside-left"]:n["inside-right"]),t.microphone&&e.setPosition(t,"microphone",0===n["outside-left"].length?n["outside-left"]:n["inside-right"]);var r=Object.keys(t);return r.length>1||n["dropup-menu"].length>0?(ki.forEach(function(e){t[e]&&n["dropup-menu"].push(_(_({},t[e]),{},{buttonType:e}))}),r.forEach(function(e){var r=e;r.startsWith(wi.INDICATOR_PREFIX)&&t[r]&&n["dropup-menu"].push(_(_({},t[r]),{},{customType:r}))})):1===r.length&&e.setPosition(t,r[0],0===n["outside-right"].length?n["outside-right"]:n["outside-left"]),n}},{key:"addButtons",value:function(t,n,r,i){var a=e.generatePositionToButtons(n);return e.addToSideContainer(t,a),a["dropup-menu"].length>0&&e.addToDropup(t,a,r,i),a}}])}(),Li={images:{id:"upload-images-icon",svgString:'<?xml version="1.0" encoding="utf-8"?>\n<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n  <path d="M20,15.2928932 L20,5.5 C20,4.67157288 19.3284271,4 18.5,4 L5.5,4 C4.67157288,4 4,4.67157288 4,5.5 L4,12.2928932 L7.14644661,9.14644661 C7.34170876,8.95118446 7.65829124,8.95118446 7.85355339,9.14644661 L13.5,14.7928932 L16.1464466,12.1464466 C16.3417088,11.9511845 16.6582912,11.9511845 16.8535534,12.1464466 L20,15.2928932 Z M20,16.7071068 L16.5,13.2071068 L13.8535534,15.8535534 C13.6582912,16.0488155 13.3417088,16.0488155 13.1464466,15.8535534 L7.5,10.2071068 L4,13.7071068 L4,18.5 C4,19.3284271 4.67157288,20 5.5,20 L18.5,20 C19.3284271,20 20,19.3284271 20,18.5 L20,16.7071068 Z M3,5.5 C3,4.11928813 4.11928813,3 5.5,3 L18.5,3 C19.8807119,3 21,4.11928813 21,5.5 L21,18.5 C21,19.8807119 19.8807119,21 18.5,21 L5.5,21 C4.11928813,21 3,19.8807119 3,18.5 L3,5.5 Z M15,6 L17,6 C17.5522847,6 18,6.44771525 18,7 L18,9 C18,9.55228475 17.5522847,10 17,10 L15,10 C14.4477153,10 14,9.55228475 14,9 L14,7 C14,6.44771525 14.4477153,6 15,6 Z M15,7 L15,9 L17,9 L17,7 L15,7 Z"/>\n</svg>\n',dropupText:"Image"},gifs:{id:"upload-gifs-icon",svgString:'<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 5.9266752 5.6408391" height="21.31971" width="22.4">\n  <g>\n    <path d="m 5.2564627,1.548212 c -3.1136005,-0.4796804 -1.5568006,-0.2398402 0,0 z M 2.0001198,2.0922063 c 0.1556781,0 0.2657489,0.020893 0.3917849,0.080366 0.081154,0.038347 0.1153492,0.134065 0.076377,0.2138602 -0.038973,0.07979 -0.1363527,0.1134129 -0.2175069,0.075091 -0.078199,-0.036919 -0.1407455,-0.048792 -0.250655,-0.048792 -0.2260486,0 -0.3921482,0.2042182 -0.3921482,0.4801409 0,0.2761822 0.1663188,0.4810688 0.3921482,0.4810688 0.1117901,0 0.2064255,-0.046133 0.255659,-0.1284198 l 0.00162,-0.00389 V 3.0534032 l -0.098011,1.75e-4 c -0.081844,0 -0.1495979,-0.059305 -0.1612403,-0.1365887 l -0.00175,-0.023683 c 0,-0.08047 0.060311,-0.1470874 0.1389194,-0.1585331 l 0.024085,-0.00195 h 0.2612303 c 0.081842,0 0.149598,0.059305 0.1612404,0.1365891 l 0.00175,0.023683 -3.398e-4,0.3968809 v 0 l -0.00168,0.014211 v 0 l -0.00553,0.023034 v 0 l -0.00532,0.014145 c -0.098178,0.22826 -0.3236506,0.3528713 -0.5706303,0.3528713 -0.4240855,0 -0.7181621,-0.3622714 -0.7181621,-0.8016063 0,-0.4391857 0.2940275,-0.8006848 0.7181621,-0.8006848 z m 1.2034759,0.031275 c 0.081843,0 0.1495977,0.059305 0.1612403,0.1365891 l 0.00175,0.023683 v 1.2211775 c 0,0.088516 -0.07298,0.1602721 -0.1630073,0.1602721 -0.081841,0 -0.1495972,-0.059305 -0.1612397,-0.1365892 L 3.040589,3.5049308 V 2.2837527 c 0,-0.088516 0.07298,-0.1602721 0.1630067,-0.1602714 z m 0.7813442,0 0.5209469,0.00195 c 0.090025,3.048e-4 0.1627543,0.072306 0.1624458,0.1608234 -2.809e-4,0.08047 -0.06083,0.1468798 -0.1394772,0.158066 l -0.024092,0.00195 -0.3575326,-0.0013 v 0.4497782 l 0.2928918,2.27e-4 c 0.081842,0 0.1495979,0.059305 0.1612403,0.136589 l 0.00175,0.023683 c 0,0.080469 -0.06031,0.1470871 -0.1389193,0.1585393 l -0.024092,0.00195 -0.2928919,-2.336e-4 1.563e-4,0.2860316 c 0,0.080471 -0.06031,0.1470873 -0.1389193,0.1585395 l -0.024085,0.00195 c -0.081843,0 -0.1495979,-0.059305 -0.1612403,-0.1365826 l -0.00175,-0.023691 V 2.2841354 c 2.798e-4,-0.08047 0.060829,-0.1468797 0.1394758,-0.1580594 z"/>\n    <path d="m 5.0894191,1.0943261 c 0,-0.21918999 -0.177687,-0.39686999 -0.396876,-0.39686999 h -3.43959 c -0.2191879,0 -0.391262,0.1777519 -0.3968759,0.39686999 l -0.027082,3.4379266 c 0.040152,0.2939927 0.4235456,0.409415 0.4235456,0.409415 l 3.4785583,-0.00851 c 0,0 0.3008506,-0.1402998 0.3236271,-0.4201576 0.042911,-0.5272495 0.034693,-1.6106146 0.034693,-3.4186761 z m -4.49792494,0 c 0,-0.36530999 0.29614504,-0.66145999 0.66145894,-0.66145999 h 3.43959 c 0.365314,0 0.66146,0.29615 0.66146,0.66145999 v 3.43959 c 0,0.36532 -0.296146,0.66146 -0.66146,0.66146 h -3.43959 c -0.3653139,0 -0.66145894,-0.29614 -0.66145894,-0.66146 z"/>\n  </g>\n</svg>\n',dropupText:"GIF"},audio:{id:"upload-audio-icon",svgString:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-49.49 -49.49 593.87 593.87" stroke-width="3.95908" transform="rotate(0)">\n  <g stroke-width="0"></g>\n  <g stroke-linecap="round" stroke-linejoin="round" stroke-width="0.98977"></g>\n  <g>\n    <g>\n      <g>\n        <path d="M163.205,76.413v293.301c-3.434-3.058-7.241-5.867-11.486-8.339c-21.38-12.452-49.663-15.298-77.567-7.846 c-49.038,13.096-80.904,54.519-71.038,92.337c4.019,15.404,14.188,28.221,29.404,37.087c13.553,7.894,29.87,11.933,47.115,11.933 c9.962,0,20.231-1.356,30.447-4.087c42.74-11.406,72.411-44.344,72.807-77.654h0.011v-0.162c0.002-0.166,0-0.331,0-0.496V187.072 l290.971-67.3v178.082c-3.433-3.055-7.238-5.863-11.481-8.334c-21.385-12.452-49.654-15.308-77.567-7.846 c-49.038,13.087-80.904,54.519-71.038,92.356c4.019,15.385,14.183,28.212,29.404,37.067c13.548,7.894,29.875,11.933,47.115,11.933 c9.962,0,20.231-1.356,30.452-4.087c42.74-11.413,72.411-44.346,72.804-77.654h0.004v-0.065c0.003-0.236,0.001-0.469,0-0.704V0 L163.205,76.413z M104.999,471.779c-22.543,6.038-45.942,3.846-62.572-5.846c-10.587-6.163-17.591-14.817-20.255-25.038 c-7.144-27.375,18.452-58.029,57.062-68.346c8.409-2.25,16.938-3.346,25.188-3.346c13.87,0,26.962,3.115,37.389,9.192 c10.587,6.163,17.591,14.817,20.255,25.029c0.809,3.102,1.142,6.248,1.139,9.4v0.321h0.014 C162.99,437.714,139.082,462.678,104.999,471.779z M182.898,166.853V92.067l290.971-67.298v74.784L182.898,166.853z M415.677,399.923c-22.558,6.038-45.942,3.837-62.587-5.846c-10.587-6.163-17.587-14.817-20.25-25.019 c-7.144-27.385,18.452-58.058,57.058-68.365c8.414-2.25,16.942-3.346,25.192-3.346c13.875,0,26.962,3.115,37.385,9.192 c10.596,6.163,17.596,14.817,20.26,25.029v0.01c0.796,3.05,1.124,6.144,1.135,9.244v0.468h0.02 C473.668,365.851,449.763,390.814,415.677,399.923z">\n        </path>\n      </g>\n    </g>\n  </g>\n</svg>',dropupText:"Audio"},mixedFiles:{id:"upload-mixed-files-icon",svgString:'<?xml version="1.0" encoding="utf-8"?>\n<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n<path d="M20 10.9696L11.9628 18.5497C10.9782 19.4783 9.64274 20 8.25028 20C6.85782 20 5.52239 19.4783 4.53777 18.5497C3.55315 17.6211 3 16.3616 3 15.0483C3 13.7351 3.55315 12.4756 4.53777 11.547L12.575 3.96687C13.2314 3.34779 14.1217 3 15.05 3C15.9783 3 16.8686 3.34779 17.525 3.96687C18.1814 4.58595 18.5502 5.4256 18.5502 6.30111C18.5502 7.17662 18.1814 8.01628 17.525 8.63535L9.47904 16.2154C9.15083 16.525 8.70569 16.6989 8.24154 16.6989C7.77738 16.6989 7.33224 16.525 7.00403 16.2154C6.67583 15.9059 6.49144 15.4861 6.49144 15.0483C6.49144 14.6106 6.67583 14.1907 7.00403 13.8812L14.429 6.88674" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>',dropupText:"File"}},Ri=function(e){function t(e){var n;x(this,t),"dropup-menu"===(null==e?void 0:e.position)&&(e.position="outside-right");var r=B.tryCreateConfig("Microphone",null==e?void 0:e.tooltip);return(n=f(this,t,[t.createMicrophoneElement(),Sr,null==e?void 0:e.position,r,e])).isActive=!1,n._innerElements=n.createInnerElementsForStates(n.customStyles),n.changeToDefault(),n}return v(t,e),T(t,[{key:"createInnerElementsForStates",value:function(e){var t="microphone-icon";return{default:this.createInnerElements(t,"default",e),active:this.createInnerElements(t,"active",e),unsupported:this.createInnerElements(t,"unsupported",e),commandMode:this.createInnerElements(t,"commandMode",e)}}},{key:"changeToActive",value:function(){this.changeElementsByState(this._innerElements.active),this.toggleIconFilter("active"),this.reapplyStateStyle("active",["default","commandMode"]),this.isActive=!0}},{key:"changeToDefault",value:function(){this.changeElementsByState(this._innerElements.default),this.toggleIconFilter("default"),this.reapplyStateStyle("default",["active","commandMode"]),this.isActive=!1}},{key:"changeToCommandMode",value:function(){this.changeElementsByState(this._innerElements.commandMode),this.toggleIconFilter("command"),this.reapplyStateStyle("commandMode",["active"])}},{key:"changeToUnsupported",value:function(){this.changeElementsByState(this._innerElements.unsupported),this.elementRef.classList.add("unsupported-microphone"),this.reapplyStateStyle("unsupported",["active"])}},{key:"toggleIconFilter",value:function(e){var t=this.elementRef.children[0];if("svg"===t.tagName.toLocaleLowerCase())switch(e){case"default":t.classList.remove("active-microphone-icon","command-microphone-icon"),t.classList.add("default-microphone-icon");break;case"active":t.classList.remove("default-microphone-icon","command-microphone-icon"),t.classList.add("active-microphone-icon");break;case"command":t.classList.remove("active-microphone-icon","default-microphone-icon"),t.classList.add("command-microphone-icon")}}}],[{key:"createMicrophoneElement",value:function(){var e=document.createElement("div");return e.id="microphone-button",e.classList.add("input-button"),e}}])}(Cr);function Ii(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Oi,Pi,Ni,Di={},Bi={},Fi={},Ui={},ji={};function zi(){if(Oi)return ji;Oi=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.Text=void 0;var e=function(){function e(){x(this,e)}return T(e,null,[{key:"capitalize",value:function(t){return t.replace(e.FIRST_CHAR_REGEX,function(e){return e.toUpperCase()})}},{key:"lineBreak",value:function(t){return t.replace(e.DOUBLE_LINE,"<p></p>").replace(e.ONE_LINE,"<br>")}},{key:"isCharDefined",value:function(e){return void 0!==e&&"\xa0"!==e&&" "!==e&&"\n"!==e&&""!==e}},{key:"breakupIntoWordsArr",value:function(e){return e.split(/(\W+)/)}}])}();return ji.Text=e,e.FIRST_CHAR_REGEX=/\S/,e.DOUBLE_LINE=/\n\n/g,e.ONE_LINE=/\n/g,ji}function Hi(){if(Pi)return Ui;Pi=1,Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.Translate=void 0;var e=zi(),t=function(){return T(function e(){x(this,e)},null,[{key:"translate",value:function(t,n){for(var r=e.Text.breakupIntoWordsArr(t),i=0;i<r.length;i+=1)n[r[i]]&&(r[i]=n[r[i]]);return r.join("")}}])}();return Ui.Translate=t,Ui}var qi,Vi={};function Gi(){if(qi)return Vi;qi=1,Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.Browser=void 0;var e=T(function e(){x(this,e)});return Vi.Browser=e,e.IS_SAFARI=function(){return void 0===e._IS_SAFARI&&(e._IS_SAFARI=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),e._IS_SAFARI},Vi}var Wi,Ki={},Ji={};var $i,Xi={};var Yi,Qi={},Zi={};function ea(){if(Yi)return Zi;Yi=1,Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.AutoScroll=void 0;var e=function(){function e(){x(this,e)}return T(e,null,[{key:"changeStateIfNeeded",value:function(e,t){t&&!e.isCursorAtEnd&&(e.endPadding="",e.scrollingSpan.innerHTML="&nbsp;")}},{key:"scrollGeneric",value:function(e,t){e.isCursorAtEnd?t.scrollTop=t.scrollHeight:e.scrollingSpan.scrollIntoView({block:"nearest"})}},{key:"scrollSafariPrimitiveToEnd",value:function(e){e.scrollLeft=e.scrollWidth,e.scrollTop=e.scrollHeight}},{key:"isElementOverflown",value:function(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth}},{key:"isRequired",value:function(t,n){return t&&e.isElementOverflown(n)}}])}();return Zi.AutoScroll=e,Zi}var ta,na={};function ra(){if(ta)return na;ta=1,Object.defineProperty(na,"__esModule",{value:!0}),na.Elements=void 0;var e=function(){return T(function e(){x(this,e)},null,[{key:"isPrimitiveElement",value:function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName}},{key:"createInterimSpan",value:function(){var e=document.createElement("span");return e.style.color="grey",e.style.pointerEvents="none",e}},{key:"createGenericSpan",value:function(){var e=document.createElement("span");return e.style.pointerEvents="none",e}},{key:"appendSpans",value:function(e,t){if(e.spansPopulated=!0,e.insertInCursorLocation&&document.activeElement===t){var n=window.getSelection();if(null!=n&&n.focusNode){var r=n.getRangeAt(0);return r.insertNode(e.scrollingSpan),r.insertNode(e.interimSpan),r.insertNode(e.finalSpan),r.collapse(!1),n.removeAllRanges(),void n.addRange(r)}}t.appendChild(e.finalSpan),t.appendChild(e.interimSpan),t.appendChild(e.scrollingSpan)}},{key:"applyCustomColors",value:function(e,t){t.interim&&(e.interimSpan.style.color=t.interim),t.final&&(e.finalSpan.style.color=t.final)}},{key:"isInsideShadowDOM",value:function(e){return e.getRootNode()instanceof ShadowRoot}}])}();return na.Elements=e,na}var ia,aa,oa={};function sa(){if(ia)return oa;ia=1,Object.defineProperty(oa,"__esModule",{value:!0}),oa.Cursor=void 0;var e=function(){function e(){x(this,e)}return T(e,null,[{key:"setOffsetForGeneric",value:function(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=0,a=0;a<t.childNodes.length;a+=1){var o=t.childNodes[a];if(o.childNodes.length>0){var s=e.setOffsetForGeneric(o,n,r);if(-1===s)return-1;r+=s}else if(null!==o.textContent){if(r+o.textContent.length>n){var l=document.createRange();l.setStart(o,n-r),l.collapse(!0);var u=window.getSelection();return null==u||u.removeAllRanges(),null==u||u.addRange(l),t.focus(),-1}r+=o.textContent.length,i+=o.textContent.length}}return i}},{key:"focusEndOfGeneric",value:function(e){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var n=window.getSelection();n&&(n.removeAllRanges(),n.addRange(t))}},{key:"setOffsetForSafariGeneric",value:function(t,n){var r=window.getSelection();if(r){var i=e.getGenericElementCursorOffset(t,r,!0);e.setOffsetForGeneric(t,i+n)}}},{key:"setOffsetForPrimitive",value:function(e,t,n){n&&e.blur(),e.setSelectionRange(t,t),e.focus()}},{key:"getGenericElementCursorOffset",value:function(e,t,n){var r=0;if(t.rangeCount>0){var i=t.getRangeAt(0),a=i.cloneRange();a.selectNodeContents(e),n?a.setEnd(i.startContainer,i.startOffset):a.setEnd(i.endContainer,i.endOffset),r=a.toString().length}return r}}])}();return oa.Cursor=e,oa}function la(){if(aa)return Qi;aa=1,Object.defineProperty(Qi,"__esModule",{value:!0}),Qi.CommandUtils=void 0;var e=ea(),t=ra(),n=Gi(),r=sa(),i=zi(),a=function(){function a(){x(this,a)}return T(a,null,[{key:"processCommand",value:function(e,t){return(!t||!t.caseSensitive)&&(e=e.toLowerCase()),!1===(null==t?void 0:t.substrings)?i.Text.breakupIntoWordsArr(e):e}},{key:"process",value:function(e){var t;return!0===(null===(t=e.settings)||void 0===t?void 0:t.caseSensitive)?e:Object.keys(e).reduce(function(t,n){var r=e[n];return t[n]="string"==typeof r?a.processCommand(r,e.settings):r,t},{})}},{key:"toggleCommandModeOn",value:function(e){var t;e.isWaitingForCommand=!0,null===(t=e.onCommandModeTrigger)||void 0===t||t.call(e,!0)}},{key:"toggleCommandModeOff",value:function(e){var t;e.isWaitingForCommand&&(null===(t=e.onCommandModeTrigger)||void 0===t||t.call(e,!1),e.isWaitingForCommand=!1)}},{key:"setText",value:function(i,o,s,l){a.toggleCommandModeOff(i),t.Elements.isPrimitiveElement(l)?(l.value=s,i.isTargetInShadow||r.Cursor.setOffsetForPrimitive(l,s.length,!0),n.Browser.IS_SAFARI()&&i.autoScroll&&e.AutoScroll.scrollSafariPrimitiveToEnd(l)):(l.textContent=s,i.isTargetInShadow||r.Cursor.focusEndOfGeneric(l),setTimeout(function(){return e.AutoScroll.scrollGeneric(i,l)})),i.resetRecording(o)}},{key:"checkIfMatchesSubstring",value:function(e,t){return t.includes(e)}},{key:"checkIfMatchesWord",value:function(e,t,n){for(var r=e,i=n.length-1;i>=0;i-=1){for(var a=i,o=r.length-1;n[a]===r[o]&&o>=0;)a-=1,o-=1;if(o<0)return!0}return!1}},{key:"execCommand",value:function(e,t,n,r,o){var s,l,u,c=e.commands;if(c&&r&&n){var d=!0===(null===(s=c.settings)||void 0===s?void 0:s.caseSensitive)?t:t.toLowerCase(),f=i.Text.breakupIntoWordsArr(d),p=!1===(null===(l=c.settings)||void 0===l?void 0:l.substrings)?a.checkIfMatchesWord:a.checkIfMatchesSubstring;if(c.commandMode&&p(c.commandMode,d,f))return e.setInterimColorToFinal(),setTimeout(function(){return a.toggleCommandModeOn(e)}),{doNotProcessTranscription:!1};if(!c.commandMode||e.isWaitingForCommand){if(c.stop&&p(c.stop,d,f))return a.toggleCommandModeOff(e),setTimeout(function(){return e.stop()}),{doNotProcessTranscription:!1};if(c.pause&&p(c.pause,d,f))return a.toggleCommandModeOff(e),e.setInterimColorToFinal(),setTimeout(function(){var t;e.isPaused=!0,null===(t=e.onPauseTrigger)||void 0===t||t.call(e,!0)}),{doNotProcessTranscription:!1};if(c.resume&&p(c.resume,d,f))return e.isPaused=!1,null===(u=e.onPauseTrigger)||void 0===u||u.call(e,!1),a.toggleCommandModeOff(e),e.resetRecording(n),{doNotProcessTranscription:!0};if(c.reset&&p(c.reset,d,f))return void 0!==o&&a.setText(e,n,o,r),{doNotProcessTranscription:!0};if(c.removeAllText&&p(c.removeAllText,d,f))return a.setText(e,n,"",r),{doNotProcessTranscription:!0}}}}}])}();return Qi.CommandUtils=a,Qi}var ua,ca={};var da,fa,pa,ha={};function ma(){if(fa)return Ki;fa=1,Object.defineProperty(Ki,"__esModule",{value:!0}),Ki.Speech=void 0;var e=function(){if(Wi)return Ji;Wi=1,Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.EventListeners=void 0;var e=function(){function e(){x(this,e)}return T(e,null,[{key:"getElementIfFocusedOnAvailable",value:function(e,t){return Array.isArray(e)?e.find(function(e){return t===e}):t===e?e:void 0}},{key:"keyDownWindow",value:function(t){var n=this;t.element&&e.getElementIfFocusedOnAvailable(t.element,document.activeElement)&&(null!==e.KEY_DOWN_TIMEOUT&&clearTimeout(e.KEY_DOWN_TIMEOUT),e.KEY_DOWN_TIMEOUT=setTimeout(function(){e.KEY_DOWN_TIMEOUT=null,n.resetRecording(t)},500))}},{key:"mouseDownWindow",value:function(t,n){this.mouseDownElement=e.getElementIfFocusedOnAvailable(t,n.target)}},{key:"mouseUpWindow",value:function(e){this.mouseDownElement&&this.resetRecording(e),this.mouseDownElement=void 0}},{key:"add",value:function(t,n){var r=void 0===(null==n?void 0:n.insertInCursorLocation)||(null==n?void 0:n.insertInCursorLocation);null!=n&&n.element&&r&&(t.mouseDownEvent=e.mouseDownWindow.bind(t,n.element),document.addEventListener("mousedown",t.mouseDownEvent),t.mouseUpEvent=e.mouseUpWindow.bind(t,n),document.addEventListener("mouseup",t.mouseUpEvent),t.keyDownEvent=e.keyDownWindow.bind(t,n),document.addEventListener("keydown",t.keyDownEvent))}},{key:"remove",value:function(e){document.removeEventListener("mousedown",e.mouseDownEvent),document.removeEventListener("mouseup",e.mouseUpEvent),document.removeEventListener("keydown",e.keyDownEvent)}}])}();return Ji.EventListeners=e,e.KEY_DOWN_TIMEOUT=null,Ji}(),t=function(){if($i)return Xi;$i=1,Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.PreResultUtils=void 0;var e=function(){return T(function e(){x(this,e)},null,[{key:"process",value:function(e,t,n,r,i){var a=null==r?void 0:r(t,n);return!!a&&(setTimeout(function(){a.restart?e.resetRecording(i):a.stop&&e.stop()}),(a.stop||a.restart)&&a.removeNewText)}}])}();return Xi.PreResultUtils=e,Xi}(),n=la(),r=ea(),i=function(){if(ua)return ca;ua=1,Object.defineProperty(ca,"__esModule",{value:!0}),ca.Highlight=void 0;var e=ra(),t=sa(),n=function(){function n(){x(this,n)}return T(n,null,[{key:"setStateForPrimitive",value:function(e,t){var n,r;null!==t.selectionStart&&(n=t.selectionStart),null!==t.selectionEnd&&(r=t.selectionEnd),e.isHighlighted=n!==r}},{key:"setStateForGeneric",value:function(e,n){var r=window.getSelection();if(null!=r&&r.focusNode){var i=t.Cursor.getGenericElementCursorOffset(n,r,!0),a=t.Cursor.getGenericElementCursorOffset(n,r,!1);e.isHighlighted=i!==a}}},{key:"setState",value:function(t,r){document.activeElement===r&&(e.Elements.isPrimitiveElement(r)?n.setStateForPrimitive(t,r):n.setStateForGeneric(t,r))}},{key:"removeForGeneric",value:function(e,n){var r=window.getSelection();if(r){var i=t.Cursor.getGenericElementCursorOffset(n,r,!0);r.deleteFromDocument(),t.Cursor.setOffsetForGeneric(n,i),e.isHighlighted=!1}}},{key:"removeForPrimitive",value:function(e,n){var r=n.selectionStart,i=n.selectionEnd,a=n.value;if(r&&i){var o=a.substring(0,r)+a.substring(i);n.value=o,t.Cursor.setOffsetForPrimitive(n,r,e.autoScroll)}e.isHighlighted=!1}}])}();return ca.Highlight=n,ca}(),a=ra(),o=function(){if(da)return ha;da=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.Padding=void 0;var e=ra(),t=sa(),n=zi(),r=function(){function r(){x(this,r)}return T(r,null,[{key:"setStateForPrimitiveElement",value:function(e,t){if(document.activeElement===t&&null!==t.selectionStart){var r=t.selectionStart,i=t.value[r-1],a=null===t.selectionEnd?r:t.selectionEnd,o=t.value[a];return n.Text.isCharDefined(i)&&(e.startPadding=" ",e.numberOfSpacesBeforeNewText=1),n.Text.isCharDefined(o)&&(e.endPadding=" ",e.numberOfSpacesAfterNewText=1),void(e.isCursorAtEnd=t.value.length===a)}var s=t.value[t.value.length-1];n.Text.isCharDefined(s)&&(e.startPadding=" ",e.numberOfSpacesBeforeNewText=1),e.isCursorAtEnd=!0}},{key:"setStateForGenericElement",value:function(e,r){var i,a,o;if(document.activeElement===r){var s=window.getSelection();if(null!=s&&s.focusNode){var l=t.Cursor.getGenericElementCursorOffset(r,s,!0),u=null===(i=r.textContent)||void 0===i?void 0:i[l-1],c=t.Cursor.getGenericElementCursorOffset(r,s,!1),d=null===(a=r.textContent)||void 0===a?void 0:a[c];return n.Text.isCharDefined(u)&&(e.startPadding=" "),n.Text.isCharDefined(d)&&(e.endPadding=" "),void(e.isCursorAtEnd=(null===(o=r.textContent)||void 0===o?void 0:o.length)===c)}}var f=r.innerText.charAt(r.innerText.length-1);n.Text.isCharDefined(f)&&(e.startPadding=" "),e.isCursorAtEnd=!0}},{key:"setState",value:function(t,n){e.Elements.isPrimitiveElement(n)?r.setStateForPrimitiveElement(t,n):r.setStateForGenericElement(t,n)}},{key:"adjustStateAfterRecodingPrimitiveElement",value:function(e,t){e.primitiveTextRecorded=!0,e.insertInCursorLocation&&document.activeElement===t&&(null!==t.selectionEnd&&(e.endPadding=e.endPadding+t.value.slice(t.selectionEnd)),null!==t.selectionStart)?e.startPadding=t.value.slice(0,t.selectionStart)+e.startPadding:e.startPadding=t.value+e.startPadding}},{key:"adjustSateForNoTextPrimitiveElement",value:function(e){1===e.numberOfSpacesBeforeNewText&&(e.startPadding=e.startPadding.substring(0,e.startPadding.length-1),e.numberOfSpacesBeforeNewText=0),1===e.numberOfSpacesAfterNewText&&(e.endPadding=e.endPadding.substring(1),e.numberOfSpacesAfterNewText=0)}}])}();return ha.Padding=r,ha}(),s=Gi(),l=sa(),u=zi(),c=function(){return T(function e(){x(this,e),this.finalTranscript="",this.interimSpan=a.Elements.createInterimSpan(),this.finalSpan=a.Elements.createGenericSpan(),this.scrollingSpan=a.Elements.createGenericSpan(),this.isCursorAtEnd=!1,this.spansPopulated=!1,this.startPadding="",this.endPadding="",this.numberOfSpacesBeforeNewText=0,this.numberOfSpacesAfterNewText=0,this.isHighlighted=!1,this.primitiveTextRecorded=!1,this.recognizing=!1,this._displayInterimResults=!0,this.insertInCursorLocation=!0,this.autoScroll=!0,this.isRestarting=!1,this.isPaused=!1,this.isWaitingForCommand=!1,this.isTargetInShadow=!1,this.cannotBeStopped=!1,this.resetState()},[{key:"prepareBeforeStart",value:function(t){var r,i;if(null!=t&&t.element)if(e.EventListeners.add(this,t),Array.isArray(t.element)){var o=t.element.find(function(e){return e===document.activeElement})||t.element[0];if(!o)return;this.prepare(o)}else this.prepare(t.element);void 0!==(null==t?void 0:t.displayInterimResults)&&(this._displayInterimResults=t.displayInterimResults),null!=t&&t.textColor&&(this._finalTextColor=null===(r=null==t?void 0:t.textColor)||void 0===r?void 0:r.final,a.Elements.applyCustomColors(this,t.textColor)),void 0!==(null==t?void 0:t.insertInCursorLocation)&&(this.insertInCursorLocation=t.insertInCursorLocation),void 0!==(null==t?void 0:t.autoScroll)&&(this.autoScroll=t.autoScroll),this._onResult=null==t?void 0:t.onResult,this._onPreResult=null==t?void 0:t.onPreResult,this._onStart=null==t?void 0:t.onStart,this._onStop=null==t?void 0:t.onStop,this._onError=null==t?void 0:t.onError,this.onCommandModeTrigger=null==t?void 0:t.onCommandModeTrigger,this.onPauseTrigger=null==t?void 0:t.onPauseTrigger,this._options=t,null!==(i=this._options)&&void 0!==i&&i.commands&&(this.commands=n.CommandUtils.process(this._options.commands))}},{key:"prepare",value:function(e){o.Padding.setState(this,e),i.Highlight.setState(this,e),this.isTargetInShadow=a.Elements.isInsideShadowDOM(e),a.Elements.isPrimitiveElement(e)?(this._primitiveElement=e,this._originalText=this._primitiveElement.value):(this._genericElement=e,this._originalText=this._genericElement.textContent)}},{key:"resetRecording",value:function(e){this.isRestarting=!0,this.stop(!0),this.resetState(!0),this.start(e,!0)}},{key:"updateElements",value:function(e,r,i){var a,o=u.Text.capitalize(r);if(this.finalTranscript!==o||""!==e){t.PreResultUtils.process(this,i,""===e,this._onPreResult,this._options)&&(e="",i="");var s=this.commands&&n.CommandUtils.execCommand(this,i,this._options,this._primitiveElement||this._genericElement,this._originalText);if(s){if(s.doNotProcessTranscription)return;e="",i=""}if(!this.isPaused&&!this.isWaitingForCommand){null===(a=this._onResult)||void 0===a||a.call(this,i,""===e),this.finalTranscript=o,this._displayInterimResults||(e="");var l=""===this.finalTranscript&&""===e;this._primitiveElement?this.updatePrimitiveElement(this._primitiveElement,e,l):this._genericElement&&this.updateGenericElement(this._genericElement,e,l)}}}},{key:"updatePrimitiveElement",value:function(e,t,n){this.isHighlighted&&i.Highlight.removeForPrimitive(this,e),this.primitiveTextRecorded||o.Padding.adjustStateAfterRecodingPrimitiveElement(this,e),n&&o.Padding.adjustSateForNoTextPrimitiveElement(this);var a=this.startPadding+this.finalTranscript+t;if(e.value=a+this.endPadding,!this.isTargetInShadow){var u=a.length+this.numberOfSpacesAfterNewText;l.Cursor.setOffsetForPrimitive(e,u,this.autoScroll)}this.autoScroll&&s.Browser.IS_SAFARI()&&this.isCursorAtEnd&&r.AutoScroll.scrollSafariPrimitiveToEnd(e)}},{key:"updateGenericElement",value:function(e,t,n){this.isHighlighted&&i.Highlight.removeForGeneric(this,e),this.spansPopulated||a.Elements.appendSpans(this,e);var o=(n?"":this.startPadding)+u.Text.lineBreak(this.finalTranscript);this.finalSpan.innerHTML=o;var c=r.AutoScroll.isRequired(this.autoScroll,e);r.AutoScroll.changeStateIfNeeded(this,c);var d=u.Text.lineBreak(t)+(n?"":this.endPadding);this.interimSpan.innerHTML=d,s.Browser.IS_SAFARI()&&this.insertInCursorLocation&&l.Cursor.setOffsetForSafariGeneric(e,o.length+d.length),c&&r.AutoScroll.scrollGeneric(this,e),n&&(this.scrollingSpan.innerHTML="")}},{key:"finalise",value:function(t){this._genericElement&&(t?(this.finalSpan=a.Elements.createGenericSpan(),this.setInterimColorToFinal(),this.interimSpan=a.Elements.createInterimSpan(),this.scrollingSpan=a.Elements.createGenericSpan()):this._genericElement.textContent=this._genericElement.textContent,this.spansPopulated=!1),e.EventListeners.remove(this)}},{key:"setInterimColorToFinal",value:function(){this.interimSpan.style.color=this._finalTextColor||"black"}},{key:"resetState",value:function(e){this._primitiveElement=void 0,this._genericElement=void 0,this.finalTranscript="",this.finalSpan.innerHTML="",this.interimSpan.innerHTML="",this.scrollingSpan.innerHTML="",this.startPadding="",this.endPadding="",this.isHighlighted=!1,this.primitiveTextRecorded=!1,this.numberOfSpacesBeforeNewText=0,this.numberOfSpacesAfterNewText=0,e||(this.stopTimeout=void 0)}},{key:"setStateOnStart",value:function(){var e;this.recognizing=!0,this.isRestarting?this.isRestarting=!1:null===(e=this._onStart)||void 0===e||e.call(this)}},{key:"setStateOnStop",value:function(){var e;this.recognizing=!1,this.isRestarting||null===(e=this._onStop)||void 0===e||e.call(this)}},{key:"setStateOnError",value:function(e){var t;null===(t=this._onError)||void 0===t||t.call(this,e),this.recognizing=!1}}])}();return Ki.Speech=c,Ki}function va(){if(pa)return Bi;pa=1,Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.WebSpeech=void 0;var e=function(){if(Ni)return Fi;Ni=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.WebSpeechTranscript=void 0;var e=Hi(),t=function(){return T(function e(){x(this,e)},null,[{key:"extract",value:function(t,n,r){for(var i="",a=t.resultIndex;a<t.results.length;++a){var o=t.results[a][0].transcript;r&&(o=e.Translate.translate(o,r)),t.results[a].isFinal?n+=o:i+=o}return{interimTranscript:i,finalTranscript:n,newText:i||n}}},{key:"extractSafari",value:function(t,n,r){for(var i="",a=t.resultIndex;a<t.results.length;++a){var o=t.results[a][0].transcript;r&&(o=e.Translate.translate(o,r)),i+=o}return{interimTranscript:"",finalTranscript:i,newText:i}}}])}();return Fi.WebSpeechTranscript=t,Fi}(),t=Gi(),n=function(n){function r(){return x(this,r),f(this,r)}return v(r,n),T(r,[{key:"start",value:function(n){var r;void 0===this._extractText&&(this._extractText=t.Browser.IS_SAFARI()?e.WebSpeechTranscript.extractSafari:e.WebSpeechTranscript.extract),this.validate()&&(this.prepareBeforeStart(n),this.instantiateService(n),null===(r=this._service)||void 0===r||r.start(),this._translations=null==n?void 0:n.translations)}},{key:"validate",value:function(){return!!r.getAPI()||(this.error("Speech Recognition is unsupported"),!1)}},{key:"instantiateService",value:function(e){var t,n,i=r.getAPI();this._service=new i,this._service.continuous=!0,this._service.interimResults=null===(t=null==e?void 0:e.displayInterimResults)||void 0===t||t,this._service.lang=(null===(n=null==e?void 0:e.language)||void 0===n?void 0:n.trim())||"en-US",this.setEvents()}},{key:"setEvents",value:function(){var e=this;this._service&&(this._service.onstart=function(){e.setStateOnStart()},this._service.onerror=function(n){t.Browser.IS_SAFARI()&&"Another request is started"===n.message||"aborted"===n.error&&e.isRestarting||"no-speech"!==n.error&&e.error(n.message||n.error)},this._service.onaudioend=function(){e.setStateOnStop()},this._service.onend=function(){e._stopping=!1},this._service.onresult=function(t){if(w(t.results)>"u"&&e._service)e._service.onend=null,e._service.stop();else if(e._extractText&&!e._stopping){var n=e._extractText(t,e.finalTranscript,e._translations),r=n.interimTranscript,i=n.finalTranscript,a=n.newText;e.updateElements(r,i,a)}})}},{key:"stop",value:function(e){var t;this._stopping=!0,null===(t=this._service)||void 0===t||t.stop(),this.finalise(e)}},{key:"error",value:function(e){console.error(e),this.setStateOnError(e),this.stop()}}],[{key:"getAPI",value:function(){return window.webkitSpeechRecognition||window.SpeechRecognition}}])}(ma().Speech);return Bi.WebSpeech=n,Bi}var ga,ya={};var ba,ka={},Sa={};var _a,Ea,wa={},xa={};function Ca(){if(Ea)return wa;Ea=1,Object.defineProperty(wa,"__esModule",{value:!0}),wa.AzureSpeechConfig=void 0;var e=(_a||(_a=1,Object.defineProperty(xa,"__esModule",{value:!0}),xa.README_URL=void 0,xa.README_URL="https://github.com/OvidijusParsiunas/speech-to-element"),xa),t=function(){function t(){x(this,t)}return T(t,null,[{key:"validateOptions",value:function(t,n){return n?n.subscriptionKey||n.token||n.retrieveToken?!!n.region||(t("Please define a 'region' property - more info: ".concat(e.README_URL)),!1):(t("Please define a 'subscriptionKey', 'token' or 'retrieveToken' property - more info: ".concat(e.README_URL)),!1):(t("Please provide subscription details - more info: ".concat(e.README_URL)),!1)}},{key:"getNewSpeechConfig",value:function(){var e=k(y().mark(function e(t,n){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.region){e.next=2;break}return e.abrupt("return",n.subscriptionKey?t.fromSubscription(n.subscriptionKey.trim(),n.region.trim()):n.token?t.fromAuthorizationToken(n.token.trim(),n.region.trim()):n.retrieveToken?n.retrieveToken().then(function(e){return n.region?t.fromAuthorizationToken((null==e?void 0:e.trim())||"",n.region.trim()):null}).catch(function(e){return console.error(e),null}):null);case 2:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"process",value:function(e,t){t.endpointId&&(e.endpointId=t.endpointId.trim()),t.language&&(e.speechRecognitionLanguage=t.language.trim())}},{key:"get",value:function(){var e=k(y().mark(function e(n,r){var i;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getNewSpeechConfig(n,r);case 2:return i=e.sent,e.abrupt("return",(i&&t.process(i,r),i));case 4:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}])}();return wa.AzureSpeechConfig=t,wa}var Ta,Aa={};var Ma,La={};var Ra,Ia,Oa,Pa={};function Na(){if(Ia)return ka;Ia=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.Azure=void 0;var e=function(){if(ba)return Sa;ba=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.PreventConnectionStop=void 0;var e=function(){return T(function e(){x(this,e)},null,[{key:"applyPrevention",value:function(e){clearTimeout(e._manualConnectionStopPrevention),e.cannotBeStopped=!0,e._manualConnectionStopPrevention=setTimeout(function(){e.cannotBeStopped=!1},800)}},{key:"clearPrevention",value:function(e){clearTimeout(e._manualConnectionStopPrevention),e.cannotBeStopped=!1}}])}();return Sa.PreventConnectionStop=e,Sa}(),t=Ca(),n=function(){if(Ta)return Aa;Ta=1,Object.defineProperty(Aa,"__esModule",{value:!0}),Aa.StopTimeout=void 0;var e=function(){function e(){x(this,e)}return T(e,null,[{key:"set",value:function(e){e.stopTimeout=setTimeout(function(){return e.stop()},e.stopTimeoutMS)}},{key:"reset",value:function(t,n){t.stopTimeoutMS=n||e.DEFAULT_MS,e.stop(t),e.set(t)}},{key:"stop",value:function(e){e.stopTimeout&&clearTimeout(e.stopTimeout)}}])}();return Aa.StopTimeout=e,e.DEFAULT_MS=2e4,Aa}(),r=function(){if(Ma)return La;Ma=1,Object.defineProperty(La,"__esModule",{value:!0}),La.AzureAudioConfig=void 0;var e=function(){return T(function e(){x(this,e)},null,[{key:"get",value:function(e,t){return t?e.fromMicrophoneInput(t):e.fromDefaultMicrophoneInput()}}])}();return La.AzureAudioConfig=e,La}(),i=function(){if(Ra)return Pa;Ra=1,Object.defineProperty(Pa,"__esModule",{value:!0}),Pa.AzureTranscript=void 0;var e=Hi(),t=function(){return T(function e(){x(this,e)},null,[{key:"extract",value:function(t,n,r,i){return i&&(t=e.Translate.translate(t,i)),r?{interimTranscript:"",finalTranscript:n+t,newText:t}:{interimTranscript:t,finalTranscript:n,newText:t}}}])}();return Pa.AzureTranscript=t,Pa}(),a=function(a){function o(){var e;return x(this,o),(e=f(this,o,arguments))._newTextPadding="",e}return v(o,a),T(o,[{key:"start",value:function(t,r){this._newTextPadding="",void 0===this.stopTimeout&&n.StopTimeout.reset(this,null==t?void 0:t.stopAfterSilenceMs),this.prepareBeforeStart(t),this.startAsync(t),r||e.PreventConnectionStop.applyPrevention(this)}},{key:"startAsync",value:function(){var e=k(y().mark(function e(t){var n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.validate(t),!e.t0){e.next=6;break}return e.next=4,this.instantiateService(t);case 4:this._translations=null==t?void 0:t.translations,null===(n=this._service)||void 0===n||n.startContinuousRecognitionAsync(function(){},this.error);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"validate",value:function(e){return o.getAPI()?t.AzureSpeechConfig.validateOptions(this.error.bind(this),e):(this.moduleNotFound(),!1)}},{key:"instantiateService",value:function(){var e=k(y().mark(function e(n){var i,a,s,l,u,c,d,f,p;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=o.getAPI(),a=r.AzureAudioConfig.get(i.AudioConfig,n.deviceId),e.next=4,t.AzureSpeechConfig.get(i.SpeechConfig,n);case 4:(s=e.sent)?(n.autoLanguage&&n.autoLanguage.languages.length>0?(u=n.autoLanguage,c=u.type,d=u.languages,f=d.slice(0,"Continuous"===c?10:4),p=i.AutoDetectSourceLanguageConfig.fromLanguages(f),"Continuous"===c&&(p.mode=1),l=i.SpeechRecognizer.FromConfig(s,p,a)):l=new i.SpeechRecognizer(s,a),this.setEvents(l),this._service=l,n.retrieveToken&&this.retrieveTokenInterval(n.retrieveToken)):this.error("Unable to contact Azure server");case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setEvents",value:function(e){e.recognizing=this.onRecognizing.bind(this),e.recognized=this.onRecognized.bind(this),e.sessionStarted=this.onSessionStarted.bind(this),e.canceled=this.onCanceled.bind(this),e.sessionStopped=this.onSessionStopped.bind(this)}},{key:"onRecognizing",value:function(e,t){if(!this._stopping){var r=i.AzureTranscript.extract(this._newTextPadding+t.result.text,this.finalTranscript,!1,this._translations),a=r.interimTranscript,o=r.finalTranscript,s=r.newText;n.StopTimeout.reset(this,this.stopTimeoutMS),this.updateElements(a,o,s)}}},{key:"onRecognized",value:function(e,t){var r=t.result;switch(r.reason){case window.SpeechSDK.ResultReason.Canceled:break;case window.SpeechSDK.ResultReason.RecognizedSpeech:if(r.text&&!this._stopping){var a=i.AzureTranscript.extract(this._newTextPadding+r.text,this.finalTranscript,!0,this._translations),o=a.interimTranscript,s=a.finalTranscript,l=a.newText;n.StopTimeout.reset(this,this.stopTimeoutMS),this.updateElements(o,s,l),""!==s&&(this._newTextPadding=" ")}}}},{key:"onCanceled",value:function(e,t){t.reason===window.SpeechSDK.CancellationReason.Error&&this.error(t.errorDetails)}},{key:"onSessionStarted",value:function(){e.PreventConnectionStop.clearPrevention(this),this.setStateOnStart()}},{key:"onSessionStopped",value:function(){this._retrieveTokenInterval||clearInterval(this._retrieveTokenInterval),this._stopping=!1,this.setStateOnStop()}},{key:"retrieveTokenInterval",value:function(e){var t=this;this._retrieveTokenInterval=setInterval(function(){null==e||e().then(function(e){t._service&&(t._service.authorizationToken=(null==e?void 0:e.trim())||"")}).catch(function(e){t.error(e)})},1e4)}},{key:"stop",value:function(e){var t;!e&&this._retrieveTokenInterval&&clearInterval(this._retrieveTokenInterval),this._stopping=!0,null===(t=this._service)||void 0===t||t.stopContinuousRecognitionAsync(),n.StopTimeout.stop(this),this.finalise(e)}},{key:"moduleNotFound",value:function(){console.error("speech recognition module not found:"),console.error("please install the 'microsoft-cognitiveservices-speech-sdk' npm package or add a script tag: <script src=\"https://aka.ms/csspeech/jsbrowserpackageraw\"><\/script>"),this.setStateOnError("speech recognition module not found")}},{key:"error",value:function(e){this._retrieveTokenInterval&&clearInterval(this._retrieveTokenInterval),console.error(e),this.setStateOnError(e),this.stop()}}],[{key:"getAPI",value:function(){return window.SpeechSDK}}])}(ma().Speech);return ka.Azure=a,ka}var Da=function(){if(Oa)return Di;Oa=1,Object.defineProperty(Di,"__esModule",{value:!0});var e=va(),t=la(),n=function(){if(ga)return ya;ga=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.GlobalState=void 0;var e=function(){function e(){x(this,e)}return T(e,null,[{key:"doubleClickDetector",value:function(){return!!e.doubleClickPending||(e.doubleClickPending=!0,setTimeout(function(){e.doubleClickPending=!1},300),!1)}}])}();return ya.GlobalState=e,e.doubleClickPending=!1,ya}(),r=Na(),i=function(){function i(){x(this,i)}return T(i,null,[{key:"toggle",value:function(e,t){var r,a,o=e.toLocaleLowerCase().trim();null!==(r=n.GlobalState.service)&&void 0!==r&&r.recognizing?this.stop():"webspeech"===o?i.startWebSpeech(t):"azure"===o?i.startAzure(t):(console.error("service not found - must be either 'webspeech' or 'azure'"),null===(a=null==t?void 0:t.onError)||void 0===a||a.call(t,"service not found - must be either 'webspeech' or 'azure'"))}},{key:"startWebSpeech",value:function(t){i.stop()||(n.GlobalState.service=new e.WebSpeech,n.GlobalState.service.start(t))}},{key:"isWebSpeechSupported",value:function(){return!!e.WebSpeech.getAPI()}},{key:"startAzure",value:function(e){var t;i.stop()||null!==(t=n.GlobalState.service)&&void 0!==t&&t.cannotBeStopped||(n.GlobalState.service=new r.Azure,n.GlobalState.service.start(e))}},{key:"stop",value:function(){var e;return!!n.GlobalState.doubleClickDetector()||(!(null===(e=n.GlobalState.service)||void 0===e)&&e.recognizing&&n.GlobalState.service.stop(),!1)}},{key:"endCommandMode",value:function(){n.GlobalState.service&&t.CommandUtils.toggleCommandModeOff(n.GlobalState.service)}}])}();return Di.default=i,Di}(),Ba=Ii(Da),Fa=function(){return T(function e(t,n){x(this,e),this._silenceMS=2e3,this._stop=!0,"boolean"==typeof n&&!1===n&&(this._stop=!1),"number"==typeof t&&(this._silenceMS=t)},[{key:"setSilenceTimeout",value:function(e,t){var n=this;this._silenceTimeout=setTimeout(function(){var r;null==(r=e.submit)||r.call(e),Ba.stop(),n._stop||setTimeout(t,ja.MICROPHONE_RESET_TIMEOUT_MS)},this._silenceMS)}},{key:"clearSilenceTimeout",value:function(){this._silenceTimeout&&clearTimeout(this._silenceTimeout)}},{key:"resetSilenceTimeout",value:function(e,t){this.clearSilenceTimeout(),this.setSilenceTimeout(e,t)}},{key:"onPause",value:function(e,t,n){e?this.resetSilenceTimeout(t,n):this.clearSilenceTimeout()}}])}(),Ua=function(e){function t(e,n,r){var i;x(this,t);var a="object"==w(e.speechToText)?e.speechToText:{},o=(i=f(this,t,[null==a?void 0:a.button])).processConfiguration(n,e.speechToText),s=o.serviceName,l=o.processedConfig;if(i._addErrorMessage=r,"webspeech"!==s||Ba.isWebSpeechSupported()){var u=!e.textInput||!e.textInput.disabled;i.elementRef.onclick=i.buttonClick.bind(i,n,u,s,l)}else i.changeToUnsupported();return setTimeout(function(){i._validationHandler=e._validationHandler}),i}return v(t,e),T(t,[{key:"processConfiguration",value:function(e,n){var r,i,a,o,s,l,u="object"==w(n)?n:{},c="object"==w(u.webSpeech)?u.webSpeech:{},d=u.azure||{},f=_(_({displayInterimResults:null!==(r=u.displayInterimResults)&&void 0!==r?r:void 0,textColor:null!==(i=u.textColor)&&void 0!==i?i:void 0,translations:null!==(a=u.translations)&&void 0!==a?a:void 0,commands:null!==(o=u.commands)&&void 0!==o?o:void 0,events:null!==(s=u.events)&&void 0!==s?s:void 0},c),d),p=null==(l=u.commands)?void 0:l.submit;return p&&(f.onPreResult=function(t){return t.toLowerCase().includes(p)?(setTimeout(function(){var t;return null==(t=e.submit)?void 0:t.call(e)}),Ba.endCommandMode(),{restart:!0,removeNewText:!0}):null}),u.submitAfterSilence&&(this._silenceSubmit=new Fa(u.submitAfterSilence,u.stopAfterSubmit)),{serviceName:t.getServiceName(u),processedConfig:f}}},{key:"buttonClick",value:function(e,t,n,r){var i=this,a=null==r?void 0:r.events;e.removePlaceholderStyle(),Ba.toggle(n,_({insertInCursorLocation:!1,element:t?e.inputElementRef:void 0,onError:function(){var e;i.onError(),null==(e=i._silenceSubmit)||e.clearSilenceTimeout()},onStart:function(){var e;i.changeToActive(),null==(e=null==a?void 0:a.onStart)||e.call(a)},onStop:function(){var e,t,n;null==(e=i._validationHandler)||e.call(i),null==(t=i._silenceSubmit)||t.clearSilenceTimeout(),i.changeToDefault(),null==(n=null==a?void 0:a.onStop)||n.call(a)},onPauseTrigger:function(t){var n,r;null==(n=i._silenceSubmit)||n.onPause(t,e,i.elementRef.onclick),null==(r=null==a?void 0:a.onPauseTrigger)||r.call(a,t)},onPreResult:function(e,t){var n;null==(n=null==a?void 0:a.onPreResult)||n.call(a,e,t)},onResult:function(t,n){var r,o,s;n&&(null==(r=i._validationHandler)||r.call(i)),null==(o=i._silenceSubmit)||o.resetSilenceTimeout(e,i.elementRef.onclick),null==(s=null==a?void 0:a.onResult)||s.call(a,t,n)},onCommandModeTrigger:function(e){var t;i.onCommandModeTrigger(e),null==(t=null==a?void 0:a.onCommandModeTrigger)||t.call(a,e)}},r))}},{key:"onCommandModeTrigger",value:function(e){e?this.changeToCommandMode():this.changeToActive()}},{key:"onError",value:function(){this._addErrorMessage("speechToText","speech input error")}}],[{key:"getServiceName",value:function(e){return e.azure?"azure":"webspeech"}},{key:"toggleSpeechAfterSubmit",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.click(),n||setTimeout(function(){return e.click()},t.MICROPHONE_RESET_TIMEOUT_MS)}}])}(Ri);Ua.MICROPHONE_RESET_TIMEOUT_MS=300;var ja=Ua,za=function(){function e(t,n,r,i,a){var o=this;x(this,e),this._attachments=[],this._fileCountLimit=99,this._acceptedFormat="",this._hiddenAttachments=new Set,r.maxNumberOfFiles&&(this._fileCountLimit=r.maxNumberOfFiles),this._toggleContainerDisplay=i,this._fileAttachmentsContainerRef=a,r.acceptedFormats&&(this._acceptedFormat=r.acceptedFormats),setTimeout(function(){o._validationHandler=t._validationHandler,o._onInput=n.onInput})}return T(e,[{key:"attemptAddFile",value:function(t,n){var r;return!!e.isFileTypeValid(t,this._acceptedFormat)&&(this.addAttachmentBasedOnType(t,n,!0),null==(r=this._onInput)||r.call(this,!0),!0)}},{key:"addAttachmentBasedOnType",value:function(t,n,r){var i=e.getTypeFromBlob(t);if("image"===i){var a=e.createImageAttachment(n);this.addFileAttachment(t,"image",a,r)}else if("audio"===i){var o=qa.createAudioAttachment(n);this.addFileAttachment(t,"audio",o,r)}else{var s=e.createAnyFileAttachment(t.name);this.addFileAttachment(t,"any",s,r)}}},{key:"addFileAttachment",value:function(t,n,r,i){var a,o=e.createContainer(r);if(this._attachments.length>=this._fileCountLimit){var s=this._attachments[this._attachments.length-1].removeButton;null==s||s.click();var l=this._fileAttachmentsContainerRef.children;this._fileAttachmentsContainerRef.insertBefore(o,l[0])}else this._fileAttachmentsContainerRef.appendChild(o);var u={file:t,attachmentContainerElement:o,fileType:n};return i&&(u.removeButton=this.createRemoveAttachmentButton(u),o.appendChild(u.removeButton)),this._toggleContainerDisplay(!0),this._attachments.push(u),this._fileAttachmentsContainerRef.scrollTop=this._fileAttachmentsContainerRef.scrollHeight,null==(a=this._validationHandler)||a.call(this),u}},{key:"createRemoveAttachmentButton",value:function(e){var t=document.createElement("div");t.classList.add("remove-file-attachment-button"),t.onclick=this.removeAttachment.bind(this,e);var n=document.createElement("div");return n.classList.add("x-icon"),n.innerText="\xd7",t.appendChild(n),t}},{key:"removeAttachment",value:function(e,t){var n,r;null==(n=this._onInput)||n.call(this,!(null==t||!t.isTrusted));var i=this._attachments.findIndex(function(t){return t===e}),a=this._attachments[i].attachmentContainerElement;this._attachments.splice(i,1),qa.stopAttachmentPlayback(a),a.remove(),this._toggleContainerDisplay(!1),null==(r=this._validationHandler)||r.call(this)}},{key:"getFiles",value:function(){return Array.from(this._attachments).map(function(e){return{file:e.file,type:e.fileType}})}},{key:"hideAttachments",value:function(){var e=this;this._hiddenAttachments.clear(),this._attachments.forEach(function(t){setTimeout(function(){var e;return null==(e=t.removeButton)?void 0:e.click()}),e._hiddenAttachments.add(t)})}},{key:"removeAttachments",value:function(){this._attachments.forEach(function(e){setTimeout(function(){var t;return null==(t=e.removeButton)?void 0:t.click()})}),this._hiddenAttachments.clear()}},{key:"readdAttachments",value:function(){var e,t=this;Array.from(this._hiddenAttachments).forEach(function(e){t._fileAttachmentsContainerRef.appendChild(e.attachmentContainerElement),t._attachments.push(e)}),null==(e=this._onInput)||e.call(this,!1),this._hiddenAttachments.clear()}}],[{key:"isFileTypeValid",value:function(e,t){if(""===t)return!0;for(var n=t.split(","),r=0;r<n.length;r++){var i=n[r].trim();if(e.type===i)return!0;if(i.startsWith(".")){var a=i.slice(1);if(e.name.endsWith(a))return!0}else{if(e.name.endsWith(i))return!0;if(i.endsWith("/*")&&e.type.startsWith(i.slice(0,-2)))return!0}}return!1}},{key:"getTypeFromBlob",value:function(e){var t=e.type;return t.startsWith("image")?"image":t.startsWith("audio")?"audio":"any"}},{key:"createImageAttachment",value:function(e){var t=new Image;return t.src=e,t.classList.add("image-attachment"),t}},{key:"createAnyFileAttachment",value:function(e){var t=document.createElement("div");t.classList.add("border-bound-attachment"),U.IS_SAFARI&&t.classList.add("border-bound-attachment-safari");var n=document.createElement("div");n.classList.add("any-file-attachment-text");var r=document.createElement("div");return r.classList.add("file-attachment-text-container"),r.appendChild(n),n.textContent=e,t.appendChild(r),t}},{key:"createContainer",value:function(e){var t=document.createElement("div");return t.classList.add("file-attachment"),t.appendChild(e),t}}])}(),Ha=function(e){function t(e,n,r,i,a){return x(this,t),f(this,t,[e,n,r,i,a])}return v(t,e),T(t,[{key:"createTimer",value:function(e,n){var r=this,i=0,a=void 0!==n&&n<t.TIMER_LIMIT_S?n:t.TIMER_LIMIT_S;return setInterval(function(){var t;(i+=1)===a&&(null==(t=r.stopPlaceholderCallback)||t.call(r),r.clearTimer()),600===i&&e.classList.add("audio-placeholder-text-4-digits");var n=Math.floor(i/60),o=(i%60).toString().padStart(2,"0");e.textContent="".concat(n,":").concat(o)},1e3)}},{key:"createPlaceholderAudioAttachment",value:function(e){var n=t.createAudioContainer(),r=document.createElement("div");r.classList.add("audio-placeholder-text-3-digits");var i=document.createElement("div");i.classList.add("file-attachment-text-container","audio-placeholder-text-3-digits-container"),i.appendChild(r);var a=Ln.createSVGElement(Or);return a.classList.add("attachment-icon","stop-icon","not-removable-attachment-icon"),r.textContent="0:00",this._activePlaceholderTimer=this.createTimer(r,e),n.appendChild(i),this.addPlaceholderAudioAttachmentEvents(n,a,i),n}},{key:"addPlaceholderAudioAttachmentEvents",value:function(e,t,n){var r=this;e.addEventListener("mouseenter",function(){return e.replaceChildren(t)});e.addEventListener("mouseleave",function(){return e.replaceChildren(n)});e.addEventListener("click",function(){var e;return null==(e=r.stopPlaceholderCallback)?void 0:e.call(r)})}},{key:"addPlaceholderAttachment",value:function(e,t){var n=this.createPlaceholderAudioAttachment(t);this._activePlaceholderAttachment=this.addFileAttachment(new File([],""),"audio",n,!1),this.stopPlaceholderCallback=e}},{key:"completePlaceholderAttachment",value:function(e,n){var r=this._activePlaceholderAttachment;r&&(r.file=e,t.addAudioElements(r.attachmentContainerElement.children[0],n),r.removeButton=this.createRemoveAttachmentButton(r),r.attachmentContainerElement.appendChild(r.removeButton),this._activePlaceholderAttachment=void 0,this.clearTimer())}},{key:"removePlaceholderAttachment",value:function(){this._activePlaceholderAttachment&&(this.removeAttachment(this._activePlaceholderAttachment),this._activePlaceholderAttachment=void 0,this.clearTimer())}},{key:"clearTimer",value:function(){void 0!==this._activePlaceholderTimer&&(clearInterval(this._activePlaceholderTimer),this._activePlaceholderTimer=void 0,this.stopPlaceholderCallback=void 0)}}],[{key:"createAudioContainer",value:function(){var e=document.createElement("div");return e.classList.add("border-bound-attachment","audio-attachment-icon-container"),U.IS_SAFARI&&e.classList.add("border-bound-attachment-safari"),e}},{key:"addAudioElements",value:function(e,t){var n=e.parentElement?Q.cloneElement(e):e,r=document.createElement("audio");r.src=t;var i=Ln.createSVGElement(Ir);i.classList.add("attachment-icon","play-icon");var a=Ln.createSVGElement(Or);a.classList.add("attachment-icon","stop-icon"),n.replaceChildren(i),r.onplay=function(){n.replaceChildren(a)},r.onpause=function(){n.replaceChildren(i),r.currentTime=0},r.onended=function(){n.replaceChildren(i)},n.onclick=function(){r.paused?r.play():r.pause()}}},{key:"createAudioAttachment",value:function(e){var n=t.createAudioContainer();return t.addAudioElements(n,e),n}},{key:"stopAttachmentPlayback",value:function(e){var t,n,r;null!=(r=null==(n=null==(t=e.children[0])?void 0:t.children)?void 0:n[0])&&r.classList.contains("stop-icon")&&e.children[0].click()}}])}(za);Ha.TIMER_LIMIT_S=5999;var qa=Ha,Va=function(){return T(function e(){x(this,e)},null,[{key:"create",value:function(e,t,n,r,i,a){return"audio"===a?new qa(e,t,n,r,i):new za(e,t,n,r,i)}}])}(),Ga=function(){function e(t,n,r){x(this,e),this._fileAttachmentsTypes=[],this.elementRef=this.createAttachmentContainer();var i="object"==w(r)&&!!r.displayFileAttachmentContainer;this.toggleContainerDisplay(i),t.appendChild(this.elementRef),n&&Object.assign(this.elementRef.style,n)}return T(e,[{key:"addType",value:function(e,t,n,r){var i=Va.create(e,t,n,this.toggleContainerDisplay.bind(this),this.elementRef,r);return this._fileAttachmentsTypes.push(i),i}},{key:"createAttachmentContainer",value:function(){var e=document.createElement("div");return e.id="file-attachment-container",e}},{key:"toggleContainerDisplay",value:function(e){e?this.elementRef.style.display="block":0===this.elementRef.children.length&&(this.elementRef.style.display="none")}},{key:"getAllFileData",value:function(){var e=this._fileAttachmentsTypes.map(function(e){return e.getFiles()}).flat();return e.length>0?e:void 0}},{key:"completePlaceholders",value:function(){var e=k(y().mark(function e(){return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this._fileAttachmentsTypes.map(function(){var e=k(y().mark(function e(t){var n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null==(n=t.stopPlaceholderCallback)?void 0:n.call(t));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"addFilesToAnyType",value:function(t){e.addFilesToType(t,this._fileAttachmentsTypes)}},{key:"hideFiles",value:function(){this._fileAttachmentsTypes.forEach(function(e){return e.hideAttachments()}),this.elementRef.replaceChildren(),this.toggleContainerDisplay(!1)}},{key:"removeHiddenFiles",value:function(){this._fileAttachmentsTypes.forEach(function(e){return e.removeAttachments()})}},{key:"readdHiddenFiles",value:function(){this._fileAttachmentsTypes.forEach(function(e){return e.readdAttachments()}),this.toggleContainerDisplay(!0)}},{key:"getNumberOfTypes",value:function(){return this._fileAttachmentsTypes.length}}],[{key:"addFilesToType",value:function(e,t){e.forEach(function(e){var n=new FileReader;n.readAsDataURL(e),n.onload=function(n){for(var r=0;r<t.length&&!t[r].attemptAddFile(e,n.target.result);r+=1);}})}}])}(),Wa=function(){function e(t,n,r){x(this,e),this._isOpen=!1,this._contentRef=e.createModalContent(n,null==r?void 0:r.backgroundColor),this._buttonPanel=e.createButtonPanel(null==r?void 0:r.backgroundColor),this._elementRef=e.createContainer(this._contentRef,r),this._elementRef.appendChild(this._buttonPanel),t.appendChild(this._elementRef),this._backgroundPanelRef=e.createDarkBackgroundPanel(),t.appendChild(this._backgroundPanelRef),this.addWindowEvents(t)}return T(e,[{key:"isOpen",value:function(){return this._isOpen}},{key:"addButtons",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){kr.addAttributes(t),e._buttonPanel.appendChild(t)})}},{key:"close",value:function(){var t=this;this._elementRef.classList.remove("show-modal"),this._elementRef.classList.add("hide-modal"),this._backgroundPanelRef.classList.remove("show-modal-background"),this._backgroundPanelRef.classList.add("hide-modal-background"),this._isOpen=!1,setTimeout(function(){t._elementRef.style.display="none",t._backgroundPanelRef.style.display="none"},e.MODAL_CLOSE_TIMEOUT_MS)}},{key:"displayModalElements",value:function(){this._elementRef.style.display="flex",this._elementRef.classList.remove("hide-modal"),this._elementRef.classList.add("show-modal"),this._backgroundPanelRef.style.display="block",this._backgroundPanelRef.classList.remove("hide-modal-background"),this._backgroundPanelRef.classList.add("show-modal-background"),this._isOpen=!0}},{key:"openTextModal",value:function(e){this._contentRef.innerHTML=e,this.displayModalElements()}},{key:"addCloseButton",value:function(t,n,r){var i=this,a=n?e.createSVGButton(t):e.createTextButton(t);return this.addButtons(a),a.onclick=function(){i.close(),setTimeout(function(){null==r||r()},140)},a}},{key:"addWindowEvents",value:function(e){this.keyDownEvent=this.windowKeyDown.bind(this,e),window.addEventListener("keydown",this.keyDownEvent)}},{key:"windowKeyDown",value:function(e,t){var n,r;!e.isConnected&&this.keyDownEvent?window.removeEventListener("keydown",this.keyDownEvent):this._isOpen&&(t.key===j.ESCAPE?(this.close(),null==(n=this.extensionCloseCallback)||n.call(this)):t.key===j.ENTER&&(this.close(),null==(r=this.extensionCloseCallback)||r.call(this)))}}],[{key:"createContainer",value:function(e,t){var n=document.createElement("div");return n.classList.add("modal"),n.appendChild(e),t&&delete t.backgroundColor,Object.assign(n.style,t),n}},{key:"createModalContent",value:function(e,t){var n,r=document.createElement("div");return(n=r.classList).add.apply(n,u(e)),t&&(r.style.backgroundColor=t),document.createElement("div").appendChild(r),r}},{key:"createButtonPanel",value:function(e){var t=document.createElement("div");return t.classList.add("modal-button-panel"),e&&(t.style.backgroundColor=e),t}},{key:"createDarkBackgroundPanel",value:function(){var e=document.createElement("div");return e.id="modal-background-panel",e}},{key:"createTextButton",value:function(e){var t=document.createElement("div");return t.classList.add("modal-button"),t.textContent=e,t}},{key:"createSVGButton",value:function(e){var t=document.createElement("div");t.classList.add("modal-button","modal-svg-button");var n=Ln.createSVGElement(e);return n.classList.add("modal-svg-button-icon"),t.appendChild(n),t}},{key:"createTextModalFunc",value:function(t,n,r){var i;if("object"==w(n)&&null!=(i=n.files)&&i.infoModal){var a=new e(t,["modal-content"],n.files.infoModal.containerStyle);return a.addCloseButton("OK",!1,r),a.openTextModal.bind(a,n.infoModalTextMarkUp||"")}}}])}();Wa.MODAL_CLOSE_TIMEOUT_MS=190;var Ka=Wa,Ja=function(e){function t(e,n,r,i,a,o){var s,l,u,c,d,p,h,m,v,g,y;x(this,t);var b=null==(l=null==r?void 0:r.button)?void 0:l.position,k=(null==(d=null==(c=null==(u=null==r?void 0:r.button)?void 0:u.styles)?void 0:c.text)?void 0:d.content)||o,S=B.tryCreateConfig("Upload File",null==(p=null==r?void 0:r.button)?void 0:p.tooltip),_=(s=f(this,t,[t.createButtonElement(),a,b,S,r.button,k])).createInnerElementsForStates(i,s.customStyles);return s._inputElement=t.createInputElement(null==(h=null==r?void 0:r.files)?void 0:h.acceptedFormats),s.addClickEvent(e,r),s.changeElementsByState(_.styles),s.reapplyStateStyle("styles"),s._fileAttachmentsType=n,s._openModalOnce=!1===(null==(v=null==(m=r.files)?void 0:m.infoModal)?void 0:v.openModalOnce)||null==(y=null==(g=r.files)?void 0:g.infoModal)?void 0:y.openModalOnce,s}return v(t,e),T(t,[{key:"createInnerElementsForStates",value:function(e,t){return{styles:this.createInnerElements(e,"styles",t)}}},{key:"triggerImportPrompt",value:function(e){e.onchange=this.import.bind(this,e),e.click()}},{key:"import",value:function(e){Ga.addFilesToType(Array.from(e.files||[]),[this._fileAttachmentsType]),e.value=""}},{key:"addClickEvent",value:function(e,t){var n=this.triggerImportPrompt.bind(this,this._inputElement),r=Ka.createTextModalFunc(e,t,n);this.elementRef.onclick=this.click.bind(this,r)}},{key:"click",value:function(e){!e||void 0!==this._openModalOnce&&!0!==this._openModalOnce?this.triggerImportPrompt(this._inputElement):(e(),!0===this._openModalOnce&&(this._openModalOnce=!1))}}],[{key:"createInputElement",value:function(e){var t=document.createElement("input");return t.type="file",t.accept=e||"",t.hidden=!0,t.multiple=!0,t}},{key:"createButtonElement",value:function(){var e=document.createElement("div");return e.classList.add("input-button"),e}}])}(Cr),$a=function(){function e(){x(this,e)}return T(e,null,[{key:"create",value:function(t,n,r){var i=e.createElement(r);e.addEvents(i,t,n),t.appendChild(i)}},{key:"createElement",value:function(e){var t=document.createElement("div");return t.id="drag-and-drop","object"==w(e)&&Object.assign(t.style,e),t}},{key:"addEvents",value:function(t,n,r){n.ondragenter=function(n){n.preventDefault(),e.display(t)},t.ondragleave=function(n){n.preventDefault(),e.hide(t)},t.ondragover=function(e){e.preventDefault()},t.ondrop=function(n){n.preventDefault(),e.uploadFile(r,n),e.hide(t)}}},{key:"uploadFile",value:function(e,t){var n,r=null==(n=t.dataTransfer)?void 0:n.files;r&&e.addFilesToAnyType(Array.from(r))}},{key:"display",value:function(e){e.style.display="block"}},{key:"hide",value:function(e){e.style.display="none"}},{key:"isEnabled",value:function(e,t){return(void 0===t||!1!==t)&&(!!t||e.getNumberOfTypes()>0)}}])}(),Xa=function(){function e(){x(this,e)}return T(e,null,[{key:"validate",value:function(e,t,n,r,i){var a=e(n,r,i);return a?t.changeToSubmitIcon():t.changeToDisabledIcon(),a}},{key:"useValidationFunc",value:function(){var t=k(y().mark(function t(n,r,i,a){var o,s,l;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.isTextInputEmpty()?"":r.inputElementRef.textContent,t.next=3,i.completePlaceholders();case 3:return s=i.getAllFileData(),l=null==s?void 0:s.map(function(e){return e.file}),t.abrupt("return",e.validate(n,a,o,l));case 5:case"end":return t.stop()}},t)}));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"useValidationFuncProgrammatic",value:function(){var t=k(y().mark(function t(n,r,i){var a,o;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=null==(a=r.files)?void 0:a.map(function(e){return e.file}),t.abrupt("return",e.validate(n,i,r.text,o,!0));case 2:case"end":return t.stop()}},t)}));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"validateWebsocket",value:function(e,t){var n=e.websocket,r=e.connectSettings;return!(n&&r.url!==gn.URL&&!yn.canSendMessage(n))||(t.changeToDisabledIcon(),!1)}},{key:"attach",value:function(t,n,r,i,a){var o=t.validateInput||ae.processValidateInput(t);t._validationHandler=function(){var t=k(y().mark(function t(s){var l;return y().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a.status.loadingActive&&!a.status.requestInProgress&&!0!==n.isSubmitProgrammaticallyDisabled&&e.validateWebsocket(n,a)){t.next=2;break}return t.abrupt("return",!1);case 2:return l=o||n.canSendMessage,t.abrupt("return",l?s?e.useValidationFuncProgrammatic(l,s,a):e.useValidationFunc(l,r,i,a):null);case 4:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}}])}(),Ya=function(){return T(function e(){x(this,e)},null,[{key:"getFileName",value:function(e,t){var n=new Date,r=String(n.getHours()).padStart(2,"0"),i=String(n.getMinutes()).padStart(2,"0"),a=String(n.getSeconds()).padStart(2,"0");return"".concat(e,"-").concat(r,"-").concat(i,"-").concat(a,".").concat(t)}}])}(),Qa=function(e){function t(e,n){var r,i,a;return x(this,t),(r=f(this,t,[n.button]))._waitingForBrowserApproval=!1,r._audioType=e,r._extension=(null==(i=n.files)?void 0:i.format)||"mp3",r._maxDurationSeconds=null==(a=n.files)?void 0:a.maxDurationSeconds,r.elementRef.onclick=r.buttonClick.bind(p(r)),r}return v(t,e),T(t,[{key:"buttonClick",value:function(){this._waitingForBrowserApproval||(this.isActive?this.stop():(this._waitingForBrowserApproval=!0,this.record()))}},{key:"stop",value:function(){var e=this;return new Promise(function(t){var n,r;e.changeToDefault(),null==(n=e._mediaRecorder)||n.stop(),null==(r=e._mediaStream)||r.getTracks().forEach(function(e){return e.stop()}),setTimeout(function(){t()},10)})}},{key:"record",value:function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){e.changeToActive(),e._mediaRecorder=new MediaRecorder(t),e._audioType.addPlaceholderAttachment(e.stop.bind(e),e._maxDurationSeconds),e._mediaStream=t,e._mediaRecorder.addEventListener("dataavailable",function(t){e.createFile(t)}),e._mediaRecorder.start()}).catch(function(t){console.error(t),e.stop()}).finally(function(){e._waitingForBrowserApproval=!1})}},{key:"createFile",value:function(e){var t=this,n=new Blob([e.data],{type:"audio/".concat(this._extension)}),r=Ya.getFileName(this._newFilePrefix||"audio",this._extension),i=new File([n],r,{type:n.type}),a=new FileReader;a.readAsDataURL(i),a.onload=function(e){t._audioType.completePlaceholderAttachment(i,e.target.result)}}}])}(Ri),Za=function(){function e(){x(this,e)}return T(e,null,[{key:"resetSubmit",value:function(e,t){t?e.unsetCustomStateStyles(["loading","submit"]):e.unsetCustomStateStyles(["stop","loading","submit"]),e.reapplyStateStyle("submit")}},{key:"overwriteDefaultStyleWithSubmit",value:function(e,t){if(e.submit){var n=JSON.parse(JSON.stringify(e[t]||{}));Mr.overwritePropertyObjectFromAnother(n,e.submit,["container","default"]),Mr.overwritePropertyObjectFromAnother(n,e.submit,["text","styles","default"]),Mr.overwritePropertyObjectFromAnother(n,e.submit,["svg","styles","default"]),e[t]=n}}},{key:"setUpDisabledButton",value:function(t){Mr.setPropertyValueIfDoesNotExist(t,["submit","container","default","backgroundColor"],""),Mr.setPropertyValueIfDoesNotExist(t,["disabled","container","default","backgroundColor"],"unset"),Mr.setPropertyValueIfDoesNotExist(t.submit,["svg","styles","default","filter"],""),Mr.setPropertyValueIfDoesNotExist(t.disabled,["svg","styles","default","filter"],"brightness(0) saturate(100%) invert(70%) sepia(0%) saturate(5564%) hue-rotate(207deg) brightness(100%) contrast(97%)"),Mr.setPropertyValueIfDoesNotExist(t.disabled,["text","styles","default","color"],"grey"),e.overwriteDefaultStyleWithSubmit(t,"disabled")}},{key:"process",value:function(t){var n=JSON.parse(JSON.stringify(t||{}));return e.overwriteDefaultStyleWithSubmit(n,"loading"),e.overwriteDefaultStyleWithSubmit(n,"stop"),null!=t&&t.alwaysEnabled||e.setUpDisabledButton(n),n}}])}(),eo=function(e){function t(e,n,r,i,a,o){var s;x(this,t);var l=Za.process(e.submitButtonStyles),u=B.tryCreateConfig("Submit",null==l?void 0:l.tooltip);return(s=f(this,t,[t.createButtonContainerElement(),'<?xml version="1.0" standalone="no"?>\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">\n<svg xmlns="http://www.w3.org/2000/svg" stroke="currentColor" fill="none" stroke-width="1" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">\n  <line x1="22" y1="2" x2="11" y2="14"></line>\n  <polygon points="22 2 15 22 11 14 2 10 22 2"></polygon>\n</svg>\n',null==l?void 0:l.position,u,l]))._isSVGLoadingIconOverriden=!1,s.status={requestInProgress:!1,loadingActive:!1},s._messages=r,s._textInput=n,s._fileAttachments=a,s._innerElements=s.createInnerElementsForStates(),s._abortStream=new AbortController,s._stopClicked={listener:function(){}},s._serviceIO=i,s._alwaysEnabled=!(null==l||!l.alwaysEnabled),e.disableSubmitButton=s.disableSubmitButton.bind(p(s),i),s.attemptOverwriteLoadingStyle(e),o.microphone&&s.setUpSpeechToText(o.microphone.button,e.speechToText),setTimeout(function(){var t;s._validationHandler=e._validationHandler,s.assignHandlers(s._validationHandler),null==(t=s._validationHandler)||t.call(p(s))}),s}return v(t,e),T(t,[{key:"createInnerElementsForStates",value:function(){var e=this.createCustomElements(),n=e.submit,r=e.loading,i=e.stop;return{submit:n,loading:r||[t.createLoadingIconElement()],stop:i||[t.createStopIconElement()],disabled:this.createDisabledIconElement(n)}}},{key:"createCustomElements",value:function(){var e=this,t=Er.createCustomElements("submit",this.svg,this.customStyles),n={loading:void 0,stop:void 0};return Object.keys(n).forEach(function(t){var r=t,i=Er.createCustomElements(r,e.svg,e.customStyles);i&&(n[r]=i)}),n.submit=t||this.buildDefaultIconElement("submit-icon"),n}},{key:"createDisabledIconElement",value:function(e){return Er.createCustomElements("disabled",this.svg,this.customStyles)||[e[0].cloneNode(!0)]}},{key:"attemptOverwriteLoadingStyle",value:function(e){var t,n,r,i,a,o,s,l,u;if(!(null!=(n=null==(t=this.customStyles)?void 0:t.submit)&&n.svg||null!=(a=null==(i=null==(r=this.customStyles)?void 0:r.loading)?void 0:i.svg)&&a.content||null!=(l=null==(s=null==(o=this.customStyles)?void 0:o.loading)?void 0:s.text)&&l.content)&&(void 0===e.displayLoadingBubble||!0===e.displayLoadingBubble)){var c=document.createElement("style");c.textContent="\n        .loading-button > * {\n          filter: brightness(0) saturate(100%) invert(72%) sepia(0%) saturate(3044%) hue-rotate(322deg) brightness(100%)\n            contrast(96%) !important;\n        }",null==(u=e.shadowRoot)||u.appendChild(c),this._isSVGLoadingIconOverriden=!0}}},{key:"assignHandlers",value:function(e){this._serviceIO.completionsHandlers={onFinish:this.resetSubmit.bind(this,e)},this._serviceIO.streamHandlers={onOpen:this.changeToStopIcon.bind(this),onClose:this.resetSubmit.bind(this,e),abortStream:this._abortStream,stopClicked:this._stopClicked};var t=this._serviceIO.stream;"object"==w(t)&&"number"==typeof t.simulation&&(this._serviceIO.streamHandlers.simulationInterim=t.simulation)}},{key:"setUpSpeechToText",value:function(e,t){this._microphoneButton=e,this._stopSTTAfterSubmit="object"==w(t)&&t.stopAfterSubmit}},{key:"resetSubmit",value:function(e){this.status.requestInProgress=!1,this.status.loadingActive=!1,e()}},{key:"submitFromInput",value:function(){var e=k(y().mark(function e(){var t,n;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fileAttachments.completePlaceholders();case 2:t=this._fileAttachments.getAllFileData(),this._textInput.isTextInputEmpty()?this.attemptSubmit({text:"",files:t}):(n=this._textInput.inputElementRef.innerText.trim(),this.attemptSubmit({text:n,files:t}));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"programmaticSubmit",value:function(){var e=k(y().mark(function e(t){var n,r=this;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"string"==typeof t&&(t=ae.processSubmitUserMessage(t)),n={text:t.text},t.files&&(n.files=Array.from(t.files).map(function(e){return{file:e,type:za.getTypeFromBlob(e)}})),t.custom&&(n.custom=t.custom),setTimeout(function(){return r.attemptSubmit(n,!0)});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"attemptSubmit",value:function(){var e=k(y().mark(function e(t){var n,r,i,a,o,s,l,u=arguments;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]&&u[1],e.next=3,null==(r=this._validationHandler)?void 0:r.call(this,n?t:void 0);case 3:if(e.t0=e.sent,e.t1=!1,e.t0!==e.t1){e.next=7;break}return e.abrupt("return");case 7:if(this.changeToLoadingIcon(),this._textInput.clear(),e.t2="boolean"!=typeof this._messages.focusMode&&null!=(i=this._messages.focusMode)&&i.fade,!e.t2){e.next=13;break}return e.next=13,Wt.fadeAnimation(this._messages.elementRef,this._messages.focusMode.fade);case 13:return e.next=15,this.addNewMessage(t);case 15:return this._serviceIO.isWebModel()||this._messages.addLoadingMessage(),s=null==(a=t.files)?void 0:a.map(function(e){return e.file}),l={text:""===t.text?void 0:t.text,files:s},e.next=19,this._serviceIO.callAPI(l,this._messages);case 19:null==(o=this._fileAttachments)||o.hideFiles();case 20:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addNewMessage",value:function(){var e=k(y().mark(function e(t){var n,r,i,a;return y().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.text,r=t.files,i=t.custom,a={role:tn.USER_ROLE,custom:i},n&&(a.text=n),e.t0=r,!e.t0){e.next=8;break}return e.next=7,this._messages.addMultipleFiles(r,this._fileAttachments);case 7:a.files=e.sent;case 8:this._serviceIO.sessionId&&(a._sessionId=this._serviceIO.sessionId),Object.keys(a).length>0&&this._messages.addNewMessage(a);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"stopStream",value:function(){var e;this._abortStream.abort(),null==(e=this._stopClicked)||e.listener(),this._validationHandler&&this.resetSubmit(this._validationHandler)}},{key:"changeToStopIcon",value:function(){this._serviceIO.websocket||(this.elementRef.classList.remove(t.LOADING_CLASS,t.DISABLED_CLASS,t.SUBMIT_CLASS),kr.removeAriaAttributes(this.elementRef),this.changeElementsByState(this._innerElements.stop),this.reapplyStateStyle("stop",["loading","submit"]),this.elementRef.onclick=this.stopStream.bind(this),this.status.loadingActive=!1)}},{key:"changeToLoadingIcon",value:function(){this._serviceIO.websocket||(this._isSVGLoadingIconOverriden||this.changeElementsByState(this._innerElements.loading),this.elementRef.classList.remove(t.SUBMIT_CLASS,t.DISABLED_CLASS),kr.removeAriaDisabled(this.elementRef),this.elementRef.classList.add(t.LOADING_CLASS),kr.addAriaBusy(this.elementRef),this.reapplyStateStyle("loading",["submit"]),this.elementRef.onclick=function(){},this.status.requestInProgress=!0,this.status.loadingActive=!0)}},{key:"changeToSubmitIcon",value:function(){var e=this;this.elementRef.classList.contains(t.SUBMIT_CLASS)||(this.elementRef.classList.remove(t.LOADING_CLASS,t.DISABLED_CLASS),kr.removeAriaAttributes(this.elementRef),this.elementRef.classList.add(t.SUBMIT_CLASS),this.changeElementsByState(this._innerElements.submit),Za.resetSubmit(this,this.status.loadingActive),this.elementRef.onclick=function(){var t;e.submitFromInput(),null!=(t=e._microphoneButton)&&t.isActive&&ja.toggleSpeechAfterSubmit(e._microphoneButton.elementRef,!!e._stopSTTAfterSubmit)})}},{key:"changeToDisabledIcon",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._alwaysEnabled&&!e?this.changeToSubmitIcon():this.elementRef.classList.contains(t.DISABLED_CLASS)||(this.elementRef.classList.remove(t.LOADING_CLASS,t.SUBMIT_CLASS),kr.removeAriaBusy(this.elementRef),this.elementRef.classList.add(t.DISABLED_CLASS),kr.addAriaDisabled(this.elementRef),this.changeElementsByState(this._innerElements.disabled),this.reapplyStateStyle("disabled",["submit"]),this.elementRef.onclick=function(){})}},{key:"disableSubmitButton",value:function(e,t){var n;e.isSubmitProgrammaticallyDisabled=!1!==t,!this.status.requestInProgress&&!this.status.loadingActive&&(!1===t?null==(n=this._validationHandler)||n.call(this):this.changeToDisabledIcon(!0))}}],[{key:"createButtonContainerElement",value:function(){var e=document.createElement("div");return e.classList.add("input-button"),e}},{key:"createLoadingIconElement",value:function(){var e=document.createElement("div");return e.classList.add("loading-submit-button"),e}},{key:"createStopIconElement",value:function(){var e=document.createElement("div");return e.id="stop-icon",e}}])}(Cr);eo.SUBMIT_CLASS="submit-button",eo.LOADING_CLASS="loading-button",eo.DISABLED_CLASS="disabled-button";var to=eo,no=function(e){function t(e,n,r,i){var a;x(this,t),(a=f(this,t,[e,["modal-content","modal-camera-content"],r]))._stopped=!1,a._format="image/png",a._canvas=document.createElement("canvas"),a._canvas.classList.add("camera-modal-canvas");var o=a.addButtonsAndTheirEvents(n),s=o.captureButton,l=o.submitButton;return a._captureButton=s,a._submitButton=l,a._captureIcon=a._captureButton.children[0],a._refreshIcon=Ln.createSVGElement('<?xml version="1.0" encoding="utf-8"?>\n<svg viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg">\n  <path d="M27.1 14.313V5.396L24.158 8.34c-2.33-2.325-5.033-3.503-8.11-3.503C9.902 4.837 4.901 9.847 4.899 16c.001 6.152 5.003 11.158 11.15 11.16 4.276 0 9.369-2.227 10.836-8.478l.028-.122h-3.23l-.022.068c-1.078 3.242-4.138 5.421-7.613 5.421a8 8 0 0 1-5.691-2.359A7.993 7.993 0 0 1 8 16.001c0-4.438 3.611-8.049 8.05-8.049 2.069 0 3.638.58 5.924 2.573l-3.792 3.789H27.1z"/>\n</svg>\n'),a._refreshIcon.classList.add("modal-svg-button-icon","modal-svg-refresh-icon"),"jpeg"===(null==i?void 0:i.format)&&(a._format="image/jpeg"),null!=i&&i.dimensions&&(a._dimensions=i.dimensions),a._contentRef.appendChild(a._canvas),a.extensionCloseCallback=a.stop,a}return v(t,e),T(t,[{key:"addButtonsAndTheirEvents",value:function(e){var t=Ka.createSVGButton('<?xml version="1.0" encoding="utf-8"?>\n<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">\n  <path d="M0 16q0 3.264 1.28 6.208t3.392 5.12 5.12 3.424 6.208 1.248 6.208-1.248 5.12-3.424 3.392-5.12 1.28-6.208-1.28-6.208-3.392-5.12-5.088-3.392-6.24-1.28q-3.264 0-6.208 1.28t-5.12 3.392-3.392 5.12-1.28 6.208zM4 16q0-3.264 1.6-6.016t4.384-4.352 6.016-1.632 6.016 1.632 4.384 4.352 1.6 6.016-1.6 6.048-4.384 4.352-6.016 1.6-6.016-1.6-4.384-4.352-1.6-6.048z"></path>\n</svg>\n');t.classList.add("modal-svg-camera-button"),t.children[0].classList.add("modal-svg-camera-icon");var n=this.addCloseButton('<?xml version="1.0" encoding="utf-8"?>\n<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg">\n  <path d="M195.2 195.2a64 64 0 0 1 90.496 0L512 421.504 738.304 195.2a64 64 0 0 1 90.496 90.496L602.496 512 828.8 738.304a64 64 0 0 1-90.496 90.496L512 602.496 285.696 828.8a64 64 0 0 1-90.496-90.496L421.504 512 195.2 285.696a64 64 0 0 1 0-90.496z"/>\n</svg>',!0);n.classList.add("modal-svg-close-button"),n.children[0].classList.add("modal-svg-close-icon");var r=Ka.createSVGButton('<?xml version="1.0" encoding="utf-8"?>\n<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n  <path d="M4.89163 13.2687L9.16582 17.5427L18.7085 8" stroke="#000000" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>\n</svg>');return r.classList.add("modal-svg-submit-button"),this.addButtons(t,r),this.addButtonEvents(t,n,r,e),{captureButton:t,submitButton:r}}},{key:"addButtonEvents",value:function(e,t,n,r){var i=this;e.onclick=function(){i.capture()},t.addEventListener("click",this.stop.bind(this)),n.onclick=function(){var e=i.getFile();e&&Ga.addFilesToType([e],[r]),i.stop(),i.close()}}},{key:"stop",value:function(){var e=this;this._mediaStream&&this._mediaStream.getTracks().forEach(function(e){return e.stop()}),this._stopped=!0,setTimeout(function(){e._captureButton.replaceChildren(e._captureIcon),e._captureButton.classList.replace("modal-svg-refresh-button","modal-svg-camera-button");var t=e._canvas.getContext("2d");null==t||t.clearRect(0,0,e._canvas.width,e._canvas.height)},Ka.MODAL_CLOSE_TIMEOUT_MS)}},{key:"start",value:function(){var e=this;this._dataURL=void 0,this._submitButton.classList.add("modal-svg-submit-disabled"),this._stopped=!1,navigator.mediaDevices.getUserMedia({video:this._dimensions||!0}).then(function(t){if(e._mediaStream=t,!e.isOpen())return e.stop();var n=document.createElement("video");n.srcObject=t,n.play(),requestAnimationFrame(e.updateCanvas.bind(e,n,e._canvas))}).catch(function(t){console.error(t),e.stop(),e.close()})}},{key:"capture",value:function(){this._dataURL?(this._captureButton.replaceChildren(this._captureIcon),this._captureButton.classList.replace("modal-svg-refresh-button","modal-svg-camera-button"),this._submitButton.classList.add("modal-svg-submit-disabled"),this._dataURL=void 0):(this._captureButton.replaceChildren(this._refreshIcon),this._captureButton.classList.replace("modal-svg-camera-button","modal-svg-refresh-button"),this._submitButton.classList.remove("modal-svg-submit-disabled"),this._dataURL=this._canvas.toDataURL())}},{key:"getFile",value:function(){if(this._dataURL){for(var e=atob(this._dataURL.split(",")[1]),t=new Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);var r=new Uint8Array(t),i=new Blob([r],{type:this._format}),a="image/jpeg"===this._format?"jpeg":"png",o=Ya.getFileName(this._newFilePrefix||"photo",a);return new File([i],o,{type:i.type})}}},{key:"updateCanvas",value:function(e,t){if(!this._stopped){if(!this._dataURL){t.width=e.videoWidth,t.height=e.videoHeight;var n=t.getContext("2d");null==n||n.drawImage(e,0,0,t.width,t.height)}requestAnimationFrame(this.updateCanvas.bind(this,e,t))}}},{key:"openCameraModal",value:function(e){this.displayModalElements(),e.start()}}],[{key:"createCameraModalFunc",value:function(e,n,r,i){var a=new t(e,n,r,i);return a.openCameraModal.bind(a,a)}}])}(Ka),ro=function(e){function t(e,n,r){var i,a,o,s,l,u,c;x(this,t);var d=null==(a=null==r?void 0:r.button)?void 0:a.position,p=(null==(l=null==(s=null==(o=null==r?void 0:r.button)?void 0:o.styles)?void 0:s.text)?void 0:l.content)||"Photo",h=B.tryCreateConfig("Camera",null==(u=null==r?void 0:r.button)?void 0:u.tooltip),m=(null==(c=null==r?void 0:r.button)?void 0:c.styles)||{},v=(i=f(this,t,[t.createButtonElement(),'<?xml version="1.0" encoding="utf-8"?>\n<svg viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg">\n  <path d="M29 7h-4.599l-2.401-4h-12l-2.4 4h-4.6c-1 0-3 1-3 2.969v16.031c0 1.657 1.5 3 2.792 3h26.271c1.313 0 2.938-1.406 2.938-2.968v-16.032c0-1-1-3-3-3zM30 26.032c0 0.395-0.639 0.947-0.937 0.969h-26.265c-0.232-0.019-0.797-0.47-0.797-1v-16.031c0-0.634 0.851-0.953 1-0.969h5.732l2.4-4h9.802l1.785 3.030 0.55 0.97h5.731c0.705 0 0.99 0.921 1 1v16.032zM16 10c-3.866 0-7 3.134-7 7s3.134 7 7 7 7-3.134 7-7-3.134-7-7-7zM16 22c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z"></path>\n</svg>',d,h,m,p])).createInnerElementsForStates(i.customStyles);return r&&i.addClickEvent(e,n,r.modalContainerStyle,r.files),i.changeElementsByState(v.styles),i.reapplyStateStyle("styles"),i}return v(t,e),T(t,[{key:"createInnerElementsForStates",value:function(e){return{styles:this.createInnerElements("camera-icon","styles",e)}}},{key:"addClickEvent",value:function(e,t,n,r){var i=no.createCameraModalFunc(e,t,n,r);this.elementRef.onclick=i}}],[{key:"createButtonElement",value:function(){var e=document.createElement("div");return e.classList.add("input-button"),e}}])}(Cr),io=function(){function e(t,n,r,i){x(this,e),this.elementRef=e.createPanelElement(t.inputAreaStyle);var a={},o=this.createFileUploadComponents(t,r,i,a),s=new G(t,r,o);t.speechToText&&!a.microphone&&(a.microphone={button:new ja(t,s,n.addNewErrorMessage.bind(n))});var l=new to(t,s,n,r,o,a);s.submit=l.submitFromInput.bind(l),Xa.attach(t,r,s,o,l),t.submitUserMessage=l.programmaticSubmit.bind(l),a.submit={button:l},t.customButtons&&wi.add(t,a),e.addElements(this.elementRef,s,a,i,o,t.dropupStyles),e.assignOnInput(t,r,o,s)}return T(e,[{key:"createFileUploadComponents",value:function(t,n,r,i){var a,o,s,l,u=new Ga(this.elementRef,t.attachmentContainerStyle,n.demo);if(e.createUploadButtons(t,n,n.fileTypes||{},u,r,i),null!=(a=n.camera)&&a.files){var c=(null==(o=i.images)?void 0:o.fileType)||u.addType(t,n,n.camera.files,"images");i.camera={button:new ro(r,c,n.camera)}}if(null!=(s=n.recordAudio)&&s.files){var d=(null==(l=i.audio)?void 0:l.fileType)||u.addType(t,n,n.recordAudio.files,"audio");i.microphone={button:new Qa(d,n.recordAudio)}}return $a.isEnabled(u,t.dragAndDrop)&&$a.create(r,u,t.dragAndDrop),u}}],[{key:"createPanelElement",value:function(e){var t=document.createElement("div");return t.id="input",Object.assign(t.style,e),t}},{key:"createUploadButtons",value:function(e,t,n,r,i,a){Object.keys(n).forEach(function(o){var s=o,l=n[s];if(l.files){var u=r.addType(e,t,l.files,s),c=Li[s],d=c.id,f=c.svgString,p=c.dropupText,h=new Ja(i,u,l,d,f,p);a[s]={button:h,fileType:u}}})}},{key:"addElements",value:function(e,t,n,r,i,a){Q.addElements(e,t.elementRef);var o=bi.create(),s=Mi.addButtons(o,n,r,a);yi.set(t.inputElementRef,o,i.elementRef,s),bi.add(e,o)}},{key:"assignOnInput",value:function(e,t,n,r){t.onInput=function(t){setTimeout(function(){var i=n.getAllFileData(),a={text:r.inputElementRef.innerText.trim()};i&&(a.files=i.map(function(e){return e.file})),Ht.onInput(e,a,t)})}}}])}(),ao=function(){function e(){x(this,e)}return T(e,null,[{key:"createElements",value:function(e,t,n){var r=document.createElement("div");r.id="chat-view";var i=new vi(e,t,n);t.websocket&&yn.createConnection(t,i);var a=new io(e,i,t,r);return Q.addElements(r,i.elementRef,a.elementRef),r}},{key:"render",value:function(t,n,r,i){var a=e.createElements(t,r,i);n.replaceChildren(a),r.isCustomView()&&r.setUpView(a,n)}}])}(),oo=Object.defineProperty,so=function(e,t,n,r){for(var i,a=void 0,o=e.length-1;o>=0;o--)(i=e[o])&&(a=i(t,n,a)||a);return a&&oo(t,n,a),a},lo=function(e){function t(){var e,n;return x(this,t),(e=f(this,t)).getMessages=function(){return[]},e.submitUserMessage=function(){return console.warn("submitUserMessage failed - please wait for chat view to render before calling this property.")},e.addMessage=function(){return console.warn("addMessage failed - please wait for chat view to render before calling this property.")},e.updateMessage=function(){},e.clearMessages=function(){},e.focusInput=function(){return W.focusFromParentElement(e._elementRef)},e.refreshMessages=function(){},e.scrollToBottom=function(){},e.disableSubmitButton=function(){},e.setPlaceholderText=function(){},e._hasBeenRendered=!1,e._auxiliaryStyleApplied=!1,e._elementRef=document.createElement("div"),e._elementRef.id="container",e.attachShadow({mode:"open"}).appendChild(e._elementRef),null==(n=e.shadowRoot)||n.appendChild(B.buildElement()),N.apply('#validate-property-key-view{height:100%;position:relative;display:flex;justify-content:center;align-items:center;padding:8px}#loading-validate-key-property{display:inline-block;width:50px;height:50px}#loading-validate-key-property:after{content:" ";display:block;width:38px;height:38px;margin:1px;border-radius:50%;border:5px solid #5fb2ff;border-color:#5fb2ff transparent #5fb2ff transparent;animation:loading-spinner 1.4s linear infinite}#deep-chat-openai-realtime-container{height:100%;width:100%}#deep-chat-openai-realtime-avatar-container{height:60%;width:100%;display:flex;justify-content:center;align-items:center}#deep-chat-openai-realtime-avatar{border-radius:50%;height:110px;border:1px solid rgb(215,215,215);padding:8px;-webkit-user-select:none;user-select:none;margin-top:20px}#deep-chat-openai-realtime-buttons-container{height:40%;display:flex;position:relative}.deep-chat-openai-realtime-button-container{height:100%;width:50%;display:flex;justify-content:center;align-items:center}.deep-chat-openai-realtime-button{width:70px;height:70px;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer}.deep-chat-openai-realtime-button-default{background-color:#e3e3e3}.deep-chat-openai-realtime-button-default:hover{background-color:#d4d4d4}.deep-chat-openai-realtime-button-default:active{background-color:#c5c5c5}.deep-chat-openai-realtime-button-loading{opacity:.7;pointer-events:none}.deep-chat-openai-realtime-microphone-active{background-color:#ffe7e7}.deep-chat-openai-realtime-microphone-active:hover{background-color:#ffdede}.deep-chat-openai-realtime-microphone-active:active{background-color:#ffd2d2}.deep-chat-openai-realtime-microphone>*{height:30px;width:30px}.deep-chat-openai-realtime-microphone-active>*{filter:brightness(0) saturate(100%) invert(35%) sepia(60%) saturate(1360%) hue-rotate(325deg) brightness(95%) contrast(92%)}.deep-chat-openai-realtime-toggle>*{height:32px;width:32px;padding-left:3px;filter:brightness(0) saturate(100%) invert(22%) sepia(0%) saturate(4537%) hue-rotate(208deg) brightness(105%) contrast(91%)}.deep-chat-openai-realtime-button-unavailable{opacity:.45;pointer-events:none}#deep-chat-openai-realtime-error{color:red;position:absolute;top:calc(50% + 40px);left:50%;transform:translate(-50%,-50%);font-size:17px}#deep-chat-openai-realtime-loading{position:absolute;font-size:15px;top:50%;left:50%;transform:translate(-50%,-50%)}#insert-key-view{height:100%;position:relative}#insert-key-contents{text-align:center;position:absolute;top:44%;left:50%;transform:translate(-50%,-50%);width:82%;display:flex;max-width:700px}#insert-key-title{margin-bottom:15px}#insert-key-input-container{margin-right:2.7em;width:calc(100% - 80px)}#insert-key-input{padding:.3em 1.7em .3em .3em;border-width:1px;border-style:solid;border-radius:3px;width:100%;font-size:inherit}.insert-key-input-valid{border-color:gray}.insert-key-input-invalid{border-color:red}#visibility-icon-container{position:relative;float:right;cursor:pointer;-webkit-user-select:none;user-select:none}.visibility-icon{filter:brightness(0) saturate(100%) invert(63%) sepia(1%) saturate(9%) hue-rotate(43deg) brightness(98%) contrast(92%);position:absolute;right:-1.7em;top:-1.43em}#visible-icon{top:-1.4em}.visibility-icon:hover{filter:unset}.visibility-icon>*{pointer-events:none}#start-button{border:1px solid grey;color:#454545;border-radius:4px;width:3em;display:flex;justify-content:center;align-items:center;cursor:pointer;padding:.28em .3em;-webkit-user-select:none;user-select:none;background-color:#fff}#start-button:hover{background-color:#f2f2f2}#start-button:active{background-color:#d2d2d2}#insert-key-help-text-container{width:100%;position:absolute;margin-top:32px;margin-bottom:20px}#insert-key-help-text-contents{width:100%;position:absolute}#insert-key-input-invalid-text{display:block;margin-top:1em;margin-bottom:.5em;color:red}.insert-key-input-help-text{display:block;margin-top:16px}#loading-key{display:inline-block;width:16px;height:16px}#loading-key:after{content:" ";display:block;width:11px;height:11px;margin:1px;border-radius:50%;border:2px solid #0084ff;border-color:#0084ff transparent #0084ff transparent;animation:loading-spinner 1.2s linear infinite}#error-view{color:red;font-size:1.2em;line-height:1.3em;margin-top:-5px;text-align:center;height:100%;display:flex;justify-content:center;align-items:center;padding-left:8px;padding-right:8px}@keyframes loading-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.intro-panel{position:absolute;display:flex;justify-content:center;right:0;bottom:0;left:0;margin:auto;height:fit-content;top:-2.5em}#internal-intro-panel{width:250px;height:min-content;display:block;border-radius:5px;overflow:auto;border:1px solid rgb(203,203,203);padding:10px;max-height:calc(100% - 6.8em)}#internal-intro-panel>p{margin-block-start:.8em;margin-block-end:.8em}pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}/*!\n  Theme: a11y-dark\n  Author: @ericwbailey\n  Maintainer: @ericwbailey\n\n  Based on the Tomorrow Night Eighties theme: https://github.com/isagalaev/highlight.js/blob/master/src/styles/tomorrow-night-eighties.css\n*/.hljs{background:#2b2b2b;color:#f8f8f2}.hljs-comment,.hljs-quote{color:#d4d0ab}.hljs-deletion,.hljs-name,.hljs-regexp,.hljs-selector-class,.hljs-selector-id,.hljs-tag,.hljs-template-variable,.hljs-variable{color:#ffa07a}.hljs-built_in,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-type{color:#f5ab35}.hljs-attribute{color:gold}.hljs-addition,.hljs-bullet,.hljs-string,.hljs-symbol{color:#abe338}.hljs-section,.hljs-title{color:#00e0e0}.hljs-keyword,.hljs-selector-tag{color:#dcc6e0}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}@media screen and (-ms-high-contrast: active){.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-bullet,.hljs-comment,.hljs-link,.hljs-literal,.hljs-meta,.hljs-number,.hljs-params,.hljs-quote,.hljs-string,.hljs-symbol,.hljs-type{color:highlight}.hljs-keyword,.hljs-selector-tag{font-weight:700}}#messages{overflow:auto}.outer-message-container:last-child{margin-bottom:5px}.inner-message-container{display:flex;margin-left:auto;margin-right:auto;width:calc(97.5% - 24px);max-width:100%}.message-bubble{margin-top:10px;word-wrap:break-word;width:fit-content;max-width:60%;border-radius:10px;padding:.42em .55em;height:fit-content;line-height:1.26em}.user-message-text{color:#fff;background-color:#0084ff;margin-right:0;margin-left:auto}.ai-message-text{color:#000;background-color:#e4e6eb;margin-left:0;margin-right:auto}.deep-chat-last-group-messages-active{height:100%}.loading-history-message-full-view{position:absolute;height:70%;width:100%;display:flex;align-items:center}.loading-history-message-small{height:20px;margin-bottom:30px}.loading-history-message-small>div>div{scale:.6}.loading-history-message{margin-top:0;width:100%;max-width:100%;display:flex;justify-content:center;background-color:unset}.loading-history{width:70px}.loading-history div{position:absolute;width:var(--loading-history-width);height:var(--loading-history-height);margin:var(--loading-history-margin);border:var(--loading-history-border);border-radius:50%;animation:loading-spinner 1.2s cubic-bezier(.5,0,.5,1) infinite;border-color:var(--loading-history-color) transparent transparent transparent}.loading-history div:nth-child(1){animation-delay:-.45s}.loading-history div:nth-child(2){animation-delay:-.3s}.loading-history div:nth-child(3){animation-delay:-.15s}.html-message{max-width:unset}.error-message-text{margin:14px auto 10px;background-color:#f4c0c0;color:#474747;text-align:center;max-width:95%}.deep-chat-loading-message-dots-container{width:1em;padding:.6em .75em .6em 1.3em}.loading-message-dots{position:relative;width:.45em;height:.45em;border-radius:5px;background-color:var(--loading-message-color);color:var(--loading-message-color);animation:loading-message-dots 1s infinite linear alternate;animation-delay:.5s}.loading-message-dots:before,.loading-message-dots:after{content:"";display:inline-block;position:absolute;top:0}.loading-message-dots:before{left:-.7em;width:.45em;height:.45em;border-radius:5px;background-color:var(--loading-message-color);color:var(--loading-message-color);animation:loading-message-dots 1s infinite alternate;animation-delay:0s}.loading-message-dots:after{left:.7em;width:.45em;height:.45em;border-radius:5px;background-color:var(--loading-message-color);color:var(--loading-message-color);animation:loading-message-dots 1s infinite alternate;animation-delay:1s}@keyframes loading-message-dots{0%{background-color:var(--loading-message-color)}50%,to{background-color:var(--loading-message-color-fade)}}.message-bubble>p:first-child,.message-bubble>.partial-render-message>p:first-child,.stream-wrapper>p:first-child{margin-top:0}.message-bubble>p:last-child,.message-bubble>.partial-render-message:last-child>p,.stream-wrapper>p:last-child{margin-bottom:0}pre{overflow:auto;display:block;word-break:break-all;word-wrap:break-word;border-radius:7px;background:#2b2b2b;color:#f8f8f2;margin-top:.8em;margin-bottom:.8em;padding:.6em;font-size:.9em;line-height:1.5em}.image-message{padding:0;display:flex;background-color:#ddd}.image-message>*,.image-message>*>*{width:100%;border-radius:8px;display:flex}.audio-message{width:60%;max-width:300px;height:2.2em;max-height:54px;padding:0;background-color:unset}.audio-player{width:100%;height:100%}.audio-player-safari{height:fit-content;width:40px}.audio-player-safari-left{float:left}.audio-player-safari-right{float:right}.any-file-message{padding:1px}.any-file-message-contents{display:flex}.any-file-message-icon-container{width:1.3em;min-width:1.3em;position:relative;border-radius:4px;margin-left:6px;margin-right:2px}.any-file-message-icon{background-color:#fff;border-radius:4px;position:absolute;width:1em;height:1.25em;padding:1px;margin-top:auto;margin-bottom:auto;top:0;bottom:0}.any-file-message-text{padding-top:5px;overflow-wrap:anywhere;padding-bottom:5px;padding-right:7px}.message-bubble>a{color:inherit}.left-item-position{margin-right:10px}.right-item-position{margin-left:10px}.role-hidden{display:none}.avatar{padding-top:5px;width:1.5em;height:1.5em;border-radius:1px}.avatar-container{margin-top:9px}.name{margin-top:16px;font-size:15px}#drag-and-drop{position:absolute;display:none;z-index:10;height:calc(100% - 10px);width:calc(100% - 10px);background-color:#70c6ff4d;border:5px dashed #6dafff}#file-attachment-container{position:absolute;height:3.6em;width:calc(80% - 4px);top:-2.5em;border-radius:5px;overflow:auto;text-align:left;background-color:#d7d7d73b;padding-left:4px}.file-attachment{width:2.85em;height:2.85em;display:inline-flex;margin-right:.6em;margin-bottom:.44em;margin-top:4px;position:relative;background-color:#fff;border-radius:5px}.image-attachment{width:100%;height:100%;object-fit:cover;border-radius:5px}.border-bound-attachment{width:calc(100% - 2px);height:calc(100% - 2px);border:1px solid #c3c3c3;border-radius:5px;overflow:hidden}.border-bound-attachment-safari{width:calc(100% - 1px);height:calc(100% - 1px)}.audio-attachment-icon-container{cursor:pointer}.audio-attachment-icon-container:hover{background-color:#f8f8f8}.attachment-icon{left:0;right:0;bottom:0;top:2px;margin:auto;position:absolute;width:25px;-webkit-user-select:none;user-select:none}.not-removable-attachment-icon{top:0;right:0;bottom:0;left:0}.play-icon{filter:brightness(0) saturate(100%) invert(17%) sepia(0%) saturate(1392%) hue-rotate(67deg) brightness(98%) contrast(97%)}.stop-icon{filter:brightness(0) saturate(100%) invert(29%) sepia(90%) saturate(1228%) hue-rotate(198deg) brightness(93%) contrast(98%)}.audio-placeholder-text-3-digits{padding-left:.26rem}.audio-placeholder-text-4-digits{padding-left:.1rem}.any-file-attachment{padding:2px 0}.file-attachment-text-container{position:absolute;width:inherit;display:flex;align-items:center;height:100%;top:-1px}.audio-placeholder-text-3-digits-container{padding-top:1px;cursor:default}.any-file-attachment-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;padding-left:.13em;margin-left:auto;margin-right:auto}.remove-file-attachment-button{height:1.25em;width:1.25em;border:1px solid #cfcfcf;border-radius:25px;background-color:#fff;top:-4px;right:-5px;position:absolute;display:flex;justify-content:center;cursor:pointer;-webkit-user-select:none;user-select:none}.remove-file-attachment-button:hover{background-color:#e4e4e4}.remove-file-attachment-button:active{background-color:#d7d7d7}.x-icon{color:#4e4e4e;top:-.075em;position:relative;font-size:1.05em}.modal{display:none;flex-direction:column;align-items:center;justify-content:center;position:absolute;width:80%;max-width:420px;max-height:80%;margin:auto;top:0;right:0;bottom:0;left:0;z-index:3}.modal-content{border-top:1px solid rgb(217,217,217);border-left:1px solid rgb(217,217,217);border-right:1px solid rgb(217,217,217);border-top-left-radius:inherit;border-top-right-radius:inherit;background-color:#fff;overflow-y:auto;height:fit-content;max-height:calc(100% - 3.3em);width:100%}.modal-content>p{margin-left:1em;margin-right:1em}.modal-content>ul{margin-right:1em}.modal-button-panel{height:3.3em;border:1px solid;border-color:rgb(223,223,223) rgb(217,217,217) rgb(217,217,217);border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;background-color:#fff;text-align:center;justify-content:center;display:flex;width:100%}.modal-button{min-width:2.5em;text-align:center;color:#fff;border-radius:5px;padding:.4em .4em .3em;height:1.25em;background-color:#3279b2;top:0;bottom:0;cursor:pointer;-webkit-user-select:none;user-select:none;margin:auto .31em}.modal-button:hover{background-color:#276da7}.modal-button:active{background-color:#1b5687}.modal-svg-button{padding:0 0 2px;width:2em;height:1.8em}.modal-svg-button-icon{width:100%;height:100%;filter:brightness(0) saturate(100%) invert(100%) sepia(15%) saturate(4%) hue-rotate(346deg) brightness(101%) contrast(102%)}#modal-background-panel{position:absolute;width:100%;height:100%;background-color:#00000042;z-index:2;display:none}.show-modal-background{animation:fadeInBackground .3s ease-in-out}@keyframes fadeInBackground{0%{opacity:0}to{opacity:1}}.show-modal{animation:fadeInModal .3s ease-in-out}@keyframes fadeInModal{0%{opacity:0;scale:.95}to{opacity:1;scale:1}}.hide-modal-background{animation:fadeOutBackground .2s ease-in-out}@keyframes fadeOutBackground{0%{opacity:1}to{opacity:0}}.hide-modal{animation:fadeOutModal .2s ease-in-out}@keyframes fadeOutModal{0%{opacity:1;scale:1}to{opacity:0;scale:.95}}.modal-camera-content{overflow:hidden;text-align:center;border:unset;height:100%;background-color:#2a2a2a;display:flex;justify-content:center}.camera-modal-canvas{max-width:100%;max-height:100%;margin-top:auto;margin-bottom:auto}.modal-svg-submit-button{background-color:green}.modal-svg-submit-button:hover{background-color:#007500}.modal-svg-submit-button:active{background-color:#006500}.modal-svg-submit-disabled{pointer-events:none;background-color:#747474}.modal-svg-close-button{height:1.56em;padding-top:.37em;padding-bottom:0;background-color:#c13e3e}.modal-svg-close-button:hover{background-color:#b43434}.modal-svg-close-button:active{background-color:#972929}.modal-svg-close-icon{width:80%;height:80%}.modal-svg-camera-button{height:1.6em;padding-top:.38em;padding-bottom:0}.modal-svg-camera-icon{height:76%}.modal-svg-refresh-icon{height:105%}.modal-svg-refresh-button{height:1.66em;padding-top:.11em;padding-bottom:.21em}.input-button-container{position:relative;z-index:1}.inside-right{position:absolute;right:calc(10% + .35em);bottom:.85em}.inside-left{position:absolute;left:calc(10% + .35em);bottom:.85em}.outside-left{position:absolute;right:calc(11px - .55em);bottom:.88em}.outside-right{position:absolute;left:calc(11px - .55em);bottom:.88em}#upload-images-icon{position:absolute;pointer-events:none;width:1.45em;height:1.45em;left:.11em;bottom:.08em;filter:brightness(0) saturate(100%) invert(43%) sepia(0%) saturate(740%) hue-rotate(77deg) brightness(99%) contrast(92%)}#upload-gifs-icon{position:absolute;pointer-events:none;width:1.5em;height:1.48em;left:.07em;bottom:.08em;filter:brightness(0) saturate(100%) invert(49%) sepia(0%) saturate(2586%) hue-rotate(12deg) brightness(93%) contrast(90%)}#upload-audio-icon{position:absolute;pointer-events:none;width:1.21em;height:1.21em;left:.17em;bottom:.2em;filter:brightness(0) saturate(100%) invert(15%) sepia(0%) saturate(337%) hue-rotate(125deg) brightness(91%) contrast(94%);transform:scaleX(.95)}#camera-icon{position:absolute;pointer-events:none;width:1.21em;height:1.21em;left:.23em;bottom:.2em;filter:brightness(0) saturate(100%) invert(52%) sepia(0%) saturate(161%) hue-rotate(164deg) brightness(91%) contrast(92%);transform:scaleX(.95)}#upload-mixed-files-icon{position:absolute;pointer-events:none;width:1.21em;height:1.21em;left:.25em;bottom:.2em;filter:brightness(0) saturate(100%) invert(53%) sepia(0%) saturate(36%) hue-rotate(74deg) brightness(98%) contrast(93%);transform:scaleX(.95)}#interim-text{color:gray}#microphone-button{padding-top:.5px}.outer-button-container>#microphone-button{padding-bottom:1px}#microphone-icon{position:absolute;pointer-events:none;width:1.21em;height:1.21em;left:.25em;bottom:.25em}.default-microphone-icon{filter:brightness(0) saturate(100%) invert(32%) sepia(0%) saturate(924%) hue-rotate(46deg) brightness(95%) contrast(99%)}.active-microphone-icon{filter:brightness(0) saturate(100%) invert(10%) sepia(97%) saturate(7495%) hue-rotate(0deg) brightness(101%) contrast(107%);border-radius:10px}.command-microphone-icon{filter:brightness(0) saturate(100%) invert(42%) sepia(96%) saturate(1067%) hue-rotate(77deg) brightness(99%) contrast(102%)}.unsupported-microphone{display:none}#submit-icon{height:100%;filter:brightness(0) saturate(100%) invert(32%) sepia(0%) saturate(924%) hue-rotate(46deg) brightness(95%) contrast(99%);width:1.21em}#stop-icon{background-color:#acacac;position:absolute;width:.95em;height:.95em;left:.35em;bottom:.35em;border-radius:2px}.submit-button-enlarged{scale:1.1;margin-right:.3em;margin-left:.3em}.loading-submit-button{position:relative;left:calc(-9990px + .275em);width:.22em;height:.22em;border-radius:5px;background-color:#848484;color:#848484;box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484;animation:loading-submit-button 1.5s infinite linear;bottom:-.75em}@keyframes loading-submit-button{0%{box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}16.667%{box-shadow:9990px -6px #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}33.333%{box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}50%{box-shadow:9990px 0 #848484,calc(9990px + .44em) -6px 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}66.667%{box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}83.333%{box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) -6px 0 0 #848484}to{box-shadow:9990px 0 #848484,calc(9990px + .44em) 0 0 0 #848484,calc(9990px + .8em) 0 0 0 #848484}}.tooltip{position:absolute;visibility:hidden;z-index:1;pointer-events:none;padding:5px 7px;background-color:#333;border-radius:5px;width:max-content}.tooltip-text{color:#fff;font-size:13px}.input-button{border-radius:4px;cursor:pointer;margin-bottom:.2em;-webkit-user-select:none;user-select:none}.input-button-svg{width:1.65em;height:1.65em}.input-button-svg-text{padding:1px;height:1.65em;display:flex}.input-button-svg-text>svg{padding:.22rem}.input-button-svg-text>div{margin-left:2px}.input-button:hover,.input-button:focus-visible{background-color:#9c9c9c2e}.input-button:active{background-color:#9c9c9c5e}.input-button:active:not(:hover){background-color:transparent}.loading-button{cursor:auto}.loading-button:hover{background-color:unset}.text-button{filter:unset!important;display:flex;justify-content:center;align-items:center;margin-left:4px;margin-right:4px;height:1.6em;width:max-content}#custom-icon{height:100%;width:1.2em}.custom-button-container-default{color:#505050}.custom-button-container-default>.dropup-menu-item-icon{color:unset}.custom-button-container-default>svg{filter:brightness(0) saturate(100%) invert(39%) sepia(1%) saturate(0%) hue-rotate(83deg) brightness(93%) contrast(90%)}.custom-button-container-default>.dropup-menu-item-icon>svg{position:absolute;left:.2em}.custom-button-container-active{background-color:#edf7ff;color:#0285ff}.custom-button-container-active:hover,.custom-button-container-active:focus-visible{background-color:#def0ff}.custom-button-container-active:active{background-color:#d2eaff}.custom-button-container-active>svg{filter:brightness(0) saturate(100%) invert(32%) sepia(34%) saturate(4196%) hue-rotate(196deg) brightness(107%) contrast(104%)}.custom-button-container-disabled{color:#aeaeae;cursor:auto}.custom-button-container-disabled>div{pointer-events:none}.custom-button-container-disabled:hover,.custom-button-container-disabled:focus-visible{background-color:transparent}.custom-button-container-disabled:active{background-color:transparent}.custom-button-container-disabled>svg{filter:brightness(0) saturate(100%) invert(67%) sepia(0%) saturate(818%) hue-rotate(28deg) brightness(102%) contrast(100%)}#text-input-container{background-color:#fff;width:80%;display:flex;border:1px solid #0000001a;border-radius:5px;margin-top:.8em;margin-bottom:.8em;box-shadow:#959da533 0 1px 12px;overflow-y:auto;max-height:200px;position:relative}.text-input-container-left-adjustment{margin-left:1.5em}.text-input-container-right-adjustment{margin-right:1.5em}.text-input-container-left-small-adjustment{margin-left:1.1em}.text-input-container-left-small-adjustment>.outside-left{right:calc(14px - .55em)}.text-input-container-right-small-adjustment{margin-right:1.1em}.text-input-container-right-small-adjustment>.outside-right{left:calc(14px - .55em)}#text-input{text-align:left;outline:none;word-wrap:break-word;line-break:auto}.text-input-styling{padding:.4em .5em;overflow:overlay;width:100%}.text-input-inner-left-adjustment{padding-left:2.2em}.text-input-inner-right-adjustment{padding-right:2em}.text-input-disabled{pointer-events:none;-webkit-user-select:none;user-select:none}[contenteditable]:empty:before{content:attr(deep-chat-placeholder-text);pointer-events:none}[contenteditable][textcolor]:empty:before{color:gray}.outside-right>#dropup-menu,.inside-right>#dropup-menu{right:0}#dropup-icon{position:absolute;pointer-events:none;width:1.16em;height:1.2em;left:.265em;bottom:.43em;filter:brightness(0) saturate(100%) invert(54%) sepia(0%) saturate(724%) hue-rotate(6deg) brightness(92%) contrast(90%)}.dropup-button>*{pointer-events:none}#dropup-menu{background-color:#fff;position:absolute;transform:translateY(-100%);border-radius:5px;z-index:1;top:-.49em;box-shadow:#0003 -1px 2px 10px,#0000001a 0 2px 4px;cursor:pointer;-webkit-user-select:none;user-select:none}.dropup-menu-item{height:1.4em;padding:.28em .84em .28em .35em;display:flex;position:relative}.dropup-menu-item:hover,.dropup-menu-item:focus-visible{background-color:#f3f3f3}.dropup-menu-item:active{background-color:#ebebeb}.dropup-menu-item:active:not(:hover){background-color:transparent}.dropup-menu-item:first-child{padding-top:.49em;border-top-left-radius:inherit;border-top-right-radius:inherit}.dropup-menu-item:last-child{padding-bottom:.45em;border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.dropup-menu-item-icon{width:1.39em;position:relative}.dropup-menu-item-icon>svg{bottom:0!important;top:0!important;margin-bottom:auto;margin-top:auto}#dropup-menu-item-icon-element-custom{position:absolute;pointer-events:none;width:1.21em;height:1.21em;left:.28em;filter:brightness(0) saturate(100%) invert(15%) sepia(0%) saturate(337%) hue-rotate(125deg) brightness(91%) contrast(94%)}.dropup-menu-item-text{margin-left:.56em;margin-top:.08em;width:max-content}#input{width:100%;display:inline-flex;text-align:center;margin-left:auto;margin-right:auto;margin-top:auto;position:relative;justify-content:center}#chat-view{height:100%;display:grid;grid-template-columns:100%}::-webkit-scrollbar{width:9px;height:9px}::-webkit-scrollbar-thumb{background-color:#d0d0d0;border-radius:5px}::-webkit-scrollbar-track{background-color:#f2f2f2}.deep-chat-web-model-button{margin-top:10px;margin-bottom:5px;margin-left:1px}:host{all:initial;display:table-cell}#container{height:inherit;width:inherit;overflow:hidden}',e.shadowRoot),setTimeout(function(){e._hasBeenRendered||e.onRender()},20),e}return v(t,e),T(t,[{key:"changeToChatView",value:function(){this._activeService&&(this._activeService.validateKeyProperty=!1),this.onRender()}},{key:"onRender",value:function(){var e;O.attemptAppendStyleSheetToHead(this.style),ae.processConnect(this),(!this._activeService||this._activeService.demo)&&(this._activeService=si.create(this)),this.auxiliaryStyle&&!this._auxiliaryStyleApplied&&(N.apply(this.auxiliaryStyle,this.shadowRoot),this._auxiliaryStyleApplied=!0),N.applyDefaultStyleToComponent(this.style,this.chatStyle),ae.checkForContainerStyles(this,this._elementRef),this._activeService.key&&this._activeService.validateKeyProperty?L.render(this._elementRef,this.changeToChatView.bind(this),this._activeService):this._activeService instanceof Cn&&!this._activeService.key?this._activeService instanceof Cn&&On.render(this._elementRef,this.changeToChatView.bind(this),this._activeService):(null!==(e=this._childElement)&&void 0!==e||(this._childElement=this.children[0]),ao.render(this,this._elementRef,this._activeService,this._childElement)),this._hasBeenRendered||Ht.onRender(this),this._hasBeenRendered=!0}},{key:"disconnectedCallback",value:function(){Fn.chat=void 0}}])}(Mn);function uo(e){return uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uo(e)}function co(e){var t=function(e,t){if("object"!=uo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=uo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uo(t)?t:t+""}function fo(e,t,n){return(t=co(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?po(Object(n),!0).forEach(function(t){fo(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):po(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}so([ci("object")],lo.prototype,"connect"),so([ci("object")],lo.prototype,"directConnection"),so([ci("object")],lo.prototype,"webModel"),so([ci("object")],lo.prototype,"requestBodyLimits"),so([ci("function")],lo.prototype,"requestInterceptor"),so([ci("function")],lo.prototype,"responseInterceptor"),so([ci("function")],lo.prototype,"validateInput"),so([ci("function")],lo.prototype,"loadHistory"),so([ci("object")],lo.prototype,"chatStyle"),so([ci("object")],lo.prototype,"attachmentContainerStyle"),so([ci("object")],lo.prototype,"dropupStyles"),so([ci("object")],lo.prototype,"inputAreaStyle"),so([ci("object")],lo.prototype,"textInput"),so([ci("object")],lo.prototype,"submitButtonStyles"),so([ci("object")],lo.prototype,"customButtons"),so([ci("string")],lo.prototype,"auxiliaryStyle"),so([ci("array")],lo.prototype,"history"),so([ci("object")],lo.prototype,"browserStorage"),so([ci("object")],lo.prototype,"introMessage"),so([ci("object")],lo.prototype,"avatars"),so([ci("object")],lo.prototype,"names"),so([ci("object")],lo.prototype,"displayLoadingBubble"),so([ci("object")],lo.prototype,"errorMessages"),so([ci("object")],lo.prototype,"messageStyles"),so([ci("object")],lo.prototype,"textToSpeech"),so([ci("object")],lo.prototype,"speechToText"),so([ci("object")],lo.prototype,"images"),so([ci("object")],lo.prototype,"gifs"),so([ci("object")],lo.prototype,"camera"),so([ci("object")],lo.prototype,"audio"),so([ci("object")],lo.prototype,"microphone"),so([ci("object")],lo.prototype,"mixedFiles"),so([ci("object")],lo.prototype,"dragAndDrop"),so([ci("object")],lo.prototype,"introPanelStyle"),so([ci("object")],lo.prototype,"htmlClassUtilities"),so([ci("object")],lo.prototype,"remarkable"),so([ci("object")],lo.prototype,"focusMode"),so([ci("function")],lo.prototype,"onMessage"),so([ci("function")],lo.prototype,"onClearMessages"),so([ci("function")],lo.prototype,"onComponentRender"),so([ci("function")],lo.prototype,"onInput"),so([ci("function")],lo.prototype,"onError"),so([ci("object")],lo.prototype,"demo"),so([ci("object")],lo.prototype,"_insertKeyViewStyles"),customElements.define("deep-chat",lo);const mo=new Set(["children","localName","ref","style","className"]),vo=new WeakMap,go=(e,t,n,r,i)=>{const a=null===i||void 0===i?void 0:i[t];void 0===a?(e[t]=n,null==n&&t in HTMLElement.prototype&&e.removeAttribute(t)):n!==r&&((e,t,n)=>{let r=vo.get(e);void 0===r&&vo.set(e,r=new Map);let i=r.get(t);void 0!==n?void 0===i?(r.set(t,i={handleEvent:n}),e.addEventListener(t,i)):i.handleEvent=n:void 0!==i&&(r.delete(t),e.removeEventListener(t,i))})(e,a,n)},yo=(e=>{let{react:t,tagName:n,elementClass:r,events:i,displayName:a}=e;const o=new Set(Object.keys(null!==i&&void 0!==i?i:{})),s=t.forwardRef((e,a)=>{const s=t.useRef(new Map),l=t.useRef(null),u={},c={};for(const[t,n]of Object.entries(e))mo.has(t)?u["className"===t?"class":t]=n:o.has(t)||t in r.prototype?c[t]=n:u[t]=n;return t.useLayoutEffect(()=>{if(null===l.current)return;const t=new Map;for(const n in c)go(l.current,n,e[n],s.current.get(n),i),s.current.delete(n),t.set(n,e[n]);for(const[e,n]of s.current)go(l.current,e,void 0,n,i);s.current=t}),t.useLayoutEffect(()=>{var e;null===(e=l.current)||void 0===e||e.removeAttribute("defer-hydration")},[]),u.suppressHydrationWarning=!0,t.createElement(n,ho(ho({},u),{},{ref:t.useCallback(e=>{l.current=e,"function"==typeof a?a(e):null!==a&&(a.current=e)},[a])}))});return s.displayName=null!==a&&void 0!==a?a:r.name,s})({tagName:"deep-chat",elementClass:lo,react:a,events:{onactivate:"activate",onchange:"change"}});var bo=n(579);const ko=function(){return(0,bo.jsx)("div",{className:"App",children:(0,bo.jsx)("div",{className:"components",children:(0,bo.jsx)(yo,{className:"dc-container",style:{width:"98%",height:"93vh"},introMessage:{text:"Welcome! \ud83d\udc4b \n \n Tell us what events you\u2019re interested in \u2014 short or detailed, we\u2019ll do our best to help! We\u2019ll search for up to 20 best-matching events based on what you send us.\n \n \ud83d\udca1 *Try sending: What events related to building a good resume are coming up in the future?* \n \n To explore more features, send **/commands** \n \n To report any issues, contact **junweilao@tamu.edu** \n \n *Note: For your privacy, chat history will be cleared when you refresh the page.* "},connect:{url:"/api/chat",method:"POST",headers:{"Content-Type":"application/json"}},requestBodyLimits:{maxMessages:-1},requestInterceptor:e=>(console.log(e),e),responseInterceptor:e=>(console.log(e),e)})})})};r.createRoot(document.getElementById("root")).render((0,bo.jsx)(i.StrictMode,{children:(0,bo.jsx)(ko,{})}))})();
//# sourceMappingURL=main.8956f241.js.map